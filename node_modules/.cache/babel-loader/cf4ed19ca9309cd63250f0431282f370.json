{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{getVideoRecordsStorage,createVideoRecordStorage,getVideoRecordStorage}from\"../videostorage/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_React$Component){_inherits(F,_React$Component);var _super=_createSuper(F);function F(props){var _this;_classCallCheck(this,F);_this=_super.call(this,props);_this.uploadPriviewVideo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createVideoRecordStorage({folderUrl:_this.props.folderUrl,fileName:_this.props.fileName,filehtmlId:\"\",fileEvent:e,callback:function callback(result){console.log(result);if(result.isSuccess===\"true\"){// this.getHtmlInputVideo({ Videohtmlid: \"photo1\" });\n}else{}}});case 2:result=_context.sent;console.log(result);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.inputVideoradiochange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(e.target.value===\"fromlocal\"){_this.stopStreamedVideo();_this.setState({showFromLocal:true,showFromLibrary:false,showFromCamera:false,showpreviewVideoPanel:true});}if(e.target.value===\"fromlibrary\"){_this.stopStreamedVideo();_this.setState({showFromLocal:false,showFromLibrary:true,showFromCamera:false,showpreviewVideoPanel:true});_this.getLibrayData();}if(!(e.target.value===\"fromcamera\")){_context2.next=7;break;}_this.stopStreamedVideo();_context2.next=6;return _this.setState({showFromLocal:false,showFromLibrary:false,showFromCamera:true,showpreviewVideoPanel:true});case 6:navigator.mediaDevices.getUserMedia({video:{width:{exact:640},height:{exact:480}}}).then(function(stream){var videoHtml=document.getElementById(_this.props.videoHtmlId);console.log(stream);videoHtml.srcObject=stream;}).catch(function(err){console.error(\"Error: \",err);});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.getLibrayData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getVideoRecordsStorage({folderUrl:_this.props.folderUrl,fileName:\"\",pdfpageNumber:\"\",htmlId:\"\",fileEvent:\"\",callback:function callback(result){console.log(result);if(result.isSuccess===\"true\"){console.log(result.dataprops.fileNames);var libraryOptions=[];for(var i in result.dataprops.fileNames){console.log(result.dataprops.fileNames[i]);var fileName=result.dataprops.fileNames[i].name;if(fileName.toLowerCase().includes(\"webm\")||fileName.toLowerCase().includes(\"flv\")||fileName.toLowerCase().includes(\"mpg\")||fileName.toLowerCase().includes(\"mpeg\")||fileName.toLowerCase().includes(\"3gp\")||fileName.toLowerCase().includes(\"flv\")||fileName.toLowerCase().includes(\"mp4\")){libraryOptions.push(result.dataprops.fileNames[i]);}}console.log(libraryOptions);_this.setState({libraryOptions:libraryOptions});}else{}}});case 2:case\"end\":return _context3.stop();}}},_callee3);}));_this.stopStreamedVideo=function(){var videoElem=document.getElementById(_this.props.videoHtmlId);console.log(videoElem);if(videoElem){var stream=videoElem.srcObject;if(stream){var tracks=stream.getTracks();tracks.forEach(function(track){track.stop();});videoElem.srcObject=null;}}};_this.inputVideoselect=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var ds,previewVideoHtml,videoHtml,file,width,height,htmlinputVideocanvas,context,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(e.target.dataset);_this.uploadPriviewVideo(e);ds=e.target.dataset;//   await this.setState({ showpreviewVideoPanel: true });\npreviewVideoHtml=document.getElementById(_this.props.previewVideoHtmlId);videoHtml=document.getElementById(_this.props.videoHtmlId);console.log(_this.props.previewVideoHtmlId);console.log(previewVideoHtml);if(ds.type===\"fromlocal\"){file=e.target.files[0];previewVideoHtml.src=URL.createObjectURL(file);//   \"http://techslides.com/demos/sample-videos/small.mp4\";\n// const reader = new FileReader();\n// reader.onload = (function (aVideo) {\n//   return function (e) {\n//     aVideo.src = e.target.result;\n//   };\n// })(previewVideoHtml);\n// reader.readAsDataURL(file);\n}if(ds.type===\"fromlibrary\"){console.log(e.target.value);if(e.target.value!==\"\"){_this.getVideoData(e.target.value);}}if(ds.type===\"fromcamera\"){width=640;height=480;console.log(width);console.log(height);htmlinputVideocanvas=document.createElement(\"canvas\");htmlinputVideocanvas.width=width;htmlinputVideocanvas.height=height;context=htmlinputVideocanvas.getContext(\"2d\");context.drawImage(videoHtml,0,0,width,height);data=htmlinputVideocanvas.toDataURL(\"image/png\");previewVideoHtml.setAttribute(\"src\",data);}case 10:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.getVideoData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(fileName){var previewVideoHtml;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:previewVideoHtml=document.getElementById(_this.props.previewVideoHtmlId);getVideoRecordStorage({folderUrl:_this.props.folderUrl,fileName:fileName,pdfpageNumber:1,htmlId:\"theCanvas\",fileEvent:\"\",callback:function callback(result){console.log(result);if(result.isSuccess===\"true\"){console.log(result.dataprops.imgsrc);previewVideoHtml.src=result.dataprops.imgsrc;}else{}}});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}();_this.editPriviewVideo=function(e){var previewVideoHtml=document.getElementById(_this.props.previewVideoHtmlId);console.log(previewVideoHtml.style.transform);console.log(previewVideoHtml.src);previewVideoHtml.src=_this.rotateBase64Video90deg(previewVideoHtml.src,true);console.log(previewVideoHtml.src);};_this.rotateBase64Video90deg=function(base64Video,isClockwise){// create an off-screen canvas\nvar offScreenCanvas=document.createElement(\"canvas\");var offScreenCanvasCtx=offScreenCanvas.getContext(\"2d\");// cteate Video\nvar video=new window.Video();video.src=base64Video;video.setAttribute(\"crossorigin\",\"anonymous\");// set its dimension to rotated size\noffScreenCanvas.height=video.width;offScreenCanvas.width=video.height;// rotate and draw source Video into the off-screen canvas:\nif(isClockwise){offScreenCanvasCtx.rotate(90*Math.PI/180);offScreenCanvasCtx.translate(0,-offScreenCanvas.width);}else{offScreenCanvasCtx.rotate(-90*Math.PI/180);offScreenCanvasCtx.translate(-offScreenCanvas.height,0);}offScreenCanvasCtx.drawImage(video,0,0);// encode image to data-uri with base64\nreturn offScreenCanvas.toDataURL(\"image/jpeg\",100);};_this.state={showFromLocal:false,showFromLibrary:false,libraryOptions:[],showFromCamera:false,showpreviewVideoPanel:false};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function componentDidMount(){getVideoRecordStorage({folderUrl:this.props.folderUrl,fileName:\"test (2).webm\",pdfpageNumber:1,htmlId:\"theCanvas\",fileEvent:\"\",callback:function callback(result){console.log(result);}});}},{key:\"render\",value:function render(){var _this$state=this.state,showFromLocal=_this$state.showFromLocal,showFromLibrary=_this$state.showFromLibrary,showFromCamera=_this$state.showFromCamera,libraryOptions=_this$state.libraryOptions,showpreviewVideoPanel=_this$state.showpreviewVideoPanel;var _this$props=this.props,radiogroupname=_this$props.radiogroupname,previewVideoHtmlId=_this$props.previewVideoHtmlId,videoHtmlId=_this$props.videoHtmlId;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-s  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c \",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromlocal\",onChange:this.inputVideoradiochange}),\"Upload file\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromlibrary\",onChange:this.inputVideoradiochange}),\"Add from Library\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromcamera\",onChange:this.inputVideoradiochange}),\"Camera\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromyoutube\",onChange:this.inputVideoradiochange}),\"Youtube\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromscreenshare\",onChange:this.inputVideoradiochange}),\"Screenshare\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",children:[showFromLocal===true?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{\"data-type\":\"fromlocal\",type:\"file\",onChange:this.inputVideoselect,accept:\"video/*\"})}):\"\",showFromLibrary===true?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{\"data-type\":\"fromlibrary\",onChange:this.inputVideoselect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"select a file\"}),libraryOptions?libraryOptions.map(function(libraryOption){return/*#__PURE__*/_jsx(\"option\",{value:libraryOption.name,children:libraryOption.label});}):\"\"]})}):\"\",showFromCamera===true?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{\"data-type\":\"fromcamera\",onClick:this.inputVideoselect,children:\"take pic\"}),/*#__PURE__*/_jsx(\"video\",{autoPlay:true,id:videoHtmlId,width:\"100%\"})]}):\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",children:showpreviewVideoPanel===true?/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-s\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr \",children:[/*#__PURE__*/_jsx(\"div\",{onClick:this.editPriviewVideo,children:\"Rotate\"}),/*#__PURE__*/_jsx(\"div\",{onClick:this.editPriviewVideo,children:\"Filter\"}),/*#__PURE__*/_jsx(\"div\",{onClick:this.uploadPriviewVideo,children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"video\",{width:\"100%\",id:previewVideoHtmlId,controls:true,autoPlay:true,src:\"http://techslides.com/demos/sample-videos/small.ogv\"})]}):\"\"})]})});}}]);return F;}(React.Component);export{F as default};","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/htmlforminputoutputvideo.js"],"names":["React","getVideoRecordsStorage","createVideoRecordStorage","getVideoRecordStorage","F","props","uploadPriviewVideo","e","folderUrl","fileName","filehtmlId","fileEvent","callback","result","console","log","isSuccess","inputVideoradiochange","target","value","stopStreamedVideo","setState","showFromLocal","showFromLibrary","showFromCamera","showpreviewVideoPanel","getLibrayData","navigator","mediaDevices","getUserMedia","video","width","exact","height","then","stream","videoHtml","document","getElementById","videoHtmlId","srcObject","catch","err","error","pdfpageNumber","htmlId","dataprops","fileNames","libraryOptions","i","name","toLowerCase","includes","push","videoElem","tracks","getTracks","forEach","track","stop","inputVideoselect","dataset","ds","previewVideoHtml","previewVideoHtmlId","type","file","files","src","URL","createObjectURL","getVideoData","htmlinputVideocanvas","createElement","context","getContext","drawImage","data","toDataURL","setAttribute","imgsrc","editPriviewVideo","style","transform","rotateBase64Video90deg","base64Video","isClockwise","offScreenCanvas","offScreenCanvasCtx","window","Video","rotate","Math","PI","translate","state","radiogroupname","map","libraryOption","label","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  getVideoRecordsStorage,\n  createVideoRecordStorage,\n  getVideoRecordStorage,\n} from \"../videostorage/index\";\n\nexport default class F extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showFromLocal: false,\n      showFromLibrary: false,\n      libraryOptions: [],\n      showFromCamera: false,\n      showpreviewVideoPanel: false,\n    };\n  }\n\n  componentDidMount() {\n    getVideoRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: \"test (2).webm\",\n      pdfpageNumber: 1,\n      htmlId: \"theCanvas\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n      },\n    });\n  }\n\n  uploadPriviewVideo = async (e) => {\n    let result = await createVideoRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: this.props.fileName,\n      filehtmlId: \"\",\n      fileEvent: e,\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess === \"true\") {\n          // this.getHtmlInputVideo({ Videohtmlid: \"photo1\" });\n        } else {\n        }\n      },\n    });\n    console.log(result);\n  };\n\n  inputVideoradiochange = async (e) => {\n    if (e.target.value === \"fromlocal\") {\n      this.stopStreamedVideo();\n      this.setState({\n        showFromLocal: true,\n        showFromLibrary: false,\n        showFromCamera: false,\n        showpreviewVideoPanel: true,\n      });\n    }\n    if (e.target.value === \"fromlibrary\") {\n      this.stopStreamedVideo();\n      this.setState({\n        showFromLocal: false,\n        showFromLibrary: true,\n        showFromCamera: false,\n        showpreviewVideoPanel: true,\n      });\n      this.getLibrayData();\n    }\n    if (e.target.value === \"fromcamera\") {\n      this.stopStreamedVideo();\n      await this.setState({\n        showFromLocal: false,\n        showFromLibrary: false,\n        showFromCamera: true,\n        showpreviewVideoPanel: true,\n      });\n      navigator.mediaDevices\n        .getUserMedia({\n          video: { width: { exact: 640 }, height: { exact: 480 } },\n        })\n        .then((stream) => {\n          let videoHtml = document.getElementById(this.props.videoHtmlId);\n          console.log(stream);\n          videoHtml.srcObject = stream;\n        })\n        .catch((err) => {\n          console.error(\"Error: \", err);\n        });\n    }\n  };\n\n  getLibrayData = async () => {\n    await getVideoRecordsStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: \"\",\n      pdfpageNumber: \"\",\n      htmlId: \"\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess === \"true\") {\n          console.log(result.dataprops.fileNames);\n          let libraryOptions = [];\n          for (let i in result.dataprops.fileNames) {\n            console.log(result.dataprops.fileNames[i]);\n            let fileName = result.dataprops.fileNames[i].name;\n            if (\n              fileName.toLowerCase().includes(\"webm\") ||\n              fileName.toLowerCase().includes(\"flv\") ||\n              fileName.toLowerCase().includes(\"mpg\") ||\n              fileName.toLowerCase().includes(\"mpeg\") ||\n              fileName.toLowerCase().includes(\"3gp\") ||\n              fileName.toLowerCase().includes(\"flv\") ||\n              fileName.toLowerCase().includes(\"mp4\")\n            ) {\n              libraryOptions.push(result.dataprops.fileNames[i]);\n            }\n          }\n          console.log(libraryOptions);\n          this.setState({ libraryOptions: libraryOptions });\n        } else {\n        }\n      },\n    });\n  };\n  stopStreamedVideo = () => {\n    let videoElem = document.getElementById(this.props.videoHtmlId);\n    console.log(videoElem);\n    if (videoElem) {\n      const stream = videoElem.srcObject;\n      if (stream) {\n        const tracks = stream.getTracks();\n        tracks.forEach(function (track) {\n          track.stop();\n        });\n        videoElem.srcObject = null;\n      }\n    }\n  };\n\n  inputVideoselect = async (e) => {\n    console.log(e.target.dataset);\n    this.uploadPriviewVideo(e);\n    let ds = e.target.dataset;\n    //   await this.setState({ showpreviewVideoPanel: true });\n    let previewVideoHtml = document.getElementById(\n      this.props.previewVideoHtmlId\n    );\n    let videoHtml = document.getElementById(this.props.videoHtmlId);\n\n    console.log(this.props.previewVideoHtmlId);\n    console.log(previewVideoHtml);\n\n    if (ds.type === \"fromlocal\") {\n      let file = e.target.files[0];\n      previewVideoHtml.src = URL.createObjectURL(file);\n      //   \"http://techslides.com/demos/sample-videos/small.mp4\";\n      // const reader = new FileReader();\n      // reader.onload = (function (aVideo) {\n      //   return function (e) {\n      //     aVideo.src = e.target.result;\n      //   };\n      // })(previewVideoHtml);\n      // reader.readAsDataURL(file);\n    }\n    if (ds.type === \"fromlibrary\") {\n      console.log(e.target.value);\n      if (e.target.value !== \"\") {\n        this.getVideoData(e.target.value);\n      }\n    }\n    if (ds.type === \"fromcamera\") {\n      let width = 640;\n      let height = 480;\n      console.log(width);\n      console.log(height);\n      var htmlinputVideocanvas = document.createElement(\"canvas\");\n      htmlinputVideocanvas.width = width;\n      htmlinputVideocanvas.height = height;\n\n      var context = htmlinputVideocanvas.getContext(\"2d\");\n      context.drawImage(videoHtml, 0, 0, width, height);\n      var data = htmlinputVideocanvas.toDataURL(\"image/png\");\n      previewVideoHtml.setAttribute(\"src\", data);\n    }\n  };\n  getVideoData = async (fileName) => {\n    let previewVideoHtml = document.getElementById(\n      this.props.previewVideoHtmlId\n    );\n    getVideoRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: fileName,\n      pdfpageNumber: 1,\n      htmlId: \"theCanvas\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess === \"true\") {\n          console.log(result.dataprops.imgsrc);\n          previewVideoHtml.src = result.dataprops.imgsrc;\n        } else {\n        }\n      },\n    });\n  };\n\n  editPriviewVideo = (e) => {\n    let previewVideoHtml = document.getElementById(\n      this.props.previewVideoHtmlId\n    );\n\n    console.log(previewVideoHtml.style.transform);\n    console.log(previewVideoHtml.src);\n\n    previewVideoHtml.src = this.rotateBase64Video90deg(\n      previewVideoHtml.src,\n      true\n    );\n    console.log(previewVideoHtml.src);\n  };\n  rotateBase64Video90deg = (base64Video, isClockwise) => {\n    // create an off-screen canvas\n    var offScreenCanvas = document.createElement(\"canvas\");\n    let offScreenCanvasCtx = offScreenCanvas.getContext(\"2d\");\n\n    // cteate Video\n    var video = new window.Video();\n    video.src = base64Video;\n    video.setAttribute(\"crossorigin\", \"anonymous\");\n\n    // set its dimension to rotated size\n    offScreenCanvas.height = video.width;\n    offScreenCanvas.width = video.height;\n\n    // rotate and draw source Video into the off-screen canvas:\n    if (isClockwise) {\n      offScreenCanvasCtx.rotate((90 * Math.PI) / 180);\n      offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\n    } else {\n      offScreenCanvasCtx.rotate((-90 * Math.PI) / 180);\n      offScreenCanvasCtx.translate(-offScreenCanvas.height, 0);\n    }\n    offScreenCanvasCtx.drawImage(video, 0, 0);\n\n    // encode image to data-uri with base64\n    return offScreenCanvas.toDataURL(\"image/jpeg\", 100);\n  };\n\n  render() {\n    let {\n      showFromLocal,\n      showFromLibrary,\n      showFromCamera,\n      libraryOptions,\n      showpreviewVideoPanel,\n    } = this.state;\n    let {\n      radiogroupname,\n\n      previewVideoHtmlId,\n      videoHtmlId,\n    } = this.props;\n    return (\n      <>\n        <div className=\"org-fr org-fai-s  \">\n          <div className=\" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \">\n            <div className=\"org-fr org-fai-c \">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromlocal\"\n                onChange={this.inputVideoradiochange}\n              />\n              Upload file\n            </div>\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromlibrary\"\n                onChange={this.inputVideoradiochange}\n              />\n              Add from Library\n            </div>\n\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromcamera\"\n                onChange={this.inputVideoradiochange}\n              />\n              Camera\n            </div>\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromyoutube\"\n                onChange={this.inputVideoradiochange}\n              />\n              Youtube\n            </div>\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromscreenshare\"\n                onChange={this.inputVideoradiochange}\n              />\n              Screenshare\n            </div>\n          </div>\n          <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n            {/* file upload */}\n            {showFromLocal === true ? (\n              <div>\n                <input\n                  data-type=\"fromlocal\"\n                  type=\"file\"\n                  onChange={this.inputVideoselect}\n                  accept=\"video/*\"\n                />\n              </div>\n            ) : (\n              \"\"\n            )}\n\n            {showFromLibrary === true ? (\n              <div>\n                <select\n                  data-type=\"fromlibrary\"\n                  onChange={this.inputVideoselect}\n                >\n                  <option value=\"\">select a file</option>\n                  {libraryOptions\n                    ? libraryOptions.map((libraryOption) => (\n                        <option value={libraryOption.name}>\n                          {libraryOption.label}\n                        </option>\n                      ))\n                    : \"\"}\n                </select>\n              </div>\n            ) : (\n              \"\"\n            )}\n\n            {showFromCamera === true ? (\n              <div>\n                <div data-type=\"fromcamera\" onClick={this.inputVideoselect}>\n                  take pic\n                </div>\n                <video autoPlay id={videoHtmlId} width=\"100%\"></video>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n          <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n            {showpreviewVideoPanel === true ? (\n              <div className=\"org-fr org-fai-s\" style={{ width: \"100%\" }}>\n                <div className=\"org-fr \">\n                  <div onClick={this.editPriviewVideo}>Rotate</div>\n                  <div onClick={this.editPriviewVideo}>Filter</div>\n                  <div onClick={this.uploadPriviewVideo}>Upload</div>\n                </div>\n\n                <video\n                  width=\"100%\"\n                  id={previewVideoHtmlId}\n                  controls\n                  autoPlay\n                  src=\"http://techslides.com/demos/sample-videos/small.ogv\"\n                ></video>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}