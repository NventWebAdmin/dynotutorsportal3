{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{getImageRecordsStorage,createImageRecordStorage,getImageRecordStorage}from\"../imagestorage/index\";import Svgcomp from\"./modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_React$Component){_inherits(F,_React$Component);var _super=_createSuper(F);function F(props){var _this;_classCallCheck(this,F);_this=_super.call(this,props);_this.uploadPriviewImage=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createImageRecordStorage({folderUrl:_this.props.folderUrl,fileName:_this.props.fileName,filehtmlId:_this.props.previewImageHtmlId,fileEvent:\"\",callback:function callback(result){console.log(result);if(result.isSuccess==\"true\"){// this.getHtmlInputImage({ imghtmlid: \"photo1\" });\n}else{}}});case 2:result=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));_this.inputimageradiochange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(e.target.value==\"fromlocal\"){_this.stopStreamedVideo();_this.setState({showFromLocal:true,showFromLibrary:false,showFromCamera:false,showpreviewImagePanel:true});}if(e.target.value==\"fromlibrary\"){_this.stopStreamedVideo();_this.setState({showFromLocal:false,showFromLibrary:true,showFromCamera:false,showpreviewImagePanel:true});_this.getLibrayData();}if(e.target.value==\"fromcamera\"){//  this.stopStreamedVideo();\n_this.setState({showFromLocal:false,showFromLibrary:false,showFromCamera:true,showpreviewImagePanel:true},function(){navigator.mediaDevices.getUserMedia({video:{width:{exact:640},height:{exact:480}}}).then(function(stream){var videoHtml=document.getElementById(_this.props.previewVideoHtmlId);console.log(stream);videoHtml.srcObject=stream;}).catch(function(err){console.error(\"Error: \",err);});});}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.getLibrayData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getImageRecordsStorage({folderUrl:_this.props.folderUrl,fileName:\"\",pdfpageNumber:\"\",htmlId:\"\",fileEvent:\"\",callback:function callback(result){console.log(result);if(result.isSuccess==\"true\"){console.log(result.dataprops.fileNames);var libraryOptions=[];for(var i in result.dataprops.fileNames){console.log(result.dataprops.fileNames[i]);var fileName=result.dataprops.fileNames[i].name;if(fileName.toLowerCase().includes(\"jpg\")||fileName.toLowerCase().includes(\"png\")||fileName.toLowerCase().includes(\"jpeg\")){libraryOptions.push(result.dataprops.fileNames[i]);}}console.log(libraryOptions);_this.setState({libraryOptions:libraryOptions});}else{}}});case 2:case\"end\":return _context3.stop();}}},_callee3);}));_this.stopStreamedVideo=function(){var videoElem=document.getElementById(_this.props.previewVideoHtmlId);console.log(videoElem);if(videoElem){var stream=videoElem.srcObject;if(stream){var tracks=stream.getTracks();tracks.forEach(function(track){track.stop();});videoElem.srcObject=null;}}};_this.inputimageselect=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var ds,previewImageHtml,videoHtml,file,reader,width,height,htmlinputimagecanvas,context,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(e.target.dataset);console.log(e.target.files);ds=e.target.dataset;//   await this.setState({ showpreviewImagePanel: true });\npreviewImageHtml=document.getElementById(_this.props.previewImageHtmlId);videoHtml=document.getElementById(_this.props.previewVideoHtmlId);console.log(_this.props.previewImageHtmlId);console.log(previewImageHtml);if(ds.type==\"fromlocal\"){console.log(e.target.files);file=e.target.files[0];previewImageHtml.file=file;reader=new FileReader();reader.onload=function(aImg){return function(e){aImg.src=e.target.result;};}(previewImageHtml);reader.readAsDataURL(file);}if(ds.type==\"fromlibrary\"){console.log(e.target.value);if(e.target.value!=\"\"){_this.getImageData(e.target.value);}}if(ds.type==\"fromcamera\"){width=640;height=480;console.log(width);console.log(height);htmlinputimagecanvas=document.createElement(\"canvas\");htmlinputimagecanvas.width=width;htmlinputimagecanvas.height=height;context=htmlinputimagecanvas.getContext(\"2d\");context.drawImage(videoHtml,0,0,width,height);data=htmlinputimagecanvas.toDataURL(\"image/png\");previewImageHtml.setAttribute(\"src\",data);}case 10:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref4.apply(this,arguments);};}();_this.getImageData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(fileName){var previewImageHtml;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:previewImageHtml=document.getElementById(_this.props.previewImageHtmlId);getImageRecordStorage({folderUrl:_this.props.folderUrl,fileName:fileName,pdfpageNumber:1,htmlId:\"theCanvas\",fileEvent:\"\",callback:function callback(result){console.log(result);if(result.isSuccess==\"true\"){console.log(result.dataprops.imgsrc);previewImageHtml.src=result.dataprops.imgsrc;}else{}}});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x3){return _ref5.apply(this,arguments);};}();_this.getImageDataViewPanel=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var imageHtml;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:imageHtml=document.getElementById(_this.props.imageHtmlId);if(_this.props.isInputnotOuptut==\"false\"){getImageRecordStorage({folderUrl:_this.props.folderUrl,fileName:_this.props.fileName,pdfpageNumber:1,htmlId:\"theCanvas\",fileEvent:\"\",callback:function callback(result){console.log(result);if(result.isSuccess==\"true\"){console.log(result.dataprops.imgsrc);imageHtml.src=result.dataprops.imgsrc;}else{}}});}case 2:case\"end\":return _context6.stop();}}},_callee6);}));_this.editPriviewImage=function(e){var previewImageHtml=document.getElementById(_this.props.previewImageHtmlId);console.log(previewImageHtml.style.transform);console.log(previewImageHtml.src);// if (previewImageHtml.style.transform == \"rotate(90deg)\") {\n//   previewImageHtml.style.transform = \"rotate(180deg)\";\n// } else if (previewImageHtml.style.transform == \"rotate(180deg)\") {\n//   previewImageHtml.style.transform = \"rotate(270deg)\";\n// } else if (previewImageHtml.style.transform == \"rotate(270deg)\") {\n//   previewImageHtml.style.transform = \"rotate(360deg)\";\n// } else {\n//   previewImageHtml.style.transform = \"rotate(90deg)\";\n// }\npreviewImageHtml.src=_this.rotateBase64Image90deg(previewImageHtml.src,true);console.log(previewImageHtml.src);};_this.rotateBase64Image90deg=function(base64Image,isClockwise){// create an off-screen canvas\nvar offScreenCanvas=document.createElement(\"canvas\");var offScreenCanvasCtx=offScreenCanvas.getContext(\"2d\");// cteate Image\nvar img=new Image();img.src=base64Image;img.setAttribute(\"crossorigin\",\"anonymous\");// set its dimension to rotated size\noffScreenCanvas.height=img.width;offScreenCanvas.width=img.height;// rotate and draw source image into the off-screen canvas:\nif(isClockwise){offScreenCanvasCtx.rotate(90*Math.PI/180);offScreenCanvasCtx.translate(0,-offScreenCanvas.width);}else{offScreenCanvasCtx.rotate(-90*Math.PI/180);offScreenCanvasCtx.translate(-offScreenCanvas.height,0);}offScreenCanvasCtx.drawImage(img,0,0);// encode image to data-uri with base64\nreturn offScreenCanvas.toDataURL(\"image/jpeg\",100);};_this.showEditImagePanelModal=function(){_this.setState({showEditImagePanelModal:true});};_this.hideEditImagePanelModal=function(){_this.stopStreamedVideo();_this.setState({showEditImagePanelModal:false});};_this.state={showFromLocal:false,showFromLibrary:false,libraryOptions:[],showFromCamera:false,showpreviewImagePanel:false,showEditImagePanel:\"false\",showEditImagePanelModal:false};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function componentDidMount(){this.getImageDataViewPanel();}},{key:\"render\",value:function render(){var _this$state=this.state,showFromLocal=_this$state.showFromLocal,showFromLibrary=_this$state.showFromLibrary,showFromCamera=_this$state.showFromCamera,libraryOptions=_this$state.libraryOptions,showpreviewImagePanel=_this$state.showpreviewImagePanel,showEditImagePanel=_this$state.showEditImagePanel,showEditImagePanelModal=_this$state.showEditImagePanelModal;var _this$props=this.props,radiogroupname=_this$props.radiogroupname,isInputnotOuptut=_this$props.isInputnotOuptut,previewImageHtmlId=_this$props.previewImageHtmlId,imageHtmlId=_this$props.imageHtmlId,previewVideoHtmlId=_this$props.previewVideoHtmlId;console.log(this.props);if(showEditImagePanel==\"true\"){isInputnotOuptut=\"true\";}var modalheadertext=\"Select a value\";var modalbodytext=[];modalbodytext.push(/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-s  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c \",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromlocal\",onChange:this.inputimageradiochange}),\"Upload file\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromlibrary\",onChange:this.inputimageradiochange}),\"Add from Library\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromcamera\",onChange:this.inputimageradiochange}),\"Camera\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",children:[showFromLocal==true?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{\"data-type\":\"fromlocal\",type:\"file\",onChange:this.inputimageselect,accept:\"image/*\"})}):\"\",showFromLibrary==true?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{\"data-type\":\"fromlibrary\",onChange:this.inputimageselect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"select a file\"}),libraryOptions?libraryOptions.map(function(libraryOption){return/*#__PURE__*/_jsx(\"option\",{value:libraryOption.name,children:libraryOption.label});}):\"\"]})}):\"\",showFromCamera==true?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{\"data-type\":\"fromcamera\",onClick:this.inputimageselect,children:\"take pic\"}),/*#__PURE__*/_jsx(\"video\",{autoPlay:true,id:previewVideoHtmlId,width:\"100%\"})]}):\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",children:showpreviewImagePanel==true?/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-s\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr \",children:[/*#__PURE__*/_jsx(\"div\",{onClick:this.editPriviewImage,children:\"Rotate\"}),/*#__PURE__*/_jsx(\"div\",{onClick:this.editPriviewImage,children:\"Filter\"}),/*#__PURE__*/_jsx(\"div\",{onClick:this.uploadPriviewImage,children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"img\",{id:previewImageHtmlId,width:\"100%\"})]}):\"\"})]})}));var modalfooter={};var buttons=[{label:\"Close\",name:\"cancel\",onClick:this.hideEditImagePanelModal}];modalfooter.buttons=buttons;return/*#__PURE__*/_jsxs(_Fragment,{children:[showEditImagePanelModal==true?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Svgcomp,{modalbody:{text:modalbodytext},modalheader:{text:modalheadertext},modalfooter:modalfooter,isModalOpen:\"true\"})}):\"\",isInputnotOuptut==\"true\"?/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-s  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c \",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromlocal\",onChange:this.inputimageradiochange}),\"Upload file\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromlibrary\",onChange:this.inputimageradiochange}),\"Add from Library\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:radiogroupname,value:\"fromcamera\",onChange:this.inputimageradiochange}),\"Camera\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",children:[showFromLocal==true?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{\"data-type\":\"fromlocal\",type:\"file\",onChange:this.inputimageselect,accept:\"image/*\"})}):\"\",showFromLibrary==true?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{\"data-type\":\"fromlibrary\",onChange:this.inputimageselect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"select a file\"}),libraryOptions?libraryOptions.map(function(libraryOption){return/*#__PURE__*/_jsx(\"option\",{value:libraryOption.name,children:libraryOption.label});}):\"\"]})}):\"\",showFromCamera==true?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{\"data-type\":\"fromcamera\",onClick:this.inputimageselect,children:\"take pic\"}),/*#__PURE__*/_jsx(\"video\",{autoPlay:true,id:previewVideoHtmlId,width:\"100%\"})]}):\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",children:showpreviewImagePanel==true?/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-s\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr \",children:[/*#__PURE__*/_jsx(\"div\",{onClick:this.editPriviewImage,children:\"Rotate\"}),/*#__PURE__*/_jsx(\"div\",{onClick:this.editPriviewImage,children:\"Filter\"}),/*#__PURE__*/_jsx(\"div\",{onClick:this.uploadPriviewImage,children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"img\",{id:previewImageHtmlId,width:\"100%\"})]}):\"\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"org-fr org-fai-s  \",children:/*#__PURE__*/_jsx(\"div\",{className:\" org-flexbasis-100p org-mflexbasis-100p org-lflexbasis-100p  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-s\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"org-fr \",children:/*#__PURE__*/_jsx(\"div\",{onClick:this.showEditImagePanelModal,children:\"Edit\"})}),/*#__PURE__*/_jsx(\"img\",{id:imageHtmlId,width:\"100%\"})]})})})]});}}]);return F;}(React.Component);export{F as default};","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/htmlforminputoutputimage.js"],"names":["React","Component","getImageRecordsStorage","createImageRecordStorage","getImageRecordStorage","Svgcomp","F","props","uploadPriviewImage","folderUrl","fileName","filehtmlId","previewImageHtmlId","fileEvent","callback","result","console","log","isSuccess","inputimageradiochange","e","target","value","stopStreamedVideo","setState","showFromLocal","showFromLibrary","showFromCamera","showpreviewImagePanel","getLibrayData","navigator","mediaDevices","getUserMedia","video","width","exact","height","then","stream","videoHtml","document","getElementById","previewVideoHtmlId","srcObject","catch","err","error","pdfpageNumber","htmlId","dataprops","fileNames","libraryOptions","i","name","toLowerCase","includes","push","videoElem","tracks","getTracks","forEach","track","stop","inputimageselect","dataset","files","ds","previewImageHtml","type","file","reader","FileReader","onload","aImg","src","readAsDataURL","getImageData","htmlinputimagecanvas","createElement","context","getContext","drawImage","data","toDataURL","setAttribute","imgsrc","getImageDataViewPanel","imageHtml","imageHtmlId","isInputnotOuptut","editPriviewImage","style","transform","rotateBase64Image90deg","base64Image","isClockwise","offScreenCanvas","offScreenCanvasCtx","img","Image","rotate","Math","PI","translate","showEditImagePanelModal","hideEditImagePanelModal","state","showEditImagePanel","radiogroupname","modalheadertext","modalbodytext","map","libraryOption","label","modalfooter","buttons","onClick","text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  getImageRecordsStorage,\n  createImageRecordStorage,\n  getImageRecordStorage,\n} from \"../imagestorage/index\";\nimport Svgcomp from \"./modal\";\n\nexport default class F extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showFromLocal: false,\n      showFromLibrary: false,\n      libraryOptions: [],\n      showFromCamera: false,\n      showpreviewImagePanel: false,\n      showEditImagePanel: \"false\",\n      showEditImagePanelModal: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getImageDataViewPanel();\n  }\n\n  uploadPriviewImage = async () => {\n    let result = await createImageRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: this.props.fileName,\n      filehtmlId: this.props.previewImageHtmlId,\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess == \"true\") {\n          // this.getHtmlInputImage({ imghtmlid: \"photo1\" });\n        } else {\n        }\n      },\n    });\n  };\n\n  inputimageradiochange = async (e) => {\n    if (e.target.value == \"fromlocal\") {\n      this.stopStreamedVideo();\n      this.setState({\n        showFromLocal: true,\n        showFromLibrary: false,\n        showFromCamera: false,\n        showpreviewImagePanel: true,\n      });\n    }\n    if (e.target.value == \"fromlibrary\") {\n      this.stopStreamedVideo();\n      this.setState({\n        showFromLocal: false,\n        showFromLibrary: true,\n        showFromCamera: false,\n        showpreviewImagePanel: true,\n      });\n      this.getLibrayData();\n    }\n    if (e.target.value == \"fromcamera\") {\n      //  this.stopStreamedVideo();\n      this.setState(\n        {\n          showFromLocal: false,\n          showFromLibrary: false,\n          showFromCamera: true,\n          showpreviewImagePanel: true,\n        },\n        () => {\n          navigator.mediaDevices\n            .getUserMedia({\n              video: { width: { exact: 640 }, height: { exact: 480 } },\n            })\n            .then((stream) => {\n              let videoHtml = document.getElementById(\n                this.props.previewVideoHtmlId\n              );\n              console.log(stream);\n              videoHtml.srcObject = stream;\n            })\n            .catch((err) => {\n              console.error(\"Error: \", err);\n            });\n        }\n      );\n    }\n  };\n\n  getLibrayData = async () => {\n    await getImageRecordsStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: \"\",\n      pdfpageNumber: \"\",\n      htmlId: \"\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess == \"true\") {\n          console.log(result.dataprops.fileNames);\n          let libraryOptions = [];\n          for (let i in result.dataprops.fileNames) {\n            console.log(result.dataprops.fileNames[i]);\n            let fileName = result.dataprops.fileNames[i].name;\n            if (\n              fileName.toLowerCase().includes(\"jpg\") ||\n              fileName.toLowerCase().includes(\"png\") ||\n              fileName.toLowerCase().includes(\"jpeg\")\n            ) {\n              libraryOptions.push(result.dataprops.fileNames[i]);\n            }\n          }\n          console.log(libraryOptions);\n          this.setState({ libraryOptions: libraryOptions });\n        } else {\n        }\n      },\n    });\n  };\n  stopStreamedVideo = () => {\n    let videoElem = document.getElementById(this.props.previewVideoHtmlId);\n    console.log(videoElem);\n    if (videoElem) {\n      const stream = videoElem.srcObject;\n      if (stream) {\n        const tracks = stream.getTracks();\n        tracks.forEach(function (track) {\n          track.stop();\n        });\n        videoElem.srcObject = null;\n      }\n    }\n  };\n\n  inputimageselect = async (e) => {\n    console.log(e.target.dataset);\n\n    console.log(e.target.files);\n\n    let ds = e.target.dataset;\n    //   await this.setState({ showpreviewImagePanel: true });\n    let previewImageHtml = document.getElementById(\n      this.props.previewImageHtmlId\n    );\n    let videoHtml = document.getElementById(this.props.previewVideoHtmlId);\n\n    console.log(this.props.previewImageHtmlId);\n    console.log(previewImageHtml);\n\n    if (ds.type == \"fromlocal\") {\n      console.log(e.target.files);\n      let file = e.target.files[0];\n      previewImageHtml.file = file;\n      const reader = new FileReader();\n      reader.onload = (function (aImg) {\n        return function (e) {\n          aImg.src = e.target.result;\n        };\n      })(previewImageHtml);\n      reader.readAsDataURL(file);\n    }\n    if (ds.type == \"fromlibrary\") {\n      console.log(e.target.value);\n      if (e.target.value != \"\") {\n        this.getImageData(e.target.value);\n      }\n    }\n    if (ds.type == \"fromcamera\") {\n      let width = 640;\n      let height = 480;\n      console.log(width);\n      console.log(height);\n      var htmlinputimagecanvas = document.createElement(\"canvas\");\n      htmlinputimagecanvas.width = width;\n      htmlinputimagecanvas.height = height;\n\n      var context = htmlinputimagecanvas.getContext(\"2d\");\n      context.drawImage(videoHtml, 0, 0, width, height);\n      var data = htmlinputimagecanvas.toDataURL(\"image/png\");\n      previewImageHtml.setAttribute(\"src\", data);\n    }\n  };\n  getImageData = async (fileName) => {\n    let previewImageHtml = document.getElementById(\n      this.props.previewImageHtmlId\n    );\n    getImageRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: fileName,\n      pdfpageNumber: 1,\n      htmlId: \"theCanvas\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess == \"true\") {\n          console.log(result.dataprops.imgsrc);\n          previewImageHtml.src = result.dataprops.imgsrc;\n        } else {\n        }\n      },\n    });\n  };\n  getImageDataViewPanel = async () => {\n    let imageHtml = document.getElementById(this.props.imageHtmlId);\n    if (this.props.isInputnotOuptut == \"false\") {\n      getImageRecordStorage({\n        folderUrl: this.props.folderUrl,\n        fileName: this.props.fileName,\n        pdfpageNumber: 1,\n        htmlId: \"theCanvas\",\n        fileEvent: \"\",\n        callback: (result) => {\n          console.log(result);\n          if (result.isSuccess == \"true\") {\n            console.log(result.dataprops.imgsrc);\n            imageHtml.src = result.dataprops.imgsrc;\n          } else {\n          }\n        },\n      });\n    }\n  };\n\n  editPriviewImage = (e) => {\n    let previewImageHtml = document.getElementById(\n      this.props.previewImageHtmlId\n    );\n\n    console.log(previewImageHtml.style.transform);\n    console.log(previewImageHtml.src);\n\n    // if (previewImageHtml.style.transform == \"rotate(90deg)\") {\n    //   previewImageHtml.style.transform = \"rotate(180deg)\";\n    // } else if (previewImageHtml.style.transform == \"rotate(180deg)\") {\n    //   previewImageHtml.style.transform = \"rotate(270deg)\";\n    // } else if (previewImageHtml.style.transform == \"rotate(270deg)\") {\n    //   previewImageHtml.style.transform = \"rotate(360deg)\";\n    // } else {\n    //   previewImageHtml.style.transform = \"rotate(90deg)\";\n    // }\n\n    previewImageHtml.src = this.rotateBase64Image90deg(\n      previewImageHtml.src,\n      true\n    );\n    console.log(previewImageHtml.src);\n  };\n  rotateBase64Image90deg = (base64Image, isClockwise) => {\n    // create an off-screen canvas\n    var offScreenCanvas = document.createElement(\"canvas\");\n    let offScreenCanvasCtx = offScreenCanvas.getContext(\"2d\");\n\n    // cteate Image\n    var img = new Image();\n    img.src = base64Image;\n    img.setAttribute(\"crossorigin\", \"anonymous\");\n\n    // set its dimension to rotated size\n    offScreenCanvas.height = img.width;\n    offScreenCanvas.width = img.height;\n\n    // rotate and draw source image into the off-screen canvas:\n    if (isClockwise) {\n      offScreenCanvasCtx.rotate((90 * Math.PI) / 180);\n      offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\n    } else {\n      offScreenCanvasCtx.rotate((-90 * Math.PI) / 180);\n      offScreenCanvasCtx.translate(-offScreenCanvas.height, 0);\n    }\n    offScreenCanvasCtx.drawImage(img, 0, 0);\n\n    // encode image to data-uri with base64\n    return offScreenCanvas.toDataURL(\"image/jpeg\", 100);\n  };\n\n  showEditImagePanelModal = () => {\n    this.setState({ showEditImagePanelModal: true });\n  };\n  hideEditImagePanelModal = () => {\n    this.stopStreamedVideo();\n    this.setState({ showEditImagePanelModal: false });\n  };\n\n  render() {\n    let {\n      showFromLocal,\n      showFromLibrary,\n      showFromCamera,\n      libraryOptions,\n      showpreviewImagePanel,\n      showEditImagePanel,\n      showEditImagePanelModal,\n    } = this.state;\n    let {\n      radiogroupname,\n      isInputnotOuptut,\n      previewImageHtmlId,\n      imageHtmlId,\n      previewVideoHtmlId,\n    } = this.props;\n    console.log(this.props);\n    if (showEditImagePanel == \"true\") {\n      isInputnotOuptut = \"true\";\n    }\n\n    let modalheadertext = \"Select a value\";\n    let modalbodytext = [];\n\n    modalbodytext.push(\n      <>\n        <div className=\"org-fr org-fai-s  \">\n          <div className=\" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \">\n            <div className=\"org-fr org-fai-c \">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromlocal\"\n                onChange={this.inputimageradiochange}\n              />\n              Upload file\n            </div>\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromlibrary\"\n                onChange={this.inputimageradiochange}\n              />\n              Add from Library\n            </div>\n\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromcamera\"\n                onChange={this.inputimageradiochange}\n              />\n              Camera\n            </div>\n          </div>\n          <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n            {/* file upload */}\n            {showFromLocal == true ? (\n              <div>\n                <input\n                  data-type=\"fromlocal\"\n                  type=\"file\"\n                  onChange={this.inputimageselect}\n                  accept=\"image/*\"\n                />\n              </div>\n            ) : (\n              \"\"\n            )}\n\n            {showFromLibrary == true ? (\n              <div>\n                <select\n                  data-type=\"fromlibrary\"\n                  onChange={this.inputimageselect}\n                >\n                  <option value=\"\">select a file</option>\n                  {libraryOptions\n                    ? libraryOptions.map((libraryOption) => (\n                        <option value={libraryOption.name}>\n                          {libraryOption.label}\n                        </option>\n                      ))\n                    : \"\"}\n                </select>\n              </div>\n            ) : (\n              \"\"\n            )}\n\n            {showFromCamera == true ? (\n              <div>\n                <div data-type=\"fromcamera\" onClick={this.inputimageselect}>\n                  take pic\n                </div>\n                <video autoPlay id={previewVideoHtmlId} width=\"100%\"></video>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n          <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n            {showpreviewImagePanel == true ? (\n              <div className=\"org-fr org-fai-s\" style={{ width: \"100%\" }}>\n                <div className=\"org-fr \">\n                  <div onClick={this.editPriviewImage}>Rotate</div>\n                  <div onClick={this.editPriviewImage}>Filter</div>\n                  <div onClick={this.uploadPriviewImage}>Upload</div>\n                </div>\n                <img id={previewImageHtmlId} width=\"100%\"></img>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n      </>\n    );\n\n    let modalfooter = {};\n    let buttons = [\n      {\n        label: \"Close\",\n        name: \"cancel\",\n        onClick: this.hideEditImagePanelModal,\n      },\n    ];\n    modalfooter.buttons = buttons;\n\n    return (\n      <>\n        {showEditImagePanelModal == true ? (\n          <>\n            <Svgcomp\n              modalbody={{ text: modalbodytext }}\n              modalheader={{ text: modalheadertext }}\n              modalfooter={modalfooter}\n              isModalOpen=\"true\"\n            />\n          </>\n        ) : (\n          \"\"\n        )}\n        {isInputnotOuptut == \"true\" ? (\n          <div className=\"org-fr org-fai-s  \">\n            <div className=\" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \">\n              <div className=\"org-fr org-fai-c \">\n                <input\n                  type=\"radio\"\n                  name={radiogroupname}\n                  value=\"fromlocal\"\n                  onChange={this.inputimageradiochange}\n                />\n                Upload file\n              </div>\n              <div className=\"org-fr org-fai-c\">\n                <input\n                  type=\"radio\"\n                  name={radiogroupname}\n                  value=\"fromlibrary\"\n                  onChange={this.inputimageradiochange}\n                />\n                Add from Library\n              </div>\n\n              <div className=\"org-fr org-fai-c\">\n                <input\n                  type=\"radio\"\n                  name={radiogroupname}\n                  value=\"fromcamera\"\n                  onChange={this.inputimageradiochange}\n                />\n                Camera\n              </div>\n            </div>\n            <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n              {/* file upload */}\n              {showFromLocal == true ? (\n                <div>\n                  <input\n                    data-type=\"fromlocal\"\n                    type=\"file\"\n                    onChange={this.inputimageselect}\n                    accept=\"image/*\"\n                  />\n                </div>\n              ) : (\n                \"\"\n              )}\n\n              {showFromLibrary == true ? (\n                <div>\n                  <select\n                    data-type=\"fromlibrary\"\n                    onChange={this.inputimageselect}\n                  >\n                    <option value=\"\">select a file</option>\n                    {libraryOptions\n                      ? libraryOptions.map((libraryOption) => (\n                          <option value={libraryOption.name}>\n                            {libraryOption.label}\n                          </option>\n                        ))\n                      : \"\"}\n                  </select>\n                </div>\n              ) : (\n                \"\"\n              )}\n\n              {showFromCamera == true ? (\n                <div>\n                  <div data-type=\"fromcamera\" onClick={this.inputimageselect}>\n                    take pic\n                  </div>\n                  <video autoPlay id={previewVideoHtmlId} width=\"100%\"></video>\n                </div>\n              ) : (\n                \"\"\n              )}\n            </div>\n            <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n              {showpreviewImagePanel == true ? (\n                <div className=\"org-fr org-fai-s\" style={{ width: \"100%\" }}>\n                  <div className=\"org-fr \">\n                    <div onClick={this.editPriviewImage}>Rotate</div>\n                    <div onClick={this.editPriviewImage}>Filter</div>\n                    <div onClick={this.uploadPriviewImage}>Upload</div>\n                  </div>\n                  <img id={previewImageHtmlId} width=\"100%\"></img>\n                </div>\n              ) : (\n                \"\"\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"org-fr org-fai-s  \">\n            <div className=\" org-flexbasis-100p org-mflexbasis-100p org-lflexbasis-100p  \">\n              <div className=\"org-fr org-fai-s\" style={{ width: \"100%\" }}>\n                <div className=\"org-fr \">\n                  <div onClick={this.showEditImagePanelModal}>Edit</div>\n                </div>\n                <img id={imageHtmlId} width=\"100%\"></img>\n              </div>\n            </div>\n          </div>\n        )}\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}