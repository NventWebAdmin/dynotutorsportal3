{"ast":null,"code":"var _jsxFileName = \"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/htmlforminputoutputvideo.js\";\nimport React from \"react\";\nimport { getVideoRecordsStorage, createVideoRecordStorage, getVideoRecordStorage } from \"../videostorage/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class F extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.uploadPriviewVideo = async e => {\n      let result = await createVideoRecordStorage({\n        folderUrl: this.props.folderUrl,\n        fileName: this.props.fileName,\n        filehtmlId: \"\",\n        fileEvent: e,\n        callback: result => {\n          console.log(result);\n\n          if (result.isSuccess === \"true\") {// this.getHtmlInputVideo({ Videohtmlid: \"photo1\" });\n          } else {}\n        }\n      });\n      console.log(result);\n    };\n\n    this.inputVideoradiochange = async e => {\n      if (e.target.value === \"fromlocal\") {\n        this.stopStreamedVideo();\n        this.setState({\n          showFromLocal: true,\n          showFromLibrary: false,\n          showFromCamera: false,\n          showpreviewVideoPanel: true\n        });\n      }\n\n      if (e.target.value === \"fromlibrary\") {\n        this.stopStreamedVideo();\n        this.setState({\n          showFromLocal: false,\n          showFromLibrary: true,\n          showFromCamera: false,\n          showpreviewVideoPanel: true\n        });\n        this.getLibrayData();\n      }\n\n      if (e.target.value === \"fromcamera\") {\n        this.stopStreamedVideo();\n        await this.setState({\n          showFromLocal: false,\n          showFromLibrary: false,\n          showFromCamera: true,\n          showpreviewVideoPanel: true\n        });\n        navigator.mediaDevices.getUserMedia({\n          video: {\n            width: {\n              exact: 640\n            },\n            height: {\n              exact: 480\n            }\n          }\n        }).then(stream => {\n          let videoHtml = document.getElementById(this.props.videoHtmlId);\n          console.log(stream);\n          videoHtml.srcObject = stream;\n        }).catch(err => {\n          console.error(\"Error: \", err);\n        });\n      }\n    };\n\n    this.getLibrayData = async () => {\n      await getVideoRecordsStorage({\n        folderUrl: this.props.folderUrl,\n        fileName: \"\",\n        pdfpageNumber: \"\",\n        htmlId: \"\",\n        fileEvent: \"\",\n        callback: result => {\n          console.log(result);\n\n          if (result.isSuccess === \"true\") {\n            console.log(result.dataprops.fileNames);\n            let libraryOptions = [];\n\n            for (let i in result.dataprops.fileNames) {\n              console.log(result.dataprops.fileNames[i]);\n              let fileName = result.dataprops.fileNames[i].name;\n\n              if (fileName.toLowerCase().includes(\"webm\") || fileName.toLowerCase().includes(\"flv\") || fileName.toLowerCase().includes(\"mpg\") || fileName.toLowerCase().includes(\"mpeg\") || fileName.toLowerCase().includes(\"3gp\") || fileName.toLowerCase().includes(\"flv\") || fileName.toLowerCase().includes(\"mp4\")) {\n                libraryOptions.push(result.dataprops.fileNames[i]);\n              }\n            }\n\n            console.log(libraryOptions);\n            this.setState({\n              libraryOptions: libraryOptions\n            });\n          } else {}\n        }\n      });\n    };\n\n    this.stopStreamedVideo = () => {\n      let videoElem = document.getElementById(this.props.videoHtmlId);\n      console.log(videoElem);\n\n      if (videoElem) {\n        const stream = videoElem.srcObject;\n\n        if (stream) {\n          const tracks = stream.getTracks();\n          tracks.forEach(function (track) {\n            track.stop();\n          });\n          videoElem.srcObject = null;\n        }\n      }\n    };\n\n    this.inputVideoselect = async e => {\n      console.log(e.target.dataset);\n      this.uploadPriviewVideo(e);\n      let ds = e.target.dataset; //   await this.setState({ showpreviewVideoPanel: true });\n\n      let previewVideoHtml = document.getElementById(this.props.previewVideoHtmlId);\n      let videoHtml = document.getElementById(this.props.videoHtmlId);\n      console.log(this.props.previewVideoHtmlId);\n      console.log(previewVideoHtml);\n\n      if (ds.type === \"fromlocal\") {\n        let file = e.target.files[0];\n        previewVideoHtml.src = URL.createObjectURL(file); //   \"http://techslides.com/demos/sample-videos/small.mp4\";\n        // const reader = new FileReader();\n        // reader.onload = (function (aVideo) {\n        //   return function (e) {\n        //     aVideo.src = e.target.result;\n        //   };\n        // })(previewVideoHtml);\n        // reader.readAsDataURL(file);\n      }\n\n      if (ds.type === \"fromlibrary\") {\n        console.log(e.target.value);\n\n        if (e.target.value != \"\") {\n          this.getVideoData(e.target.value);\n        }\n      }\n\n      if (ds.type === \"fromcamera\") {\n        let width = 640;\n        let height = 480;\n        console.log(width);\n        console.log(height);\n        var htmlinputVideocanvas = document.createElement(\"canvas\");\n        htmlinputVideocanvas.width = width;\n        htmlinputVideocanvas.height = height;\n        var context = htmlinputVideocanvas.getContext(\"2d\");\n        context.drawImage(videoHtml, 0, 0, width, height);\n        var data = htmlinputVideocanvas.toDataURL(\"image/png\");\n        previewVideoHtml.setAttribute(\"src\", data);\n      }\n    };\n\n    this.getVideoData = async fileName => {\n      let previewVideoHtml = document.getElementById(this.props.previewVideoHtmlId);\n      getVideoRecordStorage({\n        folderUrl: this.props.folderUrl,\n        fileName: fileName,\n        pdfpageNumber: 1,\n        htmlId: \"theCanvas\",\n        fileEvent: \"\",\n        callback: result => {\n          console.log(result);\n\n          if (result.isSuccess === \"true\") {\n            console.log(result.dataprops.imgsrc);\n            previewVideoHtml.src = result.dataprops.imgsrc;\n          } else {}\n        }\n      });\n    };\n\n    this.editPriviewVideo = e => {\n      let previewVideoHtml = document.getElementById(this.props.previewVideoHtmlId);\n      console.log(previewVideoHtml.style.transform);\n      console.log(previewVideoHtml.src);\n      previewVideoHtml.src = this.rotateBase64Video90deg(previewVideoHtml.src, true);\n      console.log(previewVideoHtml.src);\n    };\n\n    this.rotateBase64Video90deg = (base64Video, isClockwise) => {\n      // create an off-screen canvas\n      var offScreenCanvas = document.createElement(\"canvas\");\n      let offScreenCanvasCtx = offScreenCanvas.getContext(\"2d\"); // cteate Video\n\n      var video = new window.Video();\n      video.src = base64Video;\n      video.setAttribute(\"crossorigin\", \"anonymous\"); // set its dimension to rotated size\n\n      offScreenCanvas.height = video.width;\n      offScreenCanvas.width = video.height; // rotate and draw source Video into the off-screen canvas:\n\n      if (isClockwise) {\n        offScreenCanvasCtx.rotate(90 * Math.PI / 180);\n        offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\n      } else {\n        offScreenCanvasCtx.rotate(-90 * Math.PI / 180);\n        offScreenCanvasCtx.translate(-offScreenCanvas.height, 0);\n      }\n\n      offScreenCanvasCtx.drawImage(video, 0, 0); // encode image to data-uri with base64\n\n      return offScreenCanvas.toDataURL(\"image/jpeg\", 100);\n    };\n\n    this.state = {\n      showFromLocal: false,\n      showFromLibrary: false,\n      libraryOptions: [],\n      showFromCamera: false,\n      showpreviewVideoPanel: false\n    };\n  }\n\n  componentDidMount() {\n    getVideoRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: \"test (2).webm\",\n      pdfpageNumber: 1,\n      htmlId: \"theCanvas\",\n      fileEvent: \"\",\n      callback: result => {\n        console.log(result);\n      }\n    });\n  }\n\n  render() {\n    let {\n      showFromLocal,\n      showFromLibrary,\n      showFromCamera,\n      libraryOptions,\n      showpreviewVideoPanel\n    } = this.state;\n    let {\n      radiogroupname,\n      previewVideoHtmlId,\n      videoHtmlId\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-fr org-fai-s  \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"org-fr org-fai-c \",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: radiogroupname,\n              value: \"fromlocal\",\n              onChange: this.inputVideoradiochange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), \"Upload file\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"org-fr org-fai-c\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: radiogroupname,\n              value: \"fromlibrary\",\n              onChange: this.inputVideoradiochange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), \"Add from Library\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"org-fr org-fai-c\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: radiogroupname,\n              value: \"fromcamera\",\n              onChange: this.inputVideoradiochange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), \"Camera\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"org-fr org-fai-c\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: radiogroupname,\n              value: \"fromyoutube\",\n              onChange: this.inputVideoradiochange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), \"Youtube\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"org-fr org-fai-c\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: radiogroupname,\n              value: \"fromscreenshare\",\n              onChange: this.inputVideoradiochange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), \"Screenshare\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",\n          children: [showFromLocal === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              \"data-type\": \"fromlocal\",\n              type: \"file\",\n              onChange: this.inputVideoselect,\n              accept: \"video/*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this) : \"\", showFromLibrary === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              \"data-type\": \"fromlibrary\",\n              onChange: this.inputVideoselect,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"select a file\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 19\n              }, this), libraryOptions ? libraryOptions.map(libraryOption => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: libraryOption.name,\n                children: libraryOption.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 25\n              }, this)) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this) : \"\", showFromCamera === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              \"data-type\": \"fromcamera\",\n              onClick: this.inputVideoselect,\n              children: \"take pic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n              autoPlay: true,\n              id: videoHtmlId,\n              width: \"100%\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this) : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \",\n          children: showpreviewVideoPanel === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"org-fr org-fai-s\",\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"org-fr \",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: this.editPriviewVideo,\n                children: \"Rotate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: this.editPriviewVideo,\n                children: \"Filter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: this.uploadPriviewVideo,\n                children: \"Upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n              width: \"100%\",\n              id: previewVideoHtmlId,\n              controls: true,\n              autoPlay: true,\n              src: \"http://techslides.com/demos/sample-videos/small.ogv\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this) : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/htmlforminputoutputvideo.js"],"names":["React","getVideoRecordsStorage","createVideoRecordStorage","getVideoRecordStorage","F","Component","constructor","props","uploadPriviewVideo","e","result","folderUrl","fileName","filehtmlId","fileEvent","callback","console","log","isSuccess","inputVideoradiochange","target","value","stopStreamedVideo","setState","showFromLocal","showFromLibrary","showFromCamera","showpreviewVideoPanel","getLibrayData","navigator","mediaDevices","getUserMedia","video","width","exact","height","then","stream","videoHtml","document","getElementById","videoHtmlId","srcObject","catch","err","error","pdfpageNumber","htmlId","dataprops","fileNames","libraryOptions","i","name","toLowerCase","includes","push","videoElem","tracks","getTracks","forEach","track","stop","inputVideoselect","dataset","ds","previewVideoHtml","previewVideoHtmlId","type","file","files","src","URL","createObjectURL","getVideoData","htmlinputVideocanvas","createElement","context","getContext","drawImage","data","toDataURL","setAttribute","imgsrc","editPriviewVideo","style","transform","rotateBase64Video90deg","base64Video","isClockwise","offScreenCanvas","offScreenCanvasCtx","window","Video","rotate","Math","PI","translate","state","componentDidMount","render","radiogroupname","map","libraryOption","label"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  getVideoRecordsStorage,\n  createVideoRecordStorage,\n  getVideoRecordStorage,\n} from \"../videostorage/index\";\n\nexport default class F extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showFromLocal: false,\n      showFromLibrary: false,\n      libraryOptions: [],\n      showFromCamera: false,\n      showpreviewVideoPanel: false,\n    };\n  }\n\n  componentDidMount() {\n    getVideoRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: \"test (2).webm\",\n      pdfpageNumber: 1,\n      htmlId: \"theCanvas\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n      },\n    });\n  }\n\n  uploadPriviewVideo = async (e) => {\n    let result = await createVideoRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: this.props.fileName,\n      filehtmlId: \"\",\n      fileEvent: e,\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess === \"true\") {\n          // this.getHtmlInputVideo({ Videohtmlid: \"photo1\" });\n        } else {\n        }\n      },\n    });\n    console.log(result);\n  };\n\n  inputVideoradiochange = async (e) => {\n    if (e.target.value === \"fromlocal\") {\n      this.stopStreamedVideo();\n      this.setState({\n        showFromLocal: true,\n        showFromLibrary: false,\n        showFromCamera: false,\n        showpreviewVideoPanel: true,\n      });\n    }\n    if (e.target.value === \"fromlibrary\") {\n      this.stopStreamedVideo();\n      this.setState({\n        showFromLocal: false,\n        showFromLibrary: true,\n        showFromCamera: false,\n        showpreviewVideoPanel: true,\n      });\n      this.getLibrayData();\n    }\n    if (e.target.value === \"fromcamera\") {\n      this.stopStreamedVideo();\n      await this.setState({\n        showFromLocal: false,\n        showFromLibrary: false,\n        showFromCamera: true,\n        showpreviewVideoPanel: true,\n      });\n      navigator.mediaDevices\n        .getUserMedia({\n          video: { width: { exact: 640 }, height: { exact: 480 } },\n        })\n        .then((stream) => {\n          let videoHtml = document.getElementById(this.props.videoHtmlId);\n          console.log(stream);\n          videoHtml.srcObject = stream;\n        })\n        .catch((err) => {\n          console.error(\"Error: \", err);\n        });\n    }\n  };\n\n  getLibrayData = async () => {\n    await getVideoRecordsStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: \"\",\n      pdfpageNumber: \"\",\n      htmlId: \"\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess === \"true\") {\n          console.log(result.dataprops.fileNames);\n          let libraryOptions = [];\n          for (let i in result.dataprops.fileNames) {\n            console.log(result.dataprops.fileNames[i]);\n            let fileName = result.dataprops.fileNames[i].name;\n            if (\n              fileName.toLowerCase().includes(\"webm\") ||\n              fileName.toLowerCase().includes(\"flv\") ||\n              fileName.toLowerCase().includes(\"mpg\") ||\n              fileName.toLowerCase().includes(\"mpeg\") ||\n              fileName.toLowerCase().includes(\"3gp\") ||\n              fileName.toLowerCase().includes(\"flv\") ||\n              fileName.toLowerCase().includes(\"mp4\")\n            ) {\n              libraryOptions.push(result.dataprops.fileNames[i]);\n            }\n          }\n          console.log(libraryOptions);\n          this.setState({ libraryOptions: libraryOptions });\n        } else {\n        }\n      },\n    });\n  };\n  stopStreamedVideo = () => {\n    let videoElem = document.getElementById(this.props.videoHtmlId);\n    console.log(videoElem);\n    if (videoElem) {\n      const stream = videoElem.srcObject;\n      if (stream) {\n        const tracks = stream.getTracks();\n        tracks.forEach(function (track) {\n          track.stop();\n        });\n        videoElem.srcObject = null;\n      }\n    }\n  };\n\n  inputVideoselect = async (e) => {\n    console.log(e.target.dataset);\n    this.uploadPriviewVideo(e);\n    let ds = e.target.dataset;\n    //   await this.setState({ showpreviewVideoPanel: true });\n    let previewVideoHtml = document.getElementById(\n      this.props.previewVideoHtmlId\n    );\n    let videoHtml = document.getElementById(this.props.videoHtmlId);\n\n    console.log(this.props.previewVideoHtmlId);\n    console.log(previewVideoHtml);\n\n    if (ds.type === \"fromlocal\") {\n      let file = e.target.files[0];\n      previewVideoHtml.src = URL.createObjectURL(file);\n      //   \"http://techslides.com/demos/sample-videos/small.mp4\";\n      // const reader = new FileReader();\n      // reader.onload = (function (aVideo) {\n      //   return function (e) {\n      //     aVideo.src = e.target.result;\n      //   };\n      // })(previewVideoHtml);\n      // reader.readAsDataURL(file);\n    }\n    if (ds.type === \"fromlibrary\") {\n      console.log(e.target.value);\n      if (e.target.value != \"\") {\n        this.getVideoData(e.target.value);\n      }\n    }\n    if (ds.type === \"fromcamera\") {\n      let width = 640;\n      let height = 480;\n      console.log(width);\n      console.log(height);\n      var htmlinputVideocanvas = document.createElement(\"canvas\");\n      htmlinputVideocanvas.width = width;\n      htmlinputVideocanvas.height = height;\n\n      var context = htmlinputVideocanvas.getContext(\"2d\");\n      context.drawImage(videoHtml, 0, 0, width, height);\n      var data = htmlinputVideocanvas.toDataURL(\"image/png\");\n      previewVideoHtml.setAttribute(\"src\", data);\n    }\n  };\n  getVideoData = async (fileName) => {\n    let previewVideoHtml = document.getElementById(\n      this.props.previewVideoHtmlId\n    );\n    getVideoRecordStorage({\n      folderUrl: this.props.folderUrl,\n      fileName: fileName,\n      pdfpageNumber: 1,\n      htmlId: \"theCanvas\",\n      fileEvent: \"\",\n      callback: (result) => {\n        console.log(result);\n        if (result.isSuccess === \"true\") {\n          console.log(result.dataprops.imgsrc);\n          previewVideoHtml.src = result.dataprops.imgsrc;\n        } else {\n        }\n      },\n    });\n  };\n\n  editPriviewVideo = (e) => {\n    let previewVideoHtml = document.getElementById(\n      this.props.previewVideoHtmlId\n    );\n\n    console.log(previewVideoHtml.style.transform);\n    console.log(previewVideoHtml.src);\n\n    previewVideoHtml.src = this.rotateBase64Video90deg(\n      previewVideoHtml.src,\n      true\n    );\n    console.log(previewVideoHtml.src);\n  };\n  rotateBase64Video90deg = (base64Video, isClockwise) => {\n    // create an off-screen canvas\n    var offScreenCanvas = document.createElement(\"canvas\");\n    let offScreenCanvasCtx = offScreenCanvas.getContext(\"2d\");\n\n    // cteate Video\n    var video = new window.Video();\n    video.src = base64Video;\n    video.setAttribute(\"crossorigin\", \"anonymous\");\n\n    // set its dimension to rotated size\n    offScreenCanvas.height = video.width;\n    offScreenCanvas.width = video.height;\n\n    // rotate and draw source Video into the off-screen canvas:\n    if (isClockwise) {\n      offScreenCanvasCtx.rotate((90 * Math.PI) / 180);\n      offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\n    } else {\n      offScreenCanvasCtx.rotate((-90 * Math.PI) / 180);\n      offScreenCanvasCtx.translate(-offScreenCanvas.height, 0);\n    }\n    offScreenCanvasCtx.drawImage(video, 0, 0);\n\n    // encode image to data-uri with base64\n    return offScreenCanvas.toDataURL(\"image/jpeg\", 100);\n  };\n\n  render() {\n    let {\n      showFromLocal,\n      showFromLibrary,\n      showFromCamera,\n      libraryOptions,\n      showpreviewVideoPanel,\n    } = this.state;\n    let {\n      radiogroupname,\n\n      previewVideoHtmlId,\n      videoHtmlId,\n    } = this.props;\n    return (\n      <>\n        <div className=\"org-fr org-fai-s  \">\n          <div className=\" org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p  \">\n            <div className=\"org-fr org-fai-c \">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromlocal\"\n                onChange={this.inputVideoradiochange}\n              />\n              Upload file\n            </div>\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromlibrary\"\n                onChange={this.inputVideoradiochange}\n              />\n              Add from Library\n            </div>\n\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromcamera\"\n                onChange={this.inputVideoradiochange}\n              />\n              Camera\n            </div>\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromyoutube\"\n                onChange={this.inputVideoradiochange}\n              />\n              Youtube\n            </div>\n            <div className=\"org-fr org-fai-c\">\n              <input\n                type=\"radio\"\n                name={radiogroupname}\n                value=\"fromscreenshare\"\n                onChange={this.inputVideoradiochange}\n              />\n              Screenshare\n            </div>\n          </div>\n          <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n            {/* file upload */}\n            {showFromLocal === true ? (\n              <div>\n                <input\n                  data-type=\"fromlocal\"\n                  type=\"file\"\n                  onChange={this.inputVideoselect}\n                  accept=\"video/*\"\n                />\n              </div>\n            ) : (\n              \"\"\n            )}\n\n            {showFromLibrary === true ? (\n              <div>\n                <select\n                  data-type=\"fromlibrary\"\n                  onChange={this.inputVideoselect}\n                >\n                  <option value=\"\">select a file</option>\n                  {libraryOptions\n                    ? libraryOptions.map((libraryOption) => (\n                        <option value={libraryOption.name}>\n                          {libraryOption.label}\n                        </option>\n                      ))\n                    : \"\"}\n                </select>\n              </div>\n            ) : (\n              \"\"\n            )}\n\n            {showFromCamera === true ? (\n              <div>\n                <div data-type=\"fromcamera\" onClick={this.inputVideoselect}>\n                  take pic\n                </div>\n                <video autoPlay id={videoHtmlId} width=\"100%\"></video>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n          <div className=\" org-flexbasis-100p org-mflexbasis-40p org-lflexbasis-40p  \">\n            {showpreviewVideoPanel === true ? (\n              <div className=\"org-fr org-fai-s\" style={{ width: \"100%\" }}>\n                <div className=\"org-fr \">\n                  <div onClick={this.editPriviewVideo}>Rotate</div>\n                  <div onClick={this.editPriviewVideo}>Filter</div>\n                  <div onClick={this.uploadPriviewVideo}>Upload</div>\n                </div>\n\n                <video\n                  width=\"100%\"\n                  id={previewVideoHtmlId}\n                  controls\n                  autoPlay\n                  src=\"http://techslides.com/demos/sample-videos/small.ogv\"\n                ></video>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}