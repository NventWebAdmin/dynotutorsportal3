{"ast":null,"code":"import _objectSpread from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{getRecorddata,createRecord,bulkcreateRecord}from\"../db/index\";import{GetLocalIcon,GetGoogleIcon}from\"./icons\";import Mailnewaction from\"./mailnewaction\";import Mailviewaction from\"./mailviewaction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_Component){_inherits(F,_Component);var _super=_createSuper(F);function F(_props){var _this;_classCallCheck(this,F);_this=_super.call(this,_props);_this.componentDidUpdate=function(prevProps){var _this$state=_this.state,isConnectedtoWebsocketServer=_this$state.isConnectedtoWebsocketServer,currentuserid=_this$state.currentuserid,serverMessage=_this$state.serverMessage,serverMessageArray=_this$state.serverMessageArray;var newlocalParentProps=_this.props.localParentProps;console.log(newlocalParentProps);if(JSON.stringify(serverMessage)!=JSON.stringify(newlocalParentProps.serverMessage)){console.log(JSON.stringify(serverMessage));console.log(JSON.stringify(newlocalParentProps.serverMessage));serverMessageArray.push(newlocalParentProps.serverMessage);alert();_this.setState({serverMessage:newlocalParentProps.serverMessage,serverMessageArray:serverMessageArray});}};_this.backHandler=function(){_this.setState({compType:\"list\"});};_this.onmailsent=function(props){var msgObj=props.msgObj;console.log(msgObj);msgObj.utilityname=\"mail\";_this.props.localParentMethod({methodname:\"openwebsocketconnection\",props:{}});_this.props.localParentMethod({methodname:\"sendmessage\",methodprops:msgObj});_this.setState({compType:\"list\"});var _this$props$compprops=_this.props.compprops,orgname=_this$props$compprops.orgname,userprofileid=_this$props$compprops.userprofileid,userid=_this$props$compprops.userid,tablename=_this$props$compprops.tablename,datadisplaytype=_this$props$compprops.datadisplaytype,viewname=_this$props$compprops.viewname,datasortparambeginswith=_this$props$compprops.datasortparambeginswith;_this.getRecordListMetadataAndDatafromServer({orgname:orgname,userProfileId:userprofileid,userId:userid,tableName:tablename,datasortparambeginswith:datasortparambeginswith,datasortparamequalsto:\"\",action:\"\",viewName:viewname,datadisplaytype:datadisplaytype});};_this.resetMailBox=function(){};_this.newMail=function(){_this.setState({compType:\"new\"});};_this.viewMail=function(props){var viewMailData=props.viewMailData;_this.setState({compType:\"view\",viewMailData:viewMailData});};_this.state={compType:\"list\",viewMailData:{},serverMessage:{},serverMessageArray:[],mailArray:[]};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props$compprops2,orgname,userprofileid,userid,tablename,datadisplaytype,viewname,datasortparambeginswith;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(this.props);_this$props$compprops2=this.props.compprops,orgname=_this$props$compprops2.orgname,userprofileid=_this$props$compprops2.userprofileid,userid=_this$props$compprops2.userid,tablename=_this$props$compprops2.tablename,datadisplaytype=_this$props$compprops2.datadisplaytype,viewname=_this$props$compprops2.viewname,datasortparambeginswith=_this$props$compprops2.datasortparambeginswith;this.getRecordListMetadataAndDatafromServer({orgname:orgname,userProfileId:userprofileid,userId:userid,tableName:tablename,datasortparambeginswith:datasortparambeginswith,datasortparamequalsto:\"\",action:\"\",viewName:viewname,datadisplaytype:datadisplaytype});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getRecordListMetadataAndDatafromServer\",value:function(){var _getRecordListMetadataAndDatafromServer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(props){var orgname,userProfileId,userId,tableName,datasortparambeginswith,datasortparamequalsto,action,viewName,datadisplaytype,mainPanelHtmlObj,dataParams,dataresult;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:orgname=props.orgname,userProfileId=props.userProfileId,userId=props.userId,tableName=props.tableName,datasortparambeginswith=props.datasortparambeginswith,datasortparamequalsto=props.datasortparamequalsto,action=props.action,viewName=props.viewName,datadisplaytype=props.datadisplaytype;mainPanelHtmlObj=this.state.mainPanelHtmlObj;dataParams={objectName:tableName,objectData:{},keyConditions:[{field:\"orgname\",value:orgname,expression:\"=\"},{field:\"id\",value:datasortparambeginswith+\"-\"+userId,expression:\"beginswith\"}],filterConditions:[],pageSize:\"\",limit:\"\",exclusiveStartKey:\"\"};_context2.next=5;return getRecorddata(dataParams);case 5:dataresult=_context2.sent;if(dataresult.isSuccess===\"false\"){alert(\"data\"+dataresult.message);}else{console.log(dataresult.dataprops.Items);this.setState({mailArray:dataresult.dataprops.Items});}case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function getRecordListMetadataAndDatafromServer(_x){return _getRecordListMetadataAndDatafromServer.apply(this,arguments);}return getRecordListMetadataAndDatafromServer;}()},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,serverMessageArray=_this$state2.serverMessageArray,mailArray=_this$state2.mailArray,viewMailData=_this$state2.viewMailData;console.log(this.props);console.log(serverMessageArray);var compType=this.state.compType;var sidebarHtml=[];sidebarHtml.push(/*#__PURE__*/_jsxs(\"div\",{className:\" org-cdivv-sp org-cdivleft-sp\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"org-\",children:\"Inbox\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Important\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Drafts\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Outbox\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Sent\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Custom\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Deleted\"})]}));var emailActionsHtml=[];emailActionsHtml.push(/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.newMail,children:\"New\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Delete\"})]}));var emailrowhtml=[];var emailarrayHtml=[];var _loop=function _loop(i){emailarrayHtml.push(/*#__PURE__*/_jsx(\"div\",{className:\"org-cdivv-sp\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fai-c org-bluebg\",style:{border:\"1px solid grey\",margin:\"0px\"},children:[/*#__PURE__*/_jsxs(\"span\",{style:{paddingRight:\"50px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),/*#__PURE__*/_jsx(GetGoogleIcon,{name:\"label\"})]}),/*#__PURE__*/_jsx(\"span\",{style:{paddingRight:\"100px\"},onClick:function onClick(){_this2.viewMail({viewMailData:mailArray[i]});},children:mailArray[i].from}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){_this2.viewMail({viewMailData:mailArray[i]});},children:mailArray[i].subject})]})}));};for(var i=0;i<mailArray.length;i++){_loop(i);}// //for (let i = 0; i < 10; i++) {\n// emailarrayHtml.push({emailrowhtml}</div>);\n// // }\nvar mainpanelHtml=[];mainpanelHtml.push(/*#__PURE__*/_jsx(\"div\",{children:emailActionsHtml}));mainpanelHtml.push(/*#__PURE__*/_jsx(\"div\",{children:emailarrayHtml}));var newmailHtml=[];newmailHtml.push(/*#__PURE__*/_jsx(Mailnewaction,_objectSpread(_objectSpread({},this.props),{},{onmailsent:this.onmailsent,backHandler:this.backHandler})));var viewmailHtml=[];viewmailHtml.push(/*#__PURE__*/_jsx(Mailviewaction,_objectSpread(_objectSpread({},this.props),{},{viewMailData:viewMailData,backHandler:this.backHandler})));return/*#__PURE__*/_jsxs(_Fragment,{children:[compType==\"list\"?/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p \",children:sidebarHtml}),/*#__PURE__*/_jsx(\"div\",{className:\"org-flexbasis-100p org-mflexbasis-80p org-lflexbasis-80p \",children:mainpanelHtml})]}):[],compType==\"new\"?newmailHtml:[],compType==\"view\"?viewmailHtml:[]]});}}]);return F;}(Component);export default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/mail.js"],"names":["React","Component","getRecorddata","createRecord","bulkcreateRecord","GetLocalIcon","GetGoogleIcon","Mailnewaction","Mailviewaction","F","props","componentDidUpdate","prevProps","state","isConnectedtoWebsocketServer","currentuserid","serverMessage","serverMessageArray","newlocalParentProps","localParentProps","console","log","JSON","stringify","push","alert","setState","backHandler","compType","onmailsent","msgObj","utilityname","localParentMethod","methodname","methodprops","compprops","orgname","userprofileid","userid","tablename","datadisplaytype","viewname","datasortparambeginswith","getRecordListMetadataAndDatafromServer","userProfileId","userId","tableName","datasortparamequalsto","action","viewName","resetMailBox","newMail","viewMail","viewMailData","mailArray","mainPanelHtmlObj","dataParams","objectName","objectData","keyConditions","field","value","expression","filterConditions","pageSize","limit","exclusiveStartKey","dataresult","isSuccess","message","dataprops","Items","sidebarHtml","emailActionsHtml","emailrowhtml","emailarrayHtml","i","border","margin","paddingRight","from","subject","length","mainpanelHtml","newmailHtml","viewmailHtml"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { getRecorddata, createRecord, bulkcreateRecord } from \"../db/index\";\nimport { GetLocalIcon, GetGoogleIcon } from \"./icons\";\nimport Mailnewaction from \"./mailnewaction\";\nimport Mailviewaction from \"./mailviewaction\";\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      compType: \"list\",\n      viewMailData: {},\n      serverMessage: {},\n      serverMessageArray: [],\n      mailArray: [],\n    };\n  }\n\n  async componentDidMount() {\n    console.log(this.props);\n    let {\n      orgname,\n      userprofileid,\n      userid,\n      tablename,\n      datadisplaytype,\n      viewname,\n      datasortparambeginswith,\n    } = this.props.compprops;\n    this.getRecordListMetadataAndDatafromServer({\n      orgname: orgname,\n      userProfileId: userprofileid,\n      userId: userid,\n      tableName: tablename,\n      datasortparambeginswith: datasortparambeginswith,\n      datasortparamequalsto: \"\",\n      action: \"\",\n      viewName: viewname,\n      datadisplaytype: datadisplaytype,\n    });\n  }\n\n  async getRecordListMetadataAndDatafromServer(props) {\n    let {\n      orgname,\n      userProfileId,\n      userId,\n      tableName,\n      datasortparambeginswith,\n      datasortparamequalsto,\n      action,\n      viewName,\n      datadisplaytype,\n    } = props;\n    let { mainPanelHtmlObj } = this.state;\n\n    let dataParams = {\n      objectName: tableName,\n      objectData: {},\n      keyConditions: [\n        {\n          field: \"orgname\",\n          value: orgname,\n          expression: \"=\",\n        },\n        {\n          field: \"id\",\n          value: datasortparambeginswith + \"-\" + userId,\n          expression: \"beginswith\",\n        },\n      ],\n      filterConditions: [],\n      pageSize: \"\",\n      limit: \"\",\n      exclusiveStartKey: \"\",\n    };\n    let dataresult = await getRecorddata(dataParams);\n    if (dataresult.isSuccess === \"false\") {\n      alert(\"data\" + dataresult.message);\n    } else {\n      console.log(dataresult.dataprops.Items);\n      this.setState({ mailArray: dataresult.dataprops.Items });\n    }\n  }\n\n  componentDidUpdate = (prevProps) => {\n    let {\n      isConnectedtoWebsocketServer,\n      currentuserid,\n      serverMessage,\n      serverMessageArray,\n    } = this.state;\n    let newlocalParentProps = this.props.localParentProps;\n    console.log(newlocalParentProps);\n    if (\n      JSON.stringify(serverMessage) !=\n      JSON.stringify(newlocalParentProps.serverMessage)\n    ) {\n      console.log(JSON.stringify(serverMessage));\n      console.log(JSON.stringify(newlocalParentProps.serverMessage));\n      serverMessageArray.push(newlocalParentProps.serverMessage);\n      alert();\n      this.setState({\n        serverMessage: newlocalParentProps.serverMessage,\n        serverMessageArray: serverMessageArray,\n      });\n    }\n  };\n\n  backHandler = () => {\n    this.setState({ compType: \"list\" });\n  };\n  onmailsent = (props) => {\n    let { msgObj } = props;\n    console.log(msgObj);\n    msgObj.utilityname = \"mail\";\n    this.props.localParentMethod({\n      methodname: \"openwebsocketconnection\",\n      props: {},\n    });\n    this.props.localParentMethod({\n      methodname: \"sendmessage\",\n      methodprops: msgObj,\n    });\n    this.setState({ compType: \"list\" });\n\n    let {\n      orgname,\n      userprofileid,\n      userid,\n      tablename,\n      datadisplaytype,\n      viewname,\n      datasortparambeginswith,\n    } = this.props.compprops;\n    this.getRecordListMetadataAndDatafromServer({\n      orgname: orgname,\n      userProfileId: userprofileid,\n      userId: userid,\n      tableName: tablename,\n      datasortparambeginswith: datasortparambeginswith,\n      datasortparamequalsto: \"\",\n      action: \"\",\n      viewName: viewname,\n      datadisplaytype: datadisplaytype,\n    });\n  };\n\n  resetMailBox = () => {};\n\n  newMail = () => {\n    this.setState({ compType: \"new\" });\n  };\n\n  viewMail = (props) => {\n    let { viewMailData } = props;\n    this.setState({ compType: \"view\", viewMailData: viewMailData });\n  };\n\n  render() {\n    let { serverMessageArray, mailArray, viewMailData } = this.state;\n\n    console.log(this.props);\n    console.log(serverMessageArray);\n    let { compType } = this.state;\n    let sidebarHtml = [];\n    sidebarHtml.push(\n      <div\n        className=\"\n      org-cdivv-sp org-cdivleft-sp\"\n      >\n        <div className=\"org-\">Inbox</div>\n        <div>Important</div>\n        <div>Drafts</div>\n        <div>Outbox</div>\n        <div>Sent</div>\n        <div>Custom</div>\n        <div>Deleted</div>\n      </div>\n    );\n\n    let emailActionsHtml = [];\n    emailActionsHtml.push(\n      <div>\n        <button onClick={this.newMail}>New</button>\n        <button>Delete</button>\n      </div>\n    );\n\n    let emailrowhtml = [];\n    let emailarrayHtml = [];\n    for (let i = 0; i < mailArray.length; i++) {\n      emailarrayHtml.push(\n        <div className=\"org-cdivv-sp\">\n          <div\n            className=\"org-fr org-fai-c org-bluebg\"\n            style={{ border: \"1px solid grey\", margin: \"0px\" }}\n          >\n            <span style={{ paddingRight: \"50px\" }}>\n              <input type=\"checkbox\" />\n              <GetGoogleIcon name=\"label\" />\n            </span>\n            <span\n              style={{ paddingRight: \"100px\" }}\n              onClick={() => {\n                this.viewMail({ viewMailData: mailArray[i] });\n              }}\n            >\n              {mailArray[i].from}\n            </span>\n            <span\n              onClick={() => {\n                this.viewMail({ viewMailData: mailArray[i] });\n              }}\n            >\n              {mailArray[i].subject}\n            </span>\n          </div>\n        </div>\n      );\n    }\n\n    // //for (let i = 0; i < 10; i++) {\n    // emailarrayHtml.push({emailrowhtml}</div>);\n    // // }\n\n    let mainpanelHtml = [];\n    mainpanelHtml.push(<div>{emailActionsHtml}</div>);\n    mainpanelHtml.push(<div>{emailarrayHtml}</div>);\n\n    let newmailHtml = [];\n    newmailHtml.push(\n      <Mailnewaction\n        {...this.props}\n        onmailsent={this.onmailsent}\n        backHandler={this.backHandler}\n      />\n    );\n\n    let viewmailHtml = [];\n    viewmailHtml.push(\n      <Mailviewaction\n        {...this.props}\n        viewMailData={viewMailData}\n        backHandler={this.backHandler}\n      />\n    );\n\n    return (\n      <>\n        {compType == \"list\" ? (\n          <div className=\"org-fr \">\n            <div className=\"org-flexbasis-100p org-mflexbasis-20p org-lflexbasis-20p \">\n              {sidebarHtml}\n            </div>\n            <div className=\"org-flexbasis-100p org-mflexbasis-80p org-lflexbasis-80p \">\n              {mainpanelHtml}\n            </div>\n          </div>\n        ) : (\n          []\n        )}\n        {compType == \"new\" ? newmailHtml : []}\n        {compType == \"view\" ? viewmailHtml : []}\n      </>\n    );\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}