{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import ReactDOM from\"react-dom\";import{getRecorddata,createRecord,bulkcreateRecord,updateRecord,deleteRecord}from\"../db/index\";import{sortArray,fieldTypeHtmltoDBmapping,getLocalData,serverButtonHandler}from\"../js/index\";import Paintpad from\"./paintpad\";import Rte from\"./richtexteditor\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_Component){_inherits(F,_Component);var _super=_createSuper(F);function F(_props){var _this;_classCallCheck(this,F);_this=_super.call(this,_props);_this.getServerData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(props){var action,noteid,localdata,result,order,notepadDataArray,notepadDataArraySorted,i,divProps,_props2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:action=props.action,noteid=props.noteid;// alert(\"1-\" + noteid);\nconsole.log(_this.props);localdata=getLocalData(_this.props);_context.next=5;return getRecorddata({objectName:\"note\",objectData:{},keyConditions:[{field:\"orgname\",value:localdata.orgname,expression:\"=\"},{field:\"id\",value:noteid,expression:\"=\"}],filterConditions:[]});case 5:result=_context.sent;console.log(result);if(result.isSuccess===\"false\"){alert(\"url not found\");}else{console.log(result.dataprops.Items[0]);console.log(JSON.parse(result.dataprops.Items[0].data));if(result.dataprops&&result.dataprops.Items){order=0;notepadDataArray=JSON.parse(result.dataprops.Items[0].data);notepadDataArraySorted=sortArray(notepadDataArray,\"order\",\"integer\");for(i=0;i<notepadDataArraySorted.length;i++){order++;if(notepadDataArraySorted[i].type===\"div\"){divProps={innerHTML:notepadDataArraySorted[i].innerhtml,order:notepadDataArraySorted[i].order,action:action};_this.insertEditableDivHandler(divProps);}if(notepadDataArraySorted[i].type===\"canvas\"){_props2={order:notepadDataArraySorted[i].order,defaultdrawHistory:notepadDataArraySorted[i].defaultdrawHistory,action:action};_this.insertPaintHandler(_props2);}}_this.setState({order:order,recorddata:result.dataprops.Items[0],action:action});}}//let paintProps = { id: \"id1\", htmlArray: \"<div>Tewst</div>\" };\n// this.insertPaint(divProps);\ncase 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.paintpadAttachHandler=function(props){var defaultdrawHistoryObj=_this.state.defaultdrawHistoryObj;console.log(props);var drawHistory=props.drawHistory,order=props.order;defaultdrawHistoryObj[order]=drawHistory;_this.setState({defaultdrawHistoryObj:defaultdrawHistoryObj});};_this.insertEditableDiv=function(props){var order=_this.state.order;order=parseInt(order)+1;var divProps={innerHTML:\"&nbsp;\",order:order,editable:true};_this.insertEditableDivHandler(divProps);_this.setState({order:order//  isEdit: true\n});};_this.insertEditableDivHandler=function(props){var innerHTML=props.innerHTML,order=props.order;var paintParentNextDiv=document.createElement(\"div\");paintParentNextDiv.setAttribute(\"class\",\"notepadedit-div\");paintParentNextDiv.setAttribute(\"contenteditable\",props.editable);paintParentNextDiv.setAttribute(\"data-order\",order);paintParentNextDiv.innerHTML=innerHTML;document.getElementById(\"notepadedit\").insertAdjacentElement(\"beforeend\",paintParentNextDiv);// if(props.order === undefined ||){\n//  this.setState({ order: parseInt(order) + 1 });\n// }\n};_this.insertPaint=function(){var action=_this.props.action;var order=_this.state.order;order=parseInt(order)+1;var props={order:order,defaultdrawHistory:[],action:action};_this.insertPaintHandler(props);_this.setState({order:order},function(){order=parseInt(order)+1;// let divProps = {\n//   innerHTML: \"&nbsp;\",\n//   order: order,\n//   editable: true };\n_this.insertEditableDiv({});});};_this.insertPaintHandler=function(props){var order=props.order,defaultdrawHistory=props.defaultdrawHistory,action=props.action;var parentDivId=\"notepadedit-canvasdiv-\"+order;var canvasId=\"notepadedit-canvas-\"+order;var hiddenDivId=\"notepadedit-canvas-hiddendiv\"+order;// parent div\nvar paintParentDiv=document.createElement(\"div\");paintParentDiv.setAttribute(\"id\",parentDivId);paintParentDiv.setAttribute(\"style\",\"width:100%;height:50%;\");paintParentDiv.setAttribute(\"class\",\"notepadedit-canvas\");paintParentDiv.setAttribute(\"data-order\",order);document.getElementById(\"notepadedit\").insertAdjacentElement(\"beforeend\",paintParentDiv);// paintpad comp\nvar compprops={order:order,canvashtmlid:canvasId,canvashtmlparentdivid:parentDivId,hiddendivhtmlid:hiddenDivId,action:action,defaultdrawHistory:defaultdrawHistory};var onattach=_this.paintpadAttachHandler;var paintElement=/*#__PURE__*/React.createElement(Paintpad,{compprops:compprops,onattach:onattach},null);var paintElementHmtl=[];paintElementHmtl.push(paintElement);ReactDOM.render(paintElementHmtl,document.getElementById(parentDivId));};_this.saveNotes=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$props$compprops,tablename,defaultsortparam,enablelocaldbdata,parentid,iscreateactive,isviewactive,iseditactive,isdeleteactive,localdata,_this$props,noteid,action,recorddata,defaultdrawHistoryObj,divandcanvasEle,divElements,i,canvasElements,_i,d,result,objectPrimaryKeyValue,target,recordDataUpdating,_result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props$compprops=_this.props.compprops,tablename=_this$props$compprops.tablename,defaultsortparam=_this$props$compprops.defaultsortparam,enablelocaldbdata=_this$props$compprops.enablelocaldbdata,parentid=_this$props$compprops.parentid,iscreateactive=_this$props$compprops.iscreateactive,isviewactive=_this$props$compprops.isviewactive,iseditactive=_this$props$compprops.iseditactive,isdeleteactive=_this$props$compprops.isdeleteactive;localdata=getLocalData(_this.props);_this$props=_this.props,noteid=_this$props.noteid,action=_this$props.action;recorddata=_this.state.recorddata;defaultdrawHistoryObj=_this.state.defaultdrawHistoryObj;divandcanvasEle=[];divElements=document.getElementsByClassName(\"notepadedit-div\");for(i=0;i<divElements.length;i++){console.log(divElements[i].innerHTML);divandcanvasEle.push({type:\"div\",order:divElements[i].dataset.order,innerhtml:divElements[i].innerHTML});}canvasElements=document.getElementsByClassName(\"notepadedit-canvas\");for(_i=0;_i<canvasElements.length;_i++){console.log(canvasElements[_i]);console.log(canvasElements[_i].dataset.order);console.log(defaultdrawHistoryObj[canvasElements[_i].dataset.order]);divandcanvasEle.push({type:\"canvas\",order:canvasElements[_i].dataset.order,defaultdrawHistory:defaultdrawHistoryObj[canvasElements[_i].dataset.order]});}console.log(divandcanvasEle);console.log(JSON.stringify(divandcanvasEle));recorddata.data=JSON.stringify(divandcanvasEle);recorddata.parentid=parentid;if(!(action===\"create\")){_context2.next=24;break;}recorddata.orgname=localdata.orgname;d=new Date();recorddata.id=defaultsortparam+\"-\"+parentid+\"-\"+d.getTime();// if (defaultdatafilter && Object.keys(defaultdatafilter).length > 0) {\n//   for (let j in defaultdatafilter) {\n//     recorddata[j] = defaultdatafilter[j];\n//   }\n// }\n_context2.next=20;return createRecord({objectName:tablename,objectData:recorddata});case 20:result=_context2.sent;if(result.isSuccess===\"false\"){alert(result.message);}else{// this.resetUI();\n// let props = { editable: false, noteid: recorddata.id };\n// await this.getServerData(props);\n//   this.props.refreshNote({ noteid: recorddata.id });\n_this.props.childnoteHandler({action:\"view\",recordid:recorddata.id});}_context2.next=33;break;case 24:objectPrimaryKeyValue={orgname:recorddata.orgname,id:recorddata.id};target={};recordDataUpdating=Object.assign(target,recorddata);delete recordDataUpdating.orgname;delete recordDataUpdating.id;_context2.next=31;return updateRecord({objectName:tablename,objectPrimaryKeyValue:objectPrimaryKeyValue,objectData:recordDataUpdating});case 31:_result=_context2.sent;if(_result.isSuccess===\"false\"){alert(_result.message);}else{_this.props.childnoteHandler({action:\"view\",recordid:recorddata.id});}case 33:console.log(recorddata);case 34:case\"end\":return _context2.stop();}}},_callee2);}));_this.editNote=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var noteid,props;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:noteid=_this.props.noteid;props={action:\"edit\",recordid:noteid};_this.props.childnoteHandler(props);case 3:case\"end\":return _context3.stop();}}},_callee3);}));_this.cancelEditNote=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var noteid,props;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:noteid=_this.props.noteid;props={action:\"view\",recordid:noteid};_this.props.childnoteHandler(props);case 3:case\"end\":return _context4.stop();}}},_callee4);}));_this.resetUI=function(){document.getElementById(\"notepadedit\").innerHTML=\"\";};_this.deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(props){var recorddata,localdata,result,_props3;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:recorddata=_this.state.recorddata;localdata=getLocalData(_this.props);_context5.next=4;return deleteRecord({objectName:\"note\",objectPrimaryKeyValue:{id:recorddata.id,orgname:localdata.orgname}});case 4:result=_context5.sent;if(result.isSuccess===\"false\"){alert(result.message);}else{_props3={action:\"\",recordid:\"\"};_this.props.childnoteHandler(_props3);}case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x2){return _ref5.apply(this,arguments);};}();_this.noteTitleChange=function(e){var recorddata=_this.state.recorddata;recorddata.label=e.target.value;};_this.state={defaultdrawHistoryObj:{},order:0,recorddata:{},isEdit:\"\"};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _this$props2,noteid,action,props,_props4;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:// let {\n//   tablename,\n//   defaultsortparam,\n//   enablelocaldbdata,\n//   parentid,\n//   // defaultdatafilter,\n//   iscreateactive,\n//   isviewactive,\n//   iseditactive,\n//   isdeleteactive,\n// } = this.props.compprops;\n_this$props2=this.props,noteid=_this$props2.noteid,action=_this$props2.action;if(!(noteid&&action===\"view\")){_context6.next=7;break;}props={action:action,noteid:noteid};_context6.next=5;return this.getServerData(props);case 5:_context6.next=14;break;case 7:if(!(noteid&&action===\"edit\")){_context6.next=13;break;}_props4={action:action,noteid:noteid};_context6.next=11;return this.getServerData(_props4);case 11:_context6.next=14;break;case 13:if(action===\"create\"){this.insertEditableDiv();}case 14:case\"end\":return _context6.stop();}}},_callee6,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){console.log(this.props);var _this$state=this.state,isEdit=_this$state.isEdit,recorddata=_this$state.recorddata;var _this$props3=this.props,noteid=_this$props3.noteid,createNote=_this$props3.createNote,action=_this$props3.action,iseditactive=_this$props3.iseditactive,isdeleteactive=_this$props3.isdeleteactive;var mainpanelHtml=[];var notepageHtml=[];notepageHtml.push(/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\",children:[/*#__PURE__*/_jsx(Rte,{iscreateactive:\"false\",htmlid:\"notepadedit\",noteid:noteid,createNote:createNote,insertPaint:this.insertPaint,editNote:this.editNote,saveNotes:this.saveNotes,cancelEditNote:this.cancelEditNote,deleteNote:this.deleteNote,isEdit:isEdit,action:action,iseditactive:iseditactive,isdeleteactive:isdeleteactive}),/*#__PURE__*/_jsx(\"div\",{children:action===\"create\"||action===\"edit\"?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{defaultValue:recorddata.label,onChange:this.noteTitleChange})}):/*#__PURE__*/_jsx(\"div\",{children:recorddata.label})}),/*#__PURE__*/_jsx(\"div\",{id:\"notepadedit\",contentEditable:\"true\",style:{width:\"100%\",height:\"100vh\",backgroundColor:\"lightyellow\",color:\"black\",position:\"relative\",overflow:\"auto\"}})]})}));mainpanelHtml.push(notepageHtml);return/*#__PURE__*/_jsx(_Fragment,{children:mainpanelHtml});}}]);return F;}(Component);export default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/notepad.js"],"names":["React","Component","ReactDOM","getRecorddata","createRecord","bulkcreateRecord","updateRecord","deleteRecord","sortArray","fieldTypeHtmltoDBmapping","getLocalData","serverButtonHandler","Paintpad","Rte","F","props","getServerData","action","noteid","console","log","localdata","objectName","objectData","keyConditions","field","value","orgname","expression","filterConditions","result","isSuccess","alert","dataprops","Items","JSON","parse","data","order","notepadDataArray","notepadDataArraySorted","i","length","type","divProps","innerHTML","innerhtml","insertEditableDivHandler","defaultdrawHistory","insertPaintHandler","setState","recorddata","paintpadAttachHandler","defaultdrawHistoryObj","state","drawHistory","insertEditableDiv","parseInt","editable","paintParentNextDiv","document","createElement","setAttribute","getElementById","insertAdjacentElement","insertPaint","parentDivId","canvasId","hiddenDivId","paintParentDiv","compprops","canvashtmlid","canvashtmlparentdivid","hiddendivhtmlid","onattach","paintElement","paintElementHmtl","push","render","saveNotes","tablename","defaultsortparam","enablelocaldbdata","parentid","iscreateactive","isviewactive","iseditactive","isdeleteactive","divandcanvasEle","divElements","getElementsByClassName","dataset","canvasElements","stringify","d","Date","id","getTime","message","childnoteHandler","recordid","objectPrimaryKeyValue","target","recordDataUpdating","Object","assign","editNote","cancelEditNote","resetUI","deleteNote","noteTitleChange","e","label","isEdit","createNote","mainpanelHtml","notepageHtml","width","height","backgroundColor","color","position","overflow"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  getRecorddata,\n  createRecord,\n  bulkcreateRecord,\n  updateRecord,\n  deleteRecord,\n} from \"../db/index\";\nimport {\n  sortArray,\n  fieldTypeHtmltoDBmapping,\n  getLocalData,\n  serverButtonHandler,\n} from \"../js/index\";\n\nimport Paintpad from \"./paintpad\";\nimport Rte from \"./richtexteditor\";\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      defaultdrawHistoryObj: {},\n      order: 0,\n      recorddata: {},\n      isEdit: \"\",\n    };\n  }\n\n  async componentDidMount() {\n    // let {\n    //   tablename,\n    //   defaultsortparam,\n    //   enablelocaldbdata,\n    //   parentid,\n    //   // defaultdatafilter,\n    //   iscreateactive,\n    //   isviewactive,\n    //   iseditactive,\n    //   isdeleteactive,\n    // } = this.props.compprops;\n\n    let { noteid, action } = this.props;\n\n    if (noteid && action === \"view\") {\n      let props = { action: action, noteid: noteid };\n      await this.getServerData(props);\n    } else if (noteid && action === \"edit\") {\n      let props = { action: action, noteid: noteid };\n      await this.getServerData(props);\n    } else if (action === \"create\") {\n      this.insertEditableDiv();\n    }\n  }\n\n  getServerData = async (props) => {\n    let { action, noteid } = props;\n\n    // alert(\"1-\" + noteid);\n    console.log(this.props);\n    let localdata = getLocalData(this.props);\n\n    let result = await getRecorddata({\n      objectName: \"note\",\n      objectData: {},\n      keyConditions: [\n        { field: \"orgname\", value: localdata.orgname, expression: \"=\" },\n        { field: \"id\", value: noteid, expression: \"=\" },\n      ],\n      filterConditions: [],\n    });\n\n    console.log(result);\n    if (result.isSuccess === \"false\") {\n      alert(\"url not found\");\n    } else {\n      console.log(result.dataprops.Items[0]);\n      console.log(JSON.parse(result.dataprops.Items[0].data));\n      if (result.dataprops && result.dataprops.Items) {\n        let order = 0;\n        let notepadDataArray = JSON.parse(result.dataprops.Items[0].data);\n        let notepadDataArraySorted = sortArray(\n          notepadDataArray,\n          \"order\",\n          \"integer\"\n        );\n        for (let i = 0; i < notepadDataArraySorted.length; i++) {\n          order++;\n          if (notepadDataArraySorted[i].type === \"div\") {\n            let divProps = {\n              innerHTML: notepadDataArraySorted[i].innerhtml,\n              order: notepadDataArraySorted[i].order,\n              action: action,\n            };\n            this.insertEditableDivHandler(divProps);\n          }\n          if (notepadDataArraySorted[i].type === \"canvas\") {\n            let props = {\n              order: notepadDataArraySorted[i].order,\n              defaultdrawHistory: notepadDataArraySorted[i].defaultdrawHistory,\n              action: action,\n            };\n            this.insertPaintHandler(props);\n          }\n        }\n\n        this.setState({\n          order: order,\n          recorddata: result.dataprops.Items[0],\n          action: action,\n        });\n      }\n    }\n\n    //let paintProps = { id: \"id1\", htmlArray: \"<div>Tewst</div>\" };\n    // this.insertPaint(divProps);\n  };\n\n  paintpadAttachHandler = (props) => {\n    let { defaultdrawHistoryObj } = this.state;\n    console.log(props);\n    let { drawHistory, order } = props;\n    defaultdrawHistoryObj[order] = drawHistory;\n    this.setState({ defaultdrawHistoryObj: defaultdrawHistoryObj });\n  };\n\n  insertEditableDiv = (props) => {\n    let { order } = this.state;\n    order = parseInt(order) + 1;\n    let divProps = {\n      innerHTML: \"&nbsp;\",\n      order: order,\n      editable: true,\n    };\n    this.insertEditableDivHandler(divProps);\n    this.setState({\n      order: order,\n      //  isEdit: true\n    });\n  };\n\n  insertEditableDivHandler = (props) => {\n    let { innerHTML, order } = props;\n\n    var paintParentNextDiv = document.createElement(\"div\");\n    paintParentNextDiv.setAttribute(\"class\", \"notepadedit-div\");\n    paintParentNextDiv.setAttribute(\"contenteditable\", props.editable);\n    paintParentNextDiv.setAttribute(\"data-order\", order);\n    paintParentNextDiv.innerHTML = innerHTML;\n\n    document\n      .getElementById(\"notepadedit\")\n      .insertAdjacentElement(\"beforeend\", paintParentNextDiv);\n    // if(props.order === undefined ||){\n    //  this.setState({ order: parseInt(order) + 1 });\n    // }\n  };\n\n  insertPaint = () => {\n    let { action } = this.props;\n    let { order } = this.state;\n    order = parseInt(order) + 1;\n    let props = {\n      order: order,\n      defaultdrawHistory: [],\n      action: action,\n    };\n    this.insertPaintHandler(props);\n\n    this.setState({ order: order }, () => {\n      order = parseInt(order) + 1;\n      // let divProps = {\n      //   innerHTML: \"&nbsp;\",\n      //   order: order,\n      //   editable: true };\n      this.insertEditableDiv({});\n    });\n  };\n\n  insertPaintHandler = (props) => {\n    let { order, defaultdrawHistory, action } = props;\n    let parentDivId = \"notepadedit-canvasdiv-\" + order;\n    let canvasId = \"notepadedit-canvas-\" + order;\n    let hiddenDivId = \"notepadedit-canvas-hiddendiv\" + order;\n    // parent div\n    var paintParentDiv = document.createElement(\"div\");\n    paintParentDiv.setAttribute(\"id\", parentDivId);\n    paintParentDiv.setAttribute(\"style\", \"width:100%;height:50%;\");\n    paintParentDiv.setAttribute(\"class\", \"notepadedit-canvas\");\n    paintParentDiv.setAttribute(\"data-order\", order);\n\n    document\n      .getElementById(\"notepadedit\")\n      .insertAdjacentElement(\"beforeend\", paintParentDiv);\n\n    // paintpad comp\n\n    let compprops = {\n      order: order,\n      canvashtmlid: canvasId,\n      canvashtmlparentdivid: parentDivId,\n      hiddendivhtmlid: hiddenDivId,\n      action: action,\n      defaultdrawHistory: defaultdrawHistory,\n    };\n    let onattach = this.paintpadAttachHandler;\n\n    let paintElement = React.createElement(\n      Paintpad,\n      { compprops: compprops, onattach: onattach },\n      null\n    );\n\n    let paintElementHmtl = [];\n    paintElementHmtl.push(paintElement);\n\n    ReactDOM.render(paintElementHmtl, document.getElementById(parentDivId));\n  };\n\n  saveNotes = async () => {\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n      //  defaultdatafilter,\n      iscreateactive,\n      isviewactive,\n      iseditactive,\n      isdeleteactive,\n    } = this.props.compprops;\n\n    let localdata = getLocalData(this.props);\n    let { noteid, action } = this.props;\n    let { recorddata } = this.state;\n    let { defaultdrawHistoryObj } = this.state;\n    let divandcanvasEle = [];\n    let divElements = document.getElementsByClassName(\"notepadedit-div\");\n    for (let i = 0; i < divElements.length; i++) {\n      console.log(divElements[i].innerHTML);\n      divandcanvasEle.push({\n        type: \"div\",\n        order: divElements[i].dataset.order,\n        innerhtml: divElements[i].innerHTML,\n      });\n    }\n\n    let canvasElements = document.getElementsByClassName(\"notepadedit-canvas\");\n    for (let i = 0; i < canvasElements.length; i++) {\n      console.log(canvasElements[i]);\n      console.log(canvasElements[i].dataset.order);\n      console.log(defaultdrawHistoryObj[canvasElements[i].dataset.order]);\n      divandcanvasEle.push({\n        type: \"canvas\",\n        order: canvasElements[i].dataset.order,\n        defaultdrawHistory:\n          defaultdrawHistoryObj[canvasElements[i].dataset.order],\n      });\n    }\n    console.log(divandcanvasEle);\n    console.log(JSON.stringify(divandcanvasEle));\n    recorddata.data = JSON.stringify(divandcanvasEle);\n    recorddata.parentid = parentid;\n    if (action === \"create\") {\n      recorddata.orgname = localdata.orgname;\n      let d = new Date();\n\n      recorddata.id = defaultsortparam + \"-\" + parentid + \"-\" + d.getTime();\n      // if (defaultdatafilter && Object.keys(defaultdatafilter).length > 0) {\n      //   for (let j in defaultdatafilter) {\n      //     recorddata[j] = defaultdatafilter[j];\n      //   }\n      // }\n\n      let result = await createRecord({\n        objectName: tablename,\n        objectData: recorddata,\n      });\n      if (result.isSuccess === \"false\") {\n        alert(result.message);\n      } else {\n        // this.resetUI();\n        // let props = { editable: false, noteid: recorddata.id };\n        // await this.getServerData(props);\n        //   this.props.refreshNote({ noteid: recorddata.id });\n        this.props.childnoteHandler({\n          action: \"view\",\n          recordid: recorddata.id,\n        });\n      }\n    } else {\n      let objectPrimaryKeyValue = {\n        orgname: recorddata.orgname,\n        id: recorddata.id,\n      };\n      let target = {};\n      let recordDataUpdating = Object.assign(target, recorddata);\n      delete recordDataUpdating.orgname;\n      delete recordDataUpdating.id;\n\n      let result = await updateRecord({\n        objectName: tablename,\n        objectPrimaryKeyValue: objectPrimaryKeyValue,\n        objectData: recordDataUpdating,\n      });\n      if (result.isSuccess === \"false\") {\n        alert(result.message);\n      } else {\n        this.props.childnoteHandler({\n          action: \"view\",\n          recordid: recorddata.id,\n        });\n      }\n    }\n    console.log(recorddata);\n  };\n\n  editNote = async () => {\n    let { noteid } = this.props;\n    let props = { action: \"edit\", recordid: noteid };\n    this.props.childnoteHandler(props);\n  };\n\n  cancelEditNote = async () => {\n    let { noteid } = this.props;\n    let props = { action: \"view\", recordid: noteid };\n    this.props.childnoteHandler(props);\n  };\n\n  resetUI = () => {\n    document.getElementById(\"notepadedit\").innerHTML = \"\";\n  };\n\n  deleteNote = async (props) => {\n    let { recorddata } = this.state;\n    let localdata = getLocalData(this.props);\n\n    let result = await deleteRecord({\n      objectName: \"note\",\n      objectPrimaryKeyValue: { id: recorddata.id, orgname: localdata.orgname },\n    });\n    if (result.isSuccess === \"false\") {\n      alert(result.message);\n    } else {\n      let props = { action: \"\", recordid: \"\" };\n      this.props.childnoteHandler(props);\n    }\n  };\n\n  noteTitleChange = (e) => {\n    let { recorddata } = this.state;\n    recorddata.label = e.target.value;\n  };\n\n  render() {\n    console.log(this.props);\n    let { isEdit, recorddata } = this.state;\n    let {\n      noteid,\n      createNote,\n      action,\n      iseditactive,\n      isdeleteactive,\n    } = this.props;\n    let mainpanelHtml = [];\n    let notepageHtml = [];\n\n    notepageHtml.push(\n      <>\n        <div className=\"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\">\n          <Rte\n            iscreateactive=\"false\"\n            htmlid=\"notepadedit\"\n            noteid={noteid}\n            createNote={createNote}\n            insertPaint={this.insertPaint}\n            editNote={this.editNote}\n            saveNotes={this.saveNotes}\n            cancelEditNote={this.cancelEditNote}\n            deleteNote={this.deleteNote}\n            isEdit={isEdit}\n            action={action}\n            iseditactive={iseditactive}\n            isdeleteactive={isdeleteactive}\n          />\n          <div>\n            {action === \"create\" || action === \"edit\" ? (\n              <div>\n                <input\n                  defaultValue={recorddata.label}\n                  onChange={this.noteTitleChange}\n                />\n              </div>\n            ) : (\n              <div>{recorddata.label}</div>\n            )}\n          </div>\n\n          <div\n            id=\"notepadedit\"\n            contentEditable=\"true\"\n            style={{\n              width: \"100%\",\n              height: \"100vh\",\n              backgroundColor: \"lightyellow\",\n              color: \"black\",\n              position: \"relative\",\n              overflow: \"auto\",\n            }}\n          >\n            {/* <div className=\"notepadedit-div org-bb\" contenteditable=\"true\"></div> */}\n          </div>\n        </div>\n      </>\n    );\n    mainpanelHtml.push(notepageHtml);\n\n    return <>{mainpanelHtml}</>;\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}