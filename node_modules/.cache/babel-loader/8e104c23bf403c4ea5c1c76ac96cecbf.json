{"ast":null,"code":"var _jsxFileName = \"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/notepadlist.js\";\nimport React, { Component } from \"react\";\nimport Notepad from \"./notepad\";\nimport { getRecorddata } from \"../db/index\";\nimport { // sortArray,\n// fieldTypeHtmltoDBmapping,\ngetLocalData // serverButtonHandler,\n, filterArraybyObject } from \"../js/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass F extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.getServerData = async props => {\n      let {\n        defaultdatafilter,\n        showallrecordsubscribe,\n        parentobjectfilter,\n        showallrecords\n      } = this.props.compprops;\n      let {\n        tablename,\n        defaultsortparam,\n        //  enablelocaldbdata,\n        parentid,\n        //  defaultdatafilter,\n        activeNoteId,\n        action //  showallrecordsubscribe,\n        //  parentobjectfilter,\n        //  showallrecords,\n\n      } = props;\n      console.log(props);\n      let localdata = getLocalData(this.props);\n      let dataParamsresult = {};\n      let rsdataParamsresult = {};\n      let dataParamsBeginswith = \"\";\n      let recordData = [];\n      let recordDataFinal = [];\n      let rsData = []; // let rsDataFinal = [];\n\n      if (showallrecordsubscribe === \"true\" || Object.keys(parentobjectfilter).length > 0 || showallrecords === \"true\") {\n        dataParamsBeginswith = defaultsortparam + \"-\";\n      } else {\n        dataParamsBeginswith = defaultsortparam + \"-\" + parentid;\n      }\n\n      dataParamsresult = await getRecorddata({\n        objectName: tablename,\n        objectData: {},\n        keyConditions: [{\n          field: \"orgname\",\n          value: localdata.orgname,\n          expression: \"=\"\n        }, {\n          field: \"id\",\n          value: dataParamsBeginswith,\n          expression: \"beginswith\"\n        }],\n        filterConditions: []\n      });\n\n      if (dataParamsresult.isSuccess === \"false\") {\n        alert(\"url not found\");\n      } else {\n        recordData = dataParamsresult.dataprops.Items;\n      }\n\n      console.log(recordData);\n\n      if (showallrecordsubscribe === \"true\" || Object.keys(parentobjectfilter).length > 0) {\n        rsdataParamsresult = await getRecorddata({\n          objectName: parentobjectfilter.objectname,\n          objectData: {},\n          keyConditions: [{\n            field: \"orgname\",\n            value: localdata.orgname,\n            expression: \"=\"\n          }, {\n            field: \"id\",\n            value: parentobjectfilter.beginswith + localdata.userid,\n            expression: \"beginswith\"\n          }],\n          filterConditions: [],\n          pageSize: \"\",\n          limit: \"\",\n          exclusiveStartKey: \"\"\n        });\n\n        if (rsdataParamsresult.isSuccess === \"false\") {\n          alert(\"url not found\");\n        } else {\n          rsData = rsdataParamsresult.dataprops.Items;\n          console.log(rsData);\n          let subscribetoIds = [];\n\n          for (let i = 0; i < rsData.length; i++) {\n            let rsDatavar = rsData[i];\n            subscribetoIds.push(rsDatavar[parentobjectfilter.fieldname]);\n          }\n\n          console.log(subscribetoIds);\n\n          for (let j = 0; j < recordData.length; j++) {\n            let recordDataVar = recordData[j];\n\n            if (subscribetoIds.indexOf(recordDataVar[parentobjectfilter.childfieldname]) !== -1 || recordDataVar[parentobjectfilter.childfieldname] === localdata.userid) {\n              recordDataFinal.push(recordData[j]);\n            }\n          }\n        }\n      } else {\n        recordDataFinal = recordData;\n      }\n\n      console.log(recordDataFinal);\n      recordDataFinal = filterArraybyObject({\n        data: recordDataFinal,\n        filter: defaultdatafilter\n      });\n\n      if (recordDataFinal.length > 0) {\n        if (activeNoteId === \"\" && recordDataFinal.length > 0) {\n          activeNoteId = recordDataFinal[0].id;\n        }\n\n        if (action === \"\") {\n          action = recordDataFinal[0] ? \"view\" : \"create\";\n        }\n\n        this.setState({\n          showUI: false\n        }, () => {\n          this.setState({\n            showUI: true,\n            notes: recordDataFinal,\n            activeNoteId: activeNoteId,\n            // createNote: filtereddata[0] ? false : true,\n            action: action\n          });\n        });\n      } else {\n        this.setState({\n          showUI: false\n        }, () => {\n          this.setState({\n            showUI: true,\n            notes: [],\n            activeNoteId: \"\",\n            action: \"create\" //createNote: true,\n\n          });\n        });\n      }\n    };\n\n    this.noteHeadingClk = noteid => {\n      this.setState({\n        showUI: false\n      }, () => {\n        this.setState({\n          showUI: true,\n          activeNoteId: noteid,\n          //  createNote: false,\n          action: \"view\"\n        });\n      });\n    };\n\n    this.addNote = () => {\n      let {\n        notes\n      } = this.state;\n      notes.push({});\n      this.setState({\n        showUI: false\n      }, () => {\n        this.setState({\n          showUI: true,\n          activeNoteId: \"\",\n          action: \"create\"\n        });\n      });\n    };\n\n    this.refreshNote = async props => {\n      let {\n        noteid\n      } = props;\n      let {\n        tablename,\n        defaultsortparam,\n        enablelocaldbdata,\n        parentid //    showallrecordsubscribe,\n        //   parentobjectfilter,\n        //   showallrecords,\n\n      } = this.props.compprops;\n      let serverprops = {\n        tablename: tablename,\n        defaultsortparam: defaultsortparam,\n        enablelocaldbdata: enablelocaldbdata,\n        parentid: parentid,\n        //  defaultdatafilter: defaultdatafilter,\n        activeNoteId: noteid,\n        action: \"view\"\n      };\n      await this.getServerData(serverprops); // this.setState({ showUI: false }, () => {\n      //   this.setState({\n      //     showUI: true,\n      //     activeNoteId: noteid,\n      //     createNote: false,\n      //   });\n      // });\n    };\n\n    this.childnoteHandler = async props => {\n      let {\n        recordid,\n        action\n      } = props;\n      let {\n        tablename,\n        defaultsortparam,\n        enablelocaldbdata,\n        parentid\n      } = this.props.compprops;\n      let serverprops = {\n        tablename: tablename,\n        defaultsortparam: defaultsortparam,\n        enablelocaldbdata: enablelocaldbdata,\n        parentid: parentid,\n        //  defaultdatafilter: defaultdatafilter,\n        activeNoteId: recordid,\n        action: action\n      };\n      await this.getServerData(serverprops); // this.setState({ showUI: false }, () => {\n      //   this.setState({\n      //     showUI: true,\n      //     activeNoteId: noteid,\n      //     createNote: false,\n      //   });\n      // });\n    };\n\n    this.state = {\n      notes: [],\n      activeNoteId: \"\",\n      showUI: false,\n      createNote: false,\n      action: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    let {\n      tablename,\n      comphtmlid,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n      enablelocaldbdata,\n      listdisplaytype,\n      defaultdatafilter,\n      defaultsortparam,\n      parentid,\n      iscreateactive,\n      isviewactive,\n      iseditactive,\n      isdeleteactive\n    } = this.props.compprops;\n    console.log(comphtmlid);\n    console.log(showallrecordsubscribe);\n    console.log(parentobjectfilter);\n    console.log(showallrecords);\n    console.log(listdisplaytype);\n    console.log(defaultdatafilter);\n    console.log(iscreateactive);\n    console.log(isviewactive);\n    console.log(iseditactive);\n    console.log(isdeleteactive);\n    let props = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: \"\",\n      action: \"\"\n    };\n    await this.getServerData(props);\n  }\n\n  render() {\n    let {\n      iscreateactive,\n      //   isviewactive,\n      iseditactive,\n      isdeleteactive\n    } = this.props.compprops;\n    let {\n      notes,\n      activeNoteId,\n      showUI,\n      action\n    } = this.state;\n    console.log(this.props.compprops);\n    let mainpanelHtml = [];\n    let notepageHtml = [];\n    let notesHtml = [];\n\n    for (let i = 0; i < notes.length; i++) {\n      if (notes[i].id === activeNoteId) {\n        notesHtml.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            this.noteHeadingClk(notes[i].id);\n          },\n          className: \"org-greybg\",\n          children: notes[i].label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this));\n      } else {\n        notesHtml.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            this.noteHeadingClk(notes[i].id);\n          },\n          children: notes[i].label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this));\n      }\n    } // if (notes.length > 0 && activeNoteId === \"\") {\n    //   activeNoteId = notes[0].id;\n    // }\n\n\n    notepageHtml.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"org-fr\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-flexbasis-100p org-mflexbasis-10p org-lflexbasis-10p\",\n        children: [notesHtml, action === \"list\" || action === \"view\" ? iscreateactive === \"true\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: this.addNote,\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\",\n        children: showUI === false ? \"\" : /*#__PURE__*/_jsxDEV(Notepad, { ...this.props,\n          noteid: activeNoteId,\n          iseditactive: iseditactive,\n          isdeleteactive: isdeleteactive // createNote={createNote}\n          ,\n          action: action //   refreshNote={this.refreshNote}\n          ,\n          childnoteHandler: this.childnoteHandler //   defaultdatafilter={defaultdatafilter}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this));\n    mainpanelHtml.push(notepageHtml);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: mainpanelHtml\n    }, void 0, false);\n  }\n\n}\n\nexport default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/notepadlist.js"],"names":["React","Component","Notepad","getRecorddata","getLocalData","filterArraybyObject","F","constructor","props","getServerData","defaultdatafilter","showallrecordsubscribe","parentobjectfilter","showallrecords","compprops","tablename","defaultsortparam","parentid","activeNoteId","action","console","log","localdata","dataParamsresult","rsdataParamsresult","dataParamsBeginswith","recordData","recordDataFinal","rsData","Object","keys","length","objectName","objectData","keyConditions","field","value","orgname","expression","filterConditions","isSuccess","alert","dataprops","Items","objectname","beginswith","userid","pageSize","limit","exclusiveStartKey","subscribetoIds","i","rsDatavar","push","fieldname","j","recordDataVar","indexOf","childfieldname","data","filter","id","setState","showUI","notes","noteHeadingClk","noteid","addNote","state","refreshNote","enablelocaldbdata","serverprops","childnoteHandler","recordid","createNote","componentDidMount","comphtmlid","listdisplaytype","iscreateactive","isviewactive","iseditactive","isdeleteactive","render","mainpanelHtml","notepageHtml","notesHtml","label"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Notepad from \"./notepad\";\nimport { getRecorddata } from \"../db/index\";\nimport {\n  // sortArray,\n  // fieldTypeHtmltoDBmapping,\n  getLocalData,\n  // serverButtonHandler,\n  filterArraybyObject,\n} from \"../js/index\";\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      notes: [],\n      activeNoteId: \"\",\n      showUI: false,\n      createNote: false,\n      action: \"\",\n    };\n  }\n\n  async componentDidMount() {\n    let {\n      tablename,\n      comphtmlid,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n      enablelocaldbdata,\n      listdisplaytype,\n      defaultdatafilter,\n      defaultsortparam,\n      parentid,\n      iscreateactive,\n      isviewactive,\n      iseditactive,\n      isdeleteactive,\n    } = this.props.compprops;\n    console.log(comphtmlid);\n    console.log(showallrecordsubscribe);\n    console.log(parentobjectfilter);\n    console.log(showallrecords);\n    console.log(listdisplaytype);\n    console.log(defaultdatafilter);\n    console.log(iscreateactive);\n    console.log(isviewactive);\n    console.log(iseditactive);\n    console.log(isdeleteactive);\n\n    let props = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: \"\",\n      action: \"\",\n    };\n    await this.getServerData(props);\n  }\n\n  getServerData = async (props) => {\n    let {\n      defaultdatafilter,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n    } = this.props.compprops;\n    let {\n      tablename,\n      defaultsortparam,\n      //  enablelocaldbdata,\n      parentid,\n      //  defaultdatafilter,\n      activeNoteId,\n      action,\n      //  showallrecordsubscribe,\n      //  parentobjectfilter,\n      //  showallrecords,\n    } = props;\n    console.log(props);\n    let localdata = getLocalData(this.props);\n\n    let dataParamsresult = {};\n    let rsdataParamsresult = {};\n    let dataParamsBeginswith = \"\";\n    let recordData = [];\n    let recordDataFinal = [];\n    let rsData = [];\n    // let rsDataFinal = [];\n\n    if (\n      showallrecordsubscribe === \"true\" ||\n      Object.keys(parentobjectfilter).length > 0 ||\n      showallrecords === \"true\"\n    ) {\n      dataParamsBeginswith = defaultsortparam + \"-\";\n    } else {\n      dataParamsBeginswith = defaultsortparam + \"-\" + parentid;\n    }\n\n    dataParamsresult = await getRecorddata({\n      objectName: tablename,\n      objectData: {},\n      keyConditions: [\n        { field: \"orgname\", value: localdata.orgname, expression: \"=\" },\n        {\n          field: \"id\",\n          value: dataParamsBeginswith,\n          expression: \"beginswith\",\n        },\n      ],\n      filterConditions: [],\n    });\n    if (dataParamsresult.isSuccess === \"false\") {\n      alert(\"url not found\");\n    } else {\n      recordData = dataParamsresult.dataprops.Items;\n    }\n    console.log(recordData);\n\n    if (\n      showallrecordsubscribe === \"true\" ||\n      Object.keys(parentobjectfilter).length > 0\n    ) {\n      rsdataParamsresult = await getRecorddata({\n        objectName: parentobjectfilter.objectname,\n        objectData: {},\n        keyConditions: [\n          {\n            field: \"orgname\",\n            value: localdata.orgname,\n            expression: \"=\",\n          },\n          {\n            field: \"id\",\n            value: parentobjectfilter.beginswith + localdata.userid,\n            expression: \"beginswith\",\n          },\n        ],\n        filterConditions: [],\n        pageSize: \"\",\n        limit: \"\",\n        exclusiveStartKey: \"\",\n      });\n\n      if (rsdataParamsresult.isSuccess === \"false\") {\n        alert(\"url not found\");\n      } else {\n        rsData = rsdataParamsresult.dataprops.Items;\n        console.log(rsData);\n        let subscribetoIds = [];\n        for (let i = 0; i < rsData.length; i++) {\n          let rsDatavar = rsData[i];\n          subscribetoIds.push(rsDatavar[parentobjectfilter.fieldname]);\n        }\n        console.log(subscribetoIds);\n        for (let j = 0; j < recordData.length; j++) {\n          let recordDataVar = recordData[j];\n          if (\n            subscribetoIds.indexOf(\n              recordDataVar[parentobjectfilter.childfieldname]\n            ) !== -1 ||\n            recordDataVar[parentobjectfilter.childfieldname] ===\n              localdata.userid\n          ) {\n            recordDataFinal.push(recordData[j]);\n          }\n        }\n      }\n    } else {\n      recordDataFinal = recordData;\n    }\n    console.log(recordDataFinal);\n    recordDataFinal = filterArraybyObject({\n      data: recordDataFinal,\n      filter: defaultdatafilter,\n    });\n\n    if (recordDataFinal.length > 0) {\n      if (activeNoteId === \"\" && recordDataFinal.length > 0) {\n        activeNoteId = recordDataFinal[0].id;\n      }\n\n      if (action === \"\") {\n        action = recordDataFinal[0] ? \"view\" : \"create\";\n      }\n\n      this.setState({ showUI: false }, () => {\n        this.setState({\n          showUI: true,\n          notes: recordDataFinal,\n          activeNoteId: activeNoteId,\n          // createNote: filtereddata[0] ? false : true,\n          action: action,\n        });\n      });\n    } else {\n      this.setState({ showUI: false }, () => {\n        this.setState({\n          showUI: true,\n          notes: [],\n          activeNoteId: \"\",\n          action: \"create\",\n          //createNote: true,\n        });\n      });\n    }\n  };\n\n  noteHeadingClk = (noteid) => {\n    this.setState({ showUI: false }, () => {\n      this.setState({\n        showUI: true,\n        activeNoteId: noteid,\n        //  createNote: false,\n        action: \"view\",\n      });\n    });\n  };\n  addNote = () => {\n    let { notes } = this.state;\n    notes.push({});\n    this.setState({ showUI: false }, () => {\n      this.setState({ showUI: true, activeNoteId: \"\", action: \"create\" });\n    });\n  };\n\n  refreshNote = async (props) => {\n    let { noteid } = props;\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n      //    showallrecordsubscribe,\n      //   parentobjectfilter,\n      //   showallrecords,\n    } = this.props.compprops;\n    let serverprops = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: noteid,\n      action: \"view\",\n    };\n\n    await this.getServerData(serverprops);\n    // this.setState({ showUI: false }, () => {\n    //   this.setState({\n    //     showUI: true,\n    //     activeNoteId: noteid,\n    //     createNote: false,\n    //   });\n    // });\n  };\n  childnoteHandler = async (props) => {\n    let { recordid, action } = props;\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n    } = this.props.compprops;\n    let serverprops = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: recordid,\n      action: action,\n    };\n\n    await this.getServerData(serverprops);\n    // this.setState({ showUI: false }, () => {\n    //   this.setState({\n    //     showUI: true,\n    //     activeNoteId: noteid,\n    //     createNote: false,\n    //   });\n    // });\n  };\n\n  render() {\n    let {\n      iscreateactive,\n      //   isviewactive,\n      iseditactive,\n      isdeleteactive,\n    } = this.props.compprops;\n    let { notes, activeNoteId, showUI, action } = this.state;\n    console.log(this.props.compprops);\n    let mainpanelHtml = [];\n    let notepageHtml = [];\n    let notesHtml = [];\n    for (let i = 0; i < notes.length; i++) {\n      if (notes[i].id === activeNoteId) {\n        notesHtml.push(\n          <div\n            onClick={() => {\n              this.noteHeadingClk(notes[i].id);\n            }}\n            className=\"org-greybg\"\n          >\n            {notes[i].label}\n          </div>\n        );\n      } else {\n        notesHtml.push(\n          <div\n            onClick={() => {\n              this.noteHeadingClk(notes[i].id);\n            }}\n          >\n            {notes[i].label}\n          </div>\n        );\n      }\n    }\n    // if (notes.length > 0 && activeNoteId === \"\") {\n    //   activeNoteId = notes[0].id;\n    // }\n\n    notepageHtml.push(\n      <div className=\"org-fr\">\n        <div className=\"org-flexbasis-100p org-mflexbasis-10p org-lflexbasis-10p\">\n          {notesHtml}\n\n          {action === \"list\" || action === \"view\" ? (\n            iscreateactive === \"true\" ? (\n              <div onClick={this.addNote}>+</div>\n            ) : (\n              <></>\n            )\n          ) : (\n            <></>\n          )}\n        </div>\n        <div className=\"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\">\n          {showUI === false ? (\n            \"\"\n          ) : (\n            <Notepad\n              {...this.props}\n              noteid={activeNoteId}\n              iseditactive={iseditactive}\n              isdeleteactive={isdeleteactive}\n              // createNote={createNote}\n              action={action}\n              //   refreshNote={this.refreshNote}\n              childnoteHandler={this.childnoteHandler}\n              //   defaultdatafilter={defaultdatafilter}\n            />\n          )}\n        </div>\n      </div>\n    );\n    mainpanelHtml.push(notepageHtml);\n\n    return <>{mainpanelHtml}</>;\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}