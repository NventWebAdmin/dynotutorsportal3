{"ast":null,"code":"import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var prevX,prevY,currX,currY=0,lineprevX,lineprevY,linecurrX,linecurrY=0,color=\"black\",thickness=2,flag=false,paintArray=[];var F=/*#__PURE__*/function(_Component){_inherits(F,_Component);var _super=_createSuper(F);function F(_props){var _this;_classCallCheck(this,F);_this=_super.call(this,_props);_this.resize=function(){alert();};_this.drawText=function(props){var canvashtmlid=_this.props.compprops.canvashtmlid;console.log(props);var font=props.font,text=props.text,x=props.x,y=props.y;var c=document.getElementById(canvashtmlid);var ctx=c.getContext(\"2d\");ctx.font=font;ctx.fillText(text,x,y);};_this.drawRect=function(){var canvashtmlid=_this.props.compprops.canvashtmlid;var c=document.getElementById(canvashtmlid);var ctx=c.getContext(\"2d\");ctx.font=\"20px Georgia\";ctx.fillText(\"Hello World!\",10,50);};_this.mouseDown=function(e){};_this.mouseDrop=function(e){var _this$props$compprops=_this.props.compprops,canvashtmlid=_this$props$compprops.canvashtmlid,hiddendivhtmlid=_this$props$compprops.hiddendivhtmlid;console.log(\"canvas mouseDrop\");console.log(_this.state);var c=document.getElementById(canvashtmlid);var BB=c.getBoundingClientRect();var cLeft=BB.left;var cTop=BB.top;var dragType=_this.state.dragType;if(dragType===\"text\"){document.getElementById(hiddendivhtmlid).innerHTML=\"\";console.log(e.clientX);console.log(e.clientY);var node=document.createElement(\"input\",{});node.onchange=function(e){_this.inputTextChanged(e);};//  node.innerHTML = \"                                      \";\n// node.contenteditable = \"true\";\nvar inputX=e.clientX-cLeft;var inputY=e.clientY-cTop;node.style=\" position: absolute; left:\"+inputX+\"px;top:\"+inputY+\"px;z-index:11;\";console.log(node.style);document.getElementById(hiddendivhtmlid).appendChild(node);}};_this.mouseMove=function(e){console.log(\"canvas mousemove\");};_this.drawPaintArray=function(props){var data=props.data;var canvashtmlid=_this.props.compprops.canvashtmlid;var canvas=document.getElementById(canvashtmlid);var ctx=canvas.getContext(\"2d\");for(var i=0;i<data.length;i++){//  console.log(data[i]);\nctx.beginPath();ctx.moveTo(data[i].prevX,data[i].prevY);ctx.lineTo(data[i].currX,data[i].currY);ctx.strokeStyle=data[i].color;ctx.lineWidth=data[i].thickness;ctx.stroke();ctx.closePath();}};_this.mouseMoveCanvas2=function(e){var clkType=_this.state.clkType;var canvashtmlid=_this.props.compprops.canvashtmlid;// console.log(\"canvas2 mousemove\" + e.clientX);\n// console.log(\"canvas2 mousemove\" + cLeft);\nvar canvas=document.getElementById(canvashtmlid);var ctx=canvas.getContext(\"2d\");var BB=canvas.getBoundingClientRect();var cLeft=BB.left;var cTop=BB.top;if(e.type===\"mouseout\"){_this.attachtoParent();}if(clkType===\"paint\"){// console.log(\"aaaaa\" + prevX + \"====\" + prevY);\n// console.log(\"aaaaa\" + currX + \"====\" + currY);\nprevX=currX;prevY=currY;currX=e.clientX-cLeft;currY=e.clientY-cTop;if(e.type===\"mousedown\"){flag=true;}if(e.type===\"mouseup\"||e.type===\"mouseout\"){flag=false;if(e.type===\"mouseup\"){_this.autoSavePaintDatatoState();}}if(e.type===\"mousemove\"){if(flag){paintArray.push({prevX:prevX,prevY:prevY,currX:currX,currY:currY,strokeStyle:color,lineWidth:thickness});console.log(paintArray);ctx.beginPath();ctx.moveTo(prevX,prevY);ctx.lineTo(currX,currY);ctx.strokeStyle=color;ctx.lineWidth=thickness;ctx.stroke();ctx.closePath();}}}if(clkType===\"line\"){if(e.type===\"mousedown\"){flag=true;currX=e.clientX-cLeft;currY=e.clientY-cTop;linecurrX=e.clientX-cLeft;linecurrY=e.clientY-cTop;}if(e.type===\"mousemove\"&&flag===true){prevX=currX;prevY=currY;currX=e.clientX-cLeft;currY=e.clientY-cTop;ctx.beginPath();ctx.moveTo(prevX,prevY);ctx.lineTo(currX,currY);ctx.strokeStyle=color;ctx.lineWidth=thickness;ctx.stroke();ctx.closePath();}if(e.type===\"mouseup\"){flag=false;lineprevX=linecurrX;lineprevY=linecurrY;linecurrX=e.clientX-cLeft;linecurrY=e.clientY-cTop;paintArray.push({prevX:lineprevX,prevY:lineprevY,currX:linecurrX,currY:linecurrY,strokeStyle:color,lineWidth:thickness});_this.autoSavePaintDatatoState();}}};_this.reDraw=function(){var drawHistory=_this.state.drawHistory;var canvashtmlid=_this.props.compprops.canvashtmlid;console.log(_this.state);var c=document.getElementById(canvashtmlid);var ctx=c.getContext(\"2d\");ctx.clearRect(0,0,c.width,c.height);// if (defaultdrawHistory) {\n//   for (let i = 0; i < defaultdrawHistory.length; i++) {\n//     let drawHElement = defaultdrawHistory[i];\n//     if (drawHElement.type === \"drawText\") {\n//       this.drawText({\n//         font: drawHElement.font,\n//         text: drawHElement.text,\n//         x: drawHElement.x,\n//         y: drawHElement.y,\n//       });\n//     }\n//     if (drawHElement.type === \"paintarray\") {\n//       this.drawPaintArray({\n//         data: drawHElement.data,\n//       });\n//     }\n//   }\n// }\nfor(var i=0;i<drawHistory.length;i++){var drawHElement=drawHistory[i];if(drawHElement.type===\"drawText\"){_this.drawText({font:drawHElement.font,text:drawHElement.text,x:drawHElement.x,y:drawHElement.y});}if(drawHElement.type===\"paintarray\"){_this.drawPaintArray({data:drawHElement.data});}}};_this.undoLast=function(){var drawHistory=_this.state.drawHistory;drawHistory.pop();_this.setState({drawHistory:drawHistory},function(){_this.reDraw();});};_this.textDrag=function(props){var dragType=props.dragType;_this.setState({dragType:dragType});};_this.allowDrop=function(e){e.preventDefault();};_this.inputTextChanged=function(e){var _this$props$compprops2=_this.props.compprops,canvashtmlid=_this$props$compprops2.canvashtmlid,hiddendivhtmlid=_this$props$compprops2.hiddendivhtmlid;var drawHistory=_this.state.drawHistory;var rect=e.target.getBoundingClientRect();var d=new Date();var time=d.getTime();var c=document.getElementById(canvashtmlid);var BB=c.getBoundingClientRect();var cLeft=BB.left;var cTop=BB.top;drawHistory.push({type:\"drawText\",font:\"20px Georgia\",text:e.target.value,x:rect.left-cLeft,y:rect.top-cTop,time:time});_this.setState({drawHistory:drawHistory},function(){_this.reDraw();});var list=document.getElementById(hiddendivhtmlid);list.removeChild(list.childNodes[0]);};_this.autoSavePaintDatatoState=function(){var drawHistory=_this.state.drawHistory;console.log(paintArray);if(paintArray.length>0){drawHistory.push({type:\"paintarray\",data:paintArray});}paintArray=[];console.log(drawHistory);_this.setState({drawHistory:drawHistory},function(){_this.reDraw();});};_this.attachtoParent=function(){var drawHistory=_this.state.drawHistory;var _this$props$compprops3=_this.props.compprops,canvashtmlparentdivid=_this$props$compprops3.canvashtmlparentdivid,order=_this$props$compprops3.order;// drawHistorytoAttach = drawHistory;\nconsole.log(drawHistory);_this.props.onattach({canvashtmlparentdivid:canvashtmlparentdivid,drawHistory:drawHistory,order:order});};var _drawHistory=[];// drawHistory.push({\n//   prevX: 300,\n//   prevY: 300,\n//   currntX: 400,\n//   currntY: 400,\n//   strokeStyle: \"blue\",\n//   lineWidth: 2,\n// });\n_this.state={//  cWidth: \"\",\n//  cHeight: \"\",\nclkType:\"\",dragType:\"\",drawHistory:_drawHistory,drawHistorytoAttach:[]};return _this;}_createClass(F,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props$compprops4=this.props.compprops,hiddentexthtmlid=_this$props$compprops4.hiddentexthtmlid,defaultdrawHistory=_this$props$compprops4.defaultdrawHistory;console.log(\"1\"+hiddentexthtmlid);console.log(prevProps.compprops.defaultdrawHistory);console.log(defaultdrawHistory);this.reDraw();// if (prevProps && JSON.stringify(this.props) != JSON.stringify(prevProps)) {\n//   console.log(\"1\" + hiddentexthtmlid);\n//   if (\n//     prevProps.compprops.defaultdrawHistory &&\n//     JSON.stringify(prevProps.compprops.defaultdrawHistory) !=\n//       JSON.stringify(defaultdrawHistory)\n//   ) {\n//     console.log(\"2\");\n//     this.reDraw();\n//   }\n// }\n}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props.compprops);var _this$props$compprops5=this.props.compprops,canvashtmlid=_this$props$compprops5.canvashtmlid,defaultdrawHistory=_this$props$compprops5.defaultdrawHistory;var drawHistory=this.state.drawHistory;if(defaultdrawHistory){for(var i=0;i<defaultdrawHistory.length;i++){drawHistory.push(defaultdrawHistory[i]);}}// let drawHistorytoupdate = [];\n// if (defaultdrawHistory && defaultdrawHistory.length > 0) {\n//   drawHistorytoupdate = defaultdrawHistory;\n// }\nvar c=document.getElementById(\"myCanvas\");console.log(c.width);console.log(c.parentElement.clientWidth);c.width=c.parentElement.clientWidth-20;c.height=c.parentElement.clientHeight-20;if(canvashtmlid!==\"\"){c.id=canvashtmlid;}// var BB = c.getBoundingClientRect();\nthis.setState({//  cWidth: c.width,\n//   cHeight: c.height,\ndrawHistory:drawHistory},function(){_this2.attachtoParent();});//   var canvashtmlparentdivid = document.getElementById(\"canvaspar\");\n//  canvashtmlparentdivid.addEventListener(\"resize\", this.resize());\n}},{key:\"render\",value:function render(){var _this3=this;var _this$props$compprops6=this.props.compprops,action=_this$props$compprops6.action,hiddendivhtmlid=_this$props$compprops6.hiddendivhtmlid;console.log(this.state);return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",height:\"100%\",backgroundColor:\"yellow\",position:\"relative\"},contentEditable:\"false\"//id=\"canvaspar\"\n,children:[action===\"create\"||action===\"edit\"?/*#__PURE__*/_jsx(\"div\",{id:hiddendivhtmlid,style:{left:0,top:0,zIndex:10}}):\"\",action===\"create\"||action===\"edit\"?/*#__PURE__*/_jsx(\"span\",{style:{left:0,top:0,zIndex:11},children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fjc-sb\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onDrag:function onDrag(){return _this3.textDrag({dragType:\"text\",clkType:\"\"});},draggable:\"true\",children:\"T\"}),/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onClick:function onClick(){return _this3.setState({clkType:\"paint\"});},draggable:\"true\",children:\"P\"}),/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onClick:function onClick(){return _this3.setState({clkType:\"line\"});},draggable:\"true\",children:\"L\"}),/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onClick:this.undoLast,children:\"Undo\"})]}),/*#__PURE__*/_jsx(\"div\",{})]})}):\"\",/*#__PURE__*/_jsx(\"canvas\",{id:\"myCanvas\",width:\"1000px\",height:\"500px\",style:{backgroundColor:\"lightblue\",left:0,top:0,zIndex:9,width:\"100%\",overflow:\"auto\"//  height: \"500px\",\n}// onMouseDown={this.mouseDown}\n,onDrop:this.mouseDrop,onMouseMove:this.mouseMoveCanvas2,onMouseDown:this.mouseMoveCanvas2,onMouseUp:this.mouseMoveCanvas2,onMouseOut:this.mouseMoveCanvas2,onDragOver:function onDragOver(e){return _this3.allowDrop(e);}})]});}}]);return F;}(Component);export default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/paintpad.js"],"names":["React","Component","prevX","prevY","currX","currY","lineprevX","lineprevY","linecurrX","linecurrY","color","thickness","flag","paintArray","F","props","resize","alert","drawText","canvashtmlid","compprops","console","log","font","text","x","y","c","document","getElementById","ctx","getContext","fillText","drawRect","mouseDown","e","mouseDrop","hiddendivhtmlid","state","BB","getBoundingClientRect","cLeft","left","cTop","top","dragType","innerHTML","clientX","clientY","node","createElement","onchange","inputTextChanged","inputX","inputY","style","appendChild","mouseMove","drawPaintArray","data","canvas","i","length","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","closePath","mouseMoveCanvas2","clkType","type","attachtoParent","autoSavePaintDatatoState","push","reDraw","drawHistory","clearRect","width","height","drawHElement","undoLast","pop","setState","textDrag","allowDrop","preventDefault","rect","target","d","Date","time","getTime","value","list","removeChild","childNodes","canvashtmlparentdivid","order","onattach","drawHistorytoAttach","prevProps","hiddentexthtmlid","defaultdrawHistory","parentElement","clientWidth","clientHeight","id","action","backgroundColor","position","zIndex","overflow"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nvar prevX,\n  prevY,\n  currX,\n  currY = 0,\n  lineprevX,\n  lineprevY,\n  linecurrX,\n  linecurrY = 0,\n  color = \"black\",\n  thickness = 2,\n  flag = false,\n  paintArray = [];\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    let drawHistory = [];\n    // drawHistory.push({\n    //   prevX: 300,\n    //   prevY: 300,\n    //   currntX: 400,\n    //   currntY: 400,\n    //   strokeStyle: \"blue\",\n    //   lineWidth: 2,\n    // });\n\n    this.state = {\n      //  cWidth: \"\",\n      //  cHeight: \"\",\n      clkType: \"\",\n      dragType: \"\",\n      drawHistory: drawHistory,\n      drawHistorytoAttach: [],\n    };\n  }\n  componentDidUpdate(prevProps) {\n    let {\n      //canvashtmlid,\n      hiddentexthtmlid,\n      defaultdrawHistory,\n    } = this.props.compprops;\n    console.log(\"1\" + hiddentexthtmlid);\n    console.log(prevProps.compprops.defaultdrawHistory);\n    console.log(defaultdrawHistory);\n    this.reDraw();\n    // if (prevProps && JSON.stringify(this.props) != JSON.stringify(prevProps)) {\n    //   console.log(\"1\" + hiddentexthtmlid);\n    //   if (\n    //     prevProps.compprops.defaultdrawHistory &&\n    //     JSON.stringify(prevProps.compprops.defaultdrawHistory) !=\n    //       JSON.stringify(defaultdrawHistory)\n    //   ) {\n    //     console.log(\"2\");\n    //     this.reDraw();\n    //   }\n    // }\n  }\n\n  componentDidMount() {\n    console.log(this.props.compprops);\n    let {\n      canvashtmlid,\n      // hiddentexthtmlid,\n      defaultdrawHistory,\n      // editable,\n    } = this.props.compprops;\n    let { drawHistory } = this.state;\n    if (defaultdrawHistory) {\n      for (let i = 0; i < defaultdrawHistory.length; i++) {\n        drawHistory.push(defaultdrawHistory[i]);\n      }\n    }\n    // let drawHistorytoupdate = [];\n    // if (defaultdrawHistory && defaultdrawHistory.length > 0) {\n    //   drawHistorytoupdate = defaultdrawHistory;\n    // }\n    var c = document.getElementById(\"myCanvas\");\n    console.log(c.width);\n    console.log(c.parentElement.clientWidth);\n    c.width = c.parentElement.clientWidth - 20;\n    c.height = c.parentElement.clientHeight - 20;\n    if (canvashtmlid !== \"\") {\n      c.id = canvashtmlid;\n    }\n    // var BB = c.getBoundingClientRect();\n\n    this.setState(\n      {\n        //  cWidth: c.width,\n        //   cHeight: c.height,\n        drawHistory: drawHistory,\n      },\n      () => {\n        this.attachtoParent();\n      }\n    );\n    //   var canvashtmlparentdivid = document.getElementById(\"canvaspar\");\n    //  canvashtmlparentdivid.addEventListener(\"resize\", this.resize());\n  }\n\n  resize = () => {\n    alert();\n  };\n\n  drawText = (props) => {\n    let { canvashtmlid } = this.props.compprops;\n    console.log(props);\n    let { font, text, x, y } = props;\n    var c = document.getElementById(canvashtmlid);\n    var ctx = c.getContext(\"2d\");\n    ctx.font = font;\n    ctx.fillText(text, x, y);\n  };\n\n  drawRect = () => {\n    let { canvashtmlid } = this.props.compprops;\n\n    var c = document.getElementById(canvashtmlid);\n    var ctx = c.getContext(\"2d\");\n    ctx.font = \"20px Georgia\";\n    ctx.fillText(\"Hello World!\", 10, 50);\n  };\n\n  mouseDown = (e) => {};\n  mouseDrop = (e) => {\n    let { canvashtmlid, hiddendivhtmlid } = this.props.compprops;\n    console.log(\"canvas mouseDrop\");\n    console.log(this.state);\n    var c = document.getElementById(canvashtmlid);\n\n    var BB = c.getBoundingClientRect();\n    let cLeft = BB.left;\n    let cTop = BB.top;\n    let { dragType } = this.state;\n    if (dragType === \"text\") {\n      document.getElementById(hiddendivhtmlid).innerHTML = \"\";\n      console.log(e.clientX);\n      console.log(e.clientY);\n\n      var node = document.createElement(\"input\", {});\n      node.onchange = (e) => {\n        this.inputTextChanged(e);\n      };\n      //  node.innerHTML = \"                                      \";\n      // node.contenteditable = \"true\";\n      let inputX = e.clientX - cLeft;\n      let inputY = e.clientY - cTop;\n      node.style =\n        \" position: absolute; left:\" +\n        inputX +\n        \"px;top:\" +\n        inputY +\n        \"px;z-index:11;\";\n      console.log(node.style);\n      document.getElementById(hiddendivhtmlid).appendChild(node);\n    }\n  };\n  mouseMove = (e) => {\n    console.log(\"canvas mousemove\");\n  };\n\n  drawPaintArray = (props) => {\n    let { data } = props;\n    let { canvashtmlid } = this.props.compprops;\n\n    var canvas = document.getElementById(canvashtmlid);\n    var ctx = canvas.getContext(\"2d\");\n    for (let i = 0; i < data.length; i++) {\n      //  console.log(data[i]);\n      ctx.beginPath();\n      ctx.moveTo(data[i].prevX, data[i].prevY);\n      ctx.lineTo(data[i].currX, data[i].currY);\n      ctx.strokeStyle = data[i].color;\n      ctx.lineWidth = data[i].thickness;\n      ctx.stroke();\n      ctx.closePath();\n    }\n  };\n  mouseMoveCanvas2 = (e) => {\n    let { clkType } = this.state;\n    let { canvashtmlid } = this.props.compprops;\n    // console.log(\"canvas2 mousemove\" + e.clientX);\n    // console.log(\"canvas2 mousemove\" + cLeft);\n    var canvas = document.getElementById(canvashtmlid);\n    var ctx = canvas.getContext(\"2d\");\n\n    var BB = canvas.getBoundingClientRect();\n    let cLeft = BB.left;\n    let cTop = BB.top;\n\n    if (e.type === \"mouseout\") {\n      this.attachtoParent();\n    }\n\n    if (clkType === \"paint\") {\n      // console.log(\"aaaaa\" + prevX + \"====\" + prevY);\n      // console.log(\"aaaaa\" + currX + \"====\" + currY);\n      prevX = currX;\n      prevY = currY;\n      currX = e.clientX - cLeft;\n      currY = e.clientY - cTop;\n      if (e.type === \"mousedown\") {\n        flag = true;\n      }\n      if (e.type === \"mouseup\" || e.type === \"mouseout\") {\n        flag = false;\n        if (e.type === \"mouseup\") {\n          this.autoSavePaintDatatoState();\n        }\n      }\n      if (e.type === \"mousemove\") {\n        if (flag) {\n          paintArray.push({\n            prevX: prevX,\n            prevY: prevY,\n            currX: currX,\n            currY: currY,\n            strokeStyle: color,\n            lineWidth: thickness,\n          });\n\n          console.log(paintArray);\n          ctx.beginPath();\n          ctx.moveTo(prevX, prevY);\n          ctx.lineTo(currX, currY);\n          ctx.strokeStyle = color;\n          ctx.lineWidth = thickness;\n          ctx.stroke();\n          ctx.closePath();\n        }\n      }\n    }\n\n    if (clkType === \"line\") {\n      if (e.type === \"mousedown\") {\n        flag = true;\n        currX = e.clientX - cLeft;\n        currY = e.clientY - cTop;\n        linecurrX = e.clientX - cLeft;\n        linecurrY = e.clientY - cTop;\n      }\n      if (e.type === \"mousemove\" && flag === true) {\n        prevX = currX;\n        prevY = currY;\n        currX = e.clientX - cLeft;\n        currY = e.clientY - cTop;\n        ctx.beginPath();\n        ctx.moveTo(prevX, prevY);\n        ctx.lineTo(currX, currY);\n        ctx.strokeStyle = color;\n        ctx.lineWidth = thickness;\n        ctx.stroke();\n        ctx.closePath();\n      }\n      if (e.type === \"mouseup\") {\n        flag = false;\n        lineprevX = linecurrX;\n        lineprevY = linecurrY;\n        linecurrX = e.clientX - cLeft;\n        linecurrY = e.clientY - cTop;\n\n        paintArray.push({\n          prevX: lineprevX,\n          prevY: lineprevY,\n          currX: linecurrX,\n          currY: linecurrY,\n          strokeStyle: color,\n          lineWidth: thickness,\n        });\n\n        this.autoSavePaintDatatoState();\n      }\n    }\n  };\n\n  reDraw = () => {\n    let { drawHistory } = this.state;\n    let {\n      canvashtmlid,\n      //   hiddentexthtmlid,\n      //  defaultdrawHistory,\n    } = this.props.compprops;\n    console.log(this.state);\n    var c = document.getElementById(canvashtmlid);\n\n    var ctx = c.getContext(\"2d\");\n    ctx.clearRect(0, 0, c.width, c.height);\n\n    // if (defaultdrawHistory) {\n    //   for (let i = 0; i < defaultdrawHistory.length; i++) {\n    //     let drawHElement = defaultdrawHistory[i];\n    //     if (drawHElement.type === \"drawText\") {\n    //       this.drawText({\n    //         font: drawHElement.font,\n    //         text: drawHElement.text,\n    //         x: drawHElement.x,\n    //         y: drawHElement.y,\n    //       });\n    //     }\n    //     if (drawHElement.type === \"paintarray\") {\n    //       this.drawPaintArray({\n    //         data: drawHElement.data,\n    //       });\n    //     }\n    //   }\n    // }\n\n    for (let i = 0; i < drawHistory.length; i++) {\n      let drawHElement = drawHistory[i];\n      if (drawHElement.type === \"drawText\") {\n        this.drawText({\n          font: drawHElement.font,\n          text: drawHElement.text,\n          x: drawHElement.x,\n          y: drawHElement.y,\n        });\n      }\n      if (drawHElement.type === \"paintarray\") {\n        this.drawPaintArray({\n          data: drawHElement.data,\n        });\n      }\n    }\n  };\n\n  undoLast = () => {\n    let { drawHistory } = this.state;\n    drawHistory.pop();\n    this.setState({ drawHistory: drawHistory }, () => {\n      this.reDraw();\n    });\n  };\n  textDrag = (props) => {\n    let { dragType } = props;\n    this.setState({ dragType: dragType });\n  };\n\n  allowDrop = (e) => {\n    e.preventDefault();\n  };\n\n  inputTextChanged = (e) => {\n    let { canvashtmlid, hiddendivhtmlid } = this.props.compprops;\n    let { drawHistory } = this.state;\n    var rect = e.target.getBoundingClientRect();\n    let d = new Date();\n\n    let time = d.getTime();\n    var c = document.getElementById(canvashtmlid);\n    var BB = c.getBoundingClientRect();\n    let cLeft = BB.left;\n    let cTop = BB.top;\n\n    drawHistory.push({\n      type: \"drawText\",\n      font: \"20px Georgia\",\n      text: e.target.value,\n      x: rect.left - cLeft,\n      y: rect.top - cTop,\n      time: time,\n    });\n    this.setState({ drawHistory: drawHistory }, () => {\n      this.reDraw();\n    });\n    var list = document.getElementById(hiddendivhtmlid);\n    list.removeChild(list.childNodes[0]);\n  };\n\n  autoSavePaintDatatoState = () => {\n    let { drawHistory } = this.state;\n    console.log(paintArray);\n    if (paintArray.length > 0) {\n      drawHistory.push({ type: \"paintarray\", data: paintArray });\n    }\n    paintArray = [];\n    console.log(drawHistory);\n    this.setState({ drawHistory: drawHistory }, () => {\n      this.reDraw();\n    });\n  };\n\n  attachtoParent = () => {\n    let { drawHistory } = this.state;\n    let {\n      // canvashtmlid,\n      canvashtmlparentdivid,\n      // hiddentexthtmlid,\n      order,\n    } = this.props.compprops;\n    // drawHistorytoAttach = drawHistory;\n    console.log(drawHistory);\n    this.props.onattach({\n      canvashtmlparentdivid: canvashtmlparentdivid,\n      drawHistory: drawHistory,\n      order: order,\n    });\n  };\n\n  render() {\n    let { action, hiddendivhtmlid } = this.props.compprops;\n\n    console.log(this.state);\n\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"yellow\",\n          position: \"relative\",\n        }}\n        contentEditable=\"false\"\n        //id=\"canvaspar\"\n      >\n        {action === \"create\" || action === \"edit\" ? (\n          <div\n            id={hiddendivhtmlid}\n            style={{ left: 0, top: 0, zIndex: 10 }}\n          ></div>\n        ) : (\n          \"\"\n        )}\n\n        {action === \"create\" || action === \"edit\" ? (\n          <span style={{ left: 0, top: 0, zIndex: 11 }}>\n            <div className=\"org-fr org-fjc-sb\">\n              <div>\n                <span\n                  className=\"org-bb esm mf\"\n                  onDrag={() =>\n                    this.textDrag({ dragType: \"text\", clkType: \"\" })\n                  }\n                  draggable=\"true\"\n                >\n                  T\n                </span>\n                <span\n                  className=\"org-bb esm mf\"\n                  onClick={() => this.setState({ clkType: \"paint\" })}\n                  draggable=\"true\"\n                >\n                  P\n                </span>\n                <span\n                  className=\"org-bb esm mf\"\n                  onClick={() => this.setState({ clkType: \"line\" })}\n                  draggable=\"true\"\n                >\n                  L\n                </span>\n\n                <span className=\"org-bb esm mf\" onClick={this.undoLast}>\n                  Undo\n                </span>\n              </div>\n              <div>\n                {/* <span className=\"org-bb esm mf\" onClick={this.attachtoParent}>\n                  Attach\n                </span>\n                <span className=\"org-bb esm mf\" onClick={this.props.onclose}>\n                  close\n                </span> */}\n              </div>\n            </div>\n          </span>\n        ) : (\n          \"\"\n        )}\n        <canvas\n          id=\"myCanvas\"\n          width=\"1000px\"\n          height=\"500px\"\n          style={{\n            backgroundColor: \"lightblue\",\n            left: 0,\n            top: 0,\n            zIndex: 9,\n            width: \"100%\",\n            overflow: \"auto\",\n            //  height: \"500px\",\n          }}\n          // onMouseDown={this.mouseDown}\n          onDrop={this.mouseDrop}\n          onMouseMove={this.mouseMoveCanvas2}\n          onMouseDown={this.mouseMoveCanvas2}\n          onMouseUp={this.mouseMoveCanvas2}\n          onMouseOut={this.mouseMoveCanvas2}\n          onDragOver={(e) => this.allowDrop(e)}\n        ></canvas>\n      </div>\n    );\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}