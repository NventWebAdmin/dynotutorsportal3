{"ast":null,"code":"import _defineProperty from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var prevX,prevY,currX,currY=0,lineprevX,lineprevY,linecurrX,linecurrY=0,color=\"black\",thickness=2,flag=false,paintArray=[];var F=/*#__PURE__*/function(_Component){_inherits(F,_Component);var _super=_createSuper(F);function F(_props){var _this;_classCallCheck(this,F);_this=_super.call(this,_props);_this.resize=function(){alert();};_this.drawText=function(props){var _this$props$compprops=_this.props.compprops,canvashtmlid=_this$props$compprops.canvashtmlid,hiddentexthtmlid=_this$props$compprops.hiddentexthtmlid;console.log(props);var font=props.font,text=props.text,x=props.x,y=props.y;var c=document.getElementById(canvashtmlid);var ctx=c.getContext(\"2d\");ctx.font=font;ctx.fillText(text,x,y);};_this.drawRect=function(){var _this$props$compprops2=_this.props.compprops,canvashtmlid=_this$props$compprops2.canvashtmlid,hiddentexthtmlid=_this$props$compprops2.hiddentexthtmlid;var c=document.getElementById(canvashtmlid);var ctx=c.getContext(\"2d\");ctx.font=\"20px Georgia\";ctx.fillText(\"Hello World!\",10,50);};_this.mouseDown=function(e){};_this.mouseDrop=function(e){var _this$props$compprops3=_this.props.compprops,canvashtmlid=_this$props$compprops3.canvashtmlid,hiddendivhtmlid=_this$props$compprops3.hiddendivhtmlid;console.log(\"canvas mouseDrop\");console.log(_this.state);var c=document.getElementById(canvashtmlid);var BB=c.getBoundingClientRect();var cLeft=BB.left;var cTop=BB.top;var _this$state=_this.state,drawHistory=_this$state.drawHistory,dragType=_this$state.dragType;if(dragType===\"text\"){document.getElementById(hiddendivhtmlid).innerHTML=\"\";console.log(e.clientX);console.log(e.clientY);var node=document.createElement(\"input\",{});node.onchange=function(e){_this.inputTextChanged(e);};//  node.innerHTML = \"                                      \";\n// node.contenteditable = \"true\";\nvar inputX=e.clientX-cLeft;var inputY=e.clientY-cTop;node.style=\" position: absolute; left:\"+inputX+\"px;top:\"+inputY+\"px;z-index:11;\";console.log(node.style);document.getElementById(hiddendivhtmlid).appendChild(node);}};_this.mouseMove=function(e){console.log(\"canvas mousemove\");};_this.drawPaintArray=function(props){var data=props.data;var _this$props$compprops4=_this.props.compprops,canvashtmlid=_this$props$compprops4.canvashtmlid,hiddentexthtmlid=_this$props$compprops4.hiddentexthtmlid;var canvas=document.getElementById(canvashtmlid);var ctx=canvas.getContext(\"2d\");for(var i=0;i<data.length;i++){//  console.log(data[i]);\nctx.beginPath();ctx.moveTo(data[i].prevX,data[i].prevY);ctx.lineTo(data[i].currX,data[i].currY);ctx.strokeStyle=data[i].color;ctx.lineWidth=data[i].thickness;ctx.stroke();ctx.closePath();}};_this.mouseMoveCanvas2=function(e){var clkType=_this.state.clkType;var _this$props$compprops5=_this.props.compprops,canvashtmlid=_this$props$compprops5.canvashtmlid,hiddentexthtmlid=_this$props$compprops5.hiddentexthtmlid;// console.log(\"canvas2 mousemove\" + e.clientX);\n// console.log(\"canvas2 mousemove\" + cLeft);\nvar canvas=document.getElementById(canvashtmlid);var ctx=canvas.getContext(\"2d\");var BB=canvas.getBoundingClientRect();var cLeft=BB.left;var cTop=BB.top;if(e.type==\"mouseout\"){_this.attachtoParent();}if(clkType===\"paint\"){// console.log(\"aaaaa\" + prevX + \"====\" + prevY);\n// console.log(\"aaaaa\" + currX + \"====\" + currY);\nprevX=currX;prevY=currY;currX=e.clientX-cLeft;currY=e.clientY-cTop;if(e.type==\"mousedown\"){flag=true;}if(e.type==\"mouseup\"||e.type==\"mouseout\"){flag=false;if(e.type==\"mouseup\"){_this.autoSavePaintDatatoState();}}if(e.type==\"mousemove\"){if(flag){paintArray.push({prevX:prevX,prevY:prevY,currX:currX,currY:currY,strokeStyle:color,lineWidth:thickness});console.log(paintArray);ctx.beginPath();ctx.moveTo(prevX,prevY);ctx.lineTo(currX,currY);ctx.strokeStyle=color;ctx.lineWidth=thickness;ctx.stroke();ctx.closePath();}}}if(clkType===\"line\"){if(e.type==\"mousedown\"){flag=true;currX=e.clientX-cLeft;currY=e.clientY-cTop;linecurrX=e.clientX-cLeft;linecurrY=e.clientY-cTop;}if(e.type==\"mousemove\"&&flag===true){prevX=currX;prevY=currY;currX=e.clientX-cLeft;currY=e.clientY-cTop;ctx.beginPath();ctx.moveTo(prevX,prevY);ctx.lineTo(currX,currY);ctx.strokeStyle=color;ctx.lineWidth=thickness;ctx.stroke();ctx.closePath();}if(e.type==\"mouseup\"){flag=false;lineprevX=linecurrX;lineprevY=linecurrY;linecurrX=e.clientX-cLeft;linecurrY=e.clientY-cTop;paintArray.push({prevX:lineprevX,prevY:lineprevY,currX:linecurrX,currY:linecurrY,strokeStyle:color,lineWidth:thickness});_this.autoSavePaintDatatoState();}}};_this.reDraw=function(){var drawHistory=_this.state.drawHistory;var _this$props$compprops6=_this.props.compprops,canvashtmlid=_this$props$compprops6.canvashtmlid,hiddentexthtmlid=_this$props$compprops6.hiddentexthtmlid,defaultdrawHistory=_this$props$compprops6.defaultdrawHistory;console.log(_this.state);var c=document.getElementById(canvashtmlid);var ctx=c.getContext(\"2d\");ctx.clearRect(0,0,c.width,c.height);// if (defaultdrawHistory) {\n//   for (let i = 0; i < defaultdrawHistory.length; i++) {\n//     let drawHElement = defaultdrawHistory[i];\n//     if (drawHElement.type === \"drawText\") {\n//       this.drawText({\n//         font: drawHElement.font,\n//         text: drawHElement.text,\n//         x: drawHElement.x,\n//         y: drawHElement.y,\n//       });\n//     }\n//     if (drawHElement.type === \"paintarray\") {\n//       this.drawPaintArray({\n//         data: drawHElement.data,\n//       });\n//     }\n//   }\n// }\nfor(var i=0;i<drawHistory.length;i++){var drawHElement=drawHistory[i];if(drawHElement.type===\"drawText\"){_this.drawText({font:drawHElement.font,text:drawHElement.text,x:drawHElement.x,y:drawHElement.y});}if(drawHElement.type===\"paintarray\"){_this.drawPaintArray({data:drawHElement.data});}}};_this.undoLast=function(){var drawHistory=_this.state.drawHistory;drawHistory.pop();_this.setState({drawHistory:drawHistory},function(){_this.reDraw();});};_this.textDrag=function(props){var dragType=props.dragType;_this.setState({dragType:dragType});};_this.allowDrop=function(e){e.preventDefault();};_this.inputTextChanged=function(e){var _this$props$compprops7=_this.props.compprops,canvashtmlid=_this$props$compprops7.canvashtmlid,hiddendivhtmlid=_this$props$compprops7.hiddendivhtmlid;var _this$state2=_this.state,drawHistory=_this$state2.drawHistory,dragType=_this$state2.dragType;var rect=e.target.getBoundingClientRect();var d=new Date();var time=d.getTime();var c=document.getElementById(canvashtmlid);var BB=c.getBoundingClientRect();var cLeft=BB.left;var cTop=BB.top;drawHistory.push({type:\"drawText\",font:\"20px Georgia\",text:e.target.value,x:rect.left-cLeft,y:rect.top-cTop,time:time});_this.setState({drawHistory:drawHistory},function(){_this.reDraw();});var list=document.getElementById(hiddendivhtmlid);list.removeChild(list.childNodes[0]);};_this.autoSavePaintDatatoState=function(){var drawHistory=_this.state.drawHistory;console.log(paintArray);if(paintArray.length>0){drawHistory.push({type:\"paintarray\",data:paintArray});}paintArray=[];console.log(drawHistory);_this.setState({drawHistory:drawHistory},function(){_this.reDraw();});};_this.attachtoParent=function(){var _this$state3=_this.state,drawHistory=_this$state3.drawHistory,drawHistorytoAttach=_this$state3.drawHistorytoAttach;var _this$props$compprops8=_this.props.compprops,canvashtmlid=_this$props$compprops8.canvashtmlid,canvashtmlparentdivid=_this$props$compprops8.canvashtmlparentdivid,hiddentexthtmlid=_this$props$compprops8.hiddentexthtmlid,order=_this$props$compprops8.order;// drawHistorytoAttach = drawHistory;\nconsole.log(drawHistory);_this.props.onattach({canvashtmlparentdivid:canvashtmlparentdivid,drawHistory:drawHistory,order:order});};var _drawHistory=[];// drawHistory.push({\n//   prevX: 300,\n//   prevY: 300,\n//   currntX: 400,\n//   currntY: 400,\n//   strokeStyle: \"blue\",\n//   lineWidth: 2,\n// });\n_this.state={//  cWidth: \"\",\n//  cHeight: \"\",\nclkType:\"\",dragType:\"\",drawHistory:_drawHistory,drawHistorytoAttach:[]};return _this;}_createClass(F,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props$compprops9=this.props.compprops,canvashtmlid=_this$props$compprops9.canvashtmlid,hiddentexthtmlid=_this$props$compprops9.hiddentexthtmlid,defaultdrawHistory=_this$props$compprops9.defaultdrawHistory;console.log(\"1\"+hiddentexthtmlid);console.log(prevProps.compprops.defaultdrawHistory);console.log(defaultdrawHistory);this.reDraw();// if (prevProps && JSON.stringify(this.props) != JSON.stringify(prevProps)) {\n//   console.log(\"1\" + hiddentexthtmlid);\n//   if (\n//     prevProps.compprops.defaultdrawHistory &&\n//     JSON.stringify(prevProps.compprops.defaultdrawHistory) !=\n//       JSON.stringify(defaultdrawHistory)\n//   ) {\n//     console.log(\"2\");\n//     this.reDraw();\n//   }\n// }\n}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props.compprops);var _this$props$compprops10=this.props.compprops,canvashtmlid=_this$props$compprops10.canvashtmlid,hiddentexthtmlid=_this$props$compprops10.hiddentexthtmlid,defaultdrawHistory=_this$props$compprops10.defaultdrawHistory,editable=_this$props$compprops10.editable;var drawHistory=this.state.drawHistory;if(defaultdrawHistory){for(var i=0;i<defaultdrawHistory.length;i++){drawHistory.push(defaultdrawHistory[i]);}}// let drawHistorytoupdate = [];\n// if (defaultdrawHistory && defaultdrawHistory.length > 0) {\n//   drawHistorytoupdate = defaultdrawHistory;\n// }\nvar c=document.getElementById(\"myCanvas\");console.log(c.width);console.log(c.parentElement.clientWidth);c.width=c.parentElement.clientWidth-20;c.height=c.parentElement.clientHeight-20;if(canvashtmlid!=\"\"){c.id=canvashtmlid;}var BB=c.getBoundingClientRect();this.setState({//  cWidth: c.width,\n//   cHeight: c.height,\ndrawHistory:drawHistory},function(){_this2.attachtoParent();});//   var canvashtmlparentdivid = document.getElementById(\"canvaspar\");\n//  canvashtmlparentdivid.addEventListener(\"resize\", this.resize());\n}},{key:\"render\",value:function render(){var _this3=this;var _this$props$compprops11=this.props.compprops,action=_this$props$compprops11.action,hiddendivhtmlid=_this$props$compprops11.hiddendivhtmlid;console.log(this.state);return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",height:\"100%\",backgroundColor:\"yellow\",position:\"relative\"},contentEditable:\"false\"//id=\"canvaspar\"\n,children:[action===\"create\"||action===\"edit\"?/*#__PURE__*/_jsx(\"div\",{id:hiddendivhtmlid,style:{left:0,top:0,zIndex:10}}):\"\",action===\"create\"||action===\"edit\"?/*#__PURE__*/_jsx(\"span\",{style:{left:0,top:0,zIndex:11},children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr org-fjc-sb\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onDrag:function onDrag(){return _this3.textDrag({dragType:\"text\",clkType:\"\"});},draggable:\"true\",children:\"T\"}),/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onClick:function onClick(){return _this3.setState({clkType:\"paint\"});},draggable:\"true\",children:\"P\"}),/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onClick:function onClick(){return _this3.setState({clkType:\"line\"});},draggable:\"true\",children:\"L\"}),/*#__PURE__*/_jsx(\"span\",{className:\"org-bb esm mf\",onClick:this.undoLast,children:\"Undo\"})]}),/*#__PURE__*/_jsx(\"div\",{})]})}):\"\",/*#__PURE__*/_jsx(\"canvas\",_defineProperty({id:\"myCanvas\",width:\"1000px\",height:\"500px\",style:{backgroundColor:\"lightblue\",left:0,top:0,zIndex:9,width:\"100%\",overflow:\"auto\"//  height: \"500px\",\n}// onMouseDown={this.mouseDown}\n,onDrop:this.mouseDrop,onMouseMove:this.mouseMoveCanvas2,onMouseDown:this.mouseMoveCanvas2,onMouseUp:this.mouseMoveCanvas2,onMouseOut:this.mouseMoveCanvas2,onDragOver:function onDragOver(e){return _this3.allowDrop(e);}},\"onDragOver\",function onDragOver(e){return _this3.allowDrop(e);}))]});}}]);return F;}(Component);export default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/paintpad.js"],"names":["React","Component","prevX","prevY","currX","currY","lineprevX","lineprevY","linecurrX","linecurrY","color","thickness","flag","paintArray","F","props","resize","alert","drawText","compprops","canvashtmlid","hiddentexthtmlid","console","log","font","text","x","y","c","document","getElementById","ctx","getContext","fillText","drawRect","mouseDown","e","mouseDrop","hiddendivhtmlid","state","BB","getBoundingClientRect","cLeft","left","cTop","top","drawHistory","dragType","innerHTML","clientX","clientY","node","createElement","onchange","inputTextChanged","inputX","inputY","style","appendChild","mouseMove","drawPaintArray","data","canvas","i","length","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","closePath","mouseMoveCanvas2","clkType","type","attachtoParent","autoSavePaintDatatoState","push","reDraw","defaultdrawHistory","clearRect","width","height","drawHElement","undoLast","pop","setState","textDrag","allowDrop","preventDefault","rect","target","d","Date","time","getTime","value","list","removeChild","childNodes","drawHistorytoAttach","canvashtmlparentdivid","order","onattach","prevProps","editable","parentElement","clientWidth","clientHeight","id","action","backgroundColor","position","zIndex","overflow"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nvar prevX,\n  prevY,\n  currX,\n  currY = 0,\n  lineprevX,\n  lineprevY,\n  linecurrX,\n  linecurrY = 0,\n  color = \"black\",\n  thickness = 2,\n  flag = false,\n  paintArray = [];\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    let drawHistory = [];\n    // drawHistory.push({\n    //   prevX: 300,\n    //   prevY: 300,\n    //   currntX: 400,\n    //   currntY: 400,\n    //   strokeStyle: \"blue\",\n    //   lineWidth: 2,\n    // });\n\n    this.state = {\n      //  cWidth: \"\",\n      //  cHeight: \"\",\n      clkType: \"\",\n      dragType: \"\",\n      drawHistory: drawHistory,\n      drawHistorytoAttach: [],\n    };\n  }\n  componentDidUpdate(prevProps) {\n    let {\n      canvashtmlid,\n      hiddentexthtmlid,\n      defaultdrawHistory,\n    } = this.props.compprops;\n    console.log(\"1\" + hiddentexthtmlid);\n    console.log(prevProps.compprops.defaultdrawHistory);\n    console.log(defaultdrawHistory);\n    this.reDraw();\n    // if (prevProps && JSON.stringify(this.props) != JSON.stringify(prevProps)) {\n    //   console.log(\"1\" + hiddentexthtmlid);\n    //   if (\n    //     prevProps.compprops.defaultdrawHistory &&\n    //     JSON.stringify(prevProps.compprops.defaultdrawHistory) !=\n    //       JSON.stringify(defaultdrawHistory)\n    //   ) {\n    //     console.log(\"2\");\n    //     this.reDraw();\n    //   }\n    // }\n  }\n\n  componentDidMount() {\n    console.log(this.props.compprops);\n    let {\n      canvashtmlid,\n      hiddentexthtmlid,\n      defaultdrawHistory,\n      editable,\n    } = this.props.compprops;\n    let { drawHistory } = this.state;\n    if (defaultdrawHistory) {\n      for (let i = 0; i < defaultdrawHistory.length; i++) {\n        drawHistory.push(defaultdrawHistory[i]);\n      }\n    }\n    // let drawHistorytoupdate = [];\n    // if (defaultdrawHistory && defaultdrawHistory.length > 0) {\n    //   drawHistorytoupdate = defaultdrawHistory;\n    // }\n    var c = document.getElementById(\"myCanvas\");\n    console.log(c.width);\n    console.log(c.parentElement.clientWidth);\n    c.width = c.parentElement.clientWidth - 20;\n    c.height = c.parentElement.clientHeight - 20;\n    if (canvashtmlid != \"\") {\n      c.id = canvashtmlid;\n    }\n    var BB = c.getBoundingClientRect();\n\n    this.setState(\n      {\n        //  cWidth: c.width,\n        //   cHeight: c.height,\n        drawHistory: drawHistory,\n      },\n      () => {\n        this.attachtoParent();\n      }\n    );\n    //   var canvashtmlparentdivid = document.getElementById(\"canvaspar\");\n    //  canvashtmlparentdivid.addEventListener(\"resize\", this.resize());\n  }\n\n  resize = () => {\n    alert();\n  };\n\n  drawText = (props) => {\n    let { canvashtmlid, hiddentexthtmlid } = this.props.compprops;\n    console.log(props);\n    let { font, text, x, y } = props;\n    var c = document.getElementById(canvashtmlid);\n    var ctx = c.getContext(\"2d\");\n    ctx.font = font;\n    ctx.fillText(text, x, y);\n  };\n\n  drawRect = () => {\n    let { canvashtmlid, hiddentexthtmlid } = this.props.compprops;\n\n    var c = document.getElementById(canvashtmlid);\n    var ctx = c.getContext(\"2d\");\n    ctx.font = \"20px Georgia\";\n    ctx.fillText(\"Hello World!\", 10, 50);\n  };\n\n  mouseDown = (e) => {};\n  mouseDrop = (e) => {\n    let { canvashtmlid, hiddendivhtmlid } = this.props.compprops;\n    console.log(\"canvas mouseDrop\");\n    console.log(this.state);\n    var c = document.getElementById(canvashtmlid);\n\n    var BB = c.getBoundingClientRect();\n    let cLeft = BB.left;\n    let cTop = BB.top;\n    let { drawHistory, dragType } = this.state;\n    if (dragType === \"text\") {\n      document.getElementById(hiddendivhtmlid).innerHTML = \"\";\n      console.log(e.clientX);\n      console.log(e.clientY);\n\n      var node = document.createElement(\"input\", {});\n      node.onchange = (e) => {\n        this.inputTextChanged(e);\n      };\n      //  node.innerHTML = \"                                      \";\n      // node.contenteditable = \"true\";\n      let inputX = e.clientX - cLeft;\n      let inputY = e.clientY - cTop;\n      node.style =\n        \" position: absolute; left:\" +\n        inputX +\n        \"px;top:\" +\n        inputY +\n        \"px;z-index:11;\";\n      console.log(node.style);\n      document.getElementById(hiddendivhtmlid).appendChild(node);\n    }\n  };\n  mouseMove = (e) => {\n    console.log(\"canvas mousemove\");\n  };\n\n  drawPaintArray = (props) => {\n    let { data } = props;\n    let { canvashtmlid, hiddentexthtmlid } = this.props.compprops;\n\n    var canvas = document.getElementById(canvashtmlid);\n    var ctx = canvas.getContext(\"2d\");\n    for (let i = 0; i < data.length; i++) {\n      //  console.log(data[i]);\n      ctx.beginPath();\n      ctx.moveTo(data[i].prevX, data[i].prevY);\n      ctx.lineTo(data[i].currX, data[i].currY);\n      ctx.strokeStyle = data[i].color;\n      ctx.lineWidth = data[i].thickness;\n      ctx.stroke();\n      ctx.closePath();\n    }\n  };\n  mouseMoveCanvas2 = (e) => {\n    let { clkType } = this.state;\n    let { canvashtmlid, hiddentexthtmlid } = this.props.compprops;\n    // console.log(\"canvas2 mousemove\" + e.clientX);\n    // console.log(\"canvas2 mousemove\" + cLeft);\n    var canvas = document.getElementById(canvashtmlid);\n    var ctx = canvas.getContext(\"2d\");\n\n    var BB = canvas.getBoundingClientRect();\n    let cLeft = BB.left;\n    let cTop = BB.top;\n\n    if (e.type == \"mouseout\") {\n      this.attachtoParent();\n    }\n\n    if (clkType === \"paint\") {\n      // console.log(\"aaaaa\" + prevX + \"====\" + prevY);\n      // console.log(\"aaaaa\" + currX + \"====\" + currY);\n      prevX = currX;\n      prevY = currY;\n      currX = e.clientX - cLeft;\n      currY = e.clientY - cTop;\n      if (e.type == \"mousedown\") {\n        flag = true;\n      }\n      if (e.type == \"mouseup\" || e.type == \"mouseout\") {\n        flag = false;\n        if (e.type == \"mouseup\") {\n          this.autoSavePaintDatatoState();\n        }\n      }\n      if (e.type == \"mousemove\") {\n        if (flag) {\n          paintArray.push({\n            prevX: prevX,\n            prevY: prevY,\n            currX: currX,\n            currY: currY,\n            strokeStyle: color,\n            lineWidth: thickness,\n          });\n\n          console.log(paintArray);\n          ctx.beginPath();\n          ctx.moveTo(prevX, prevY);\n          ctx.lineTo(currX, currY);\n          ctx.strokeStyle = color;\n          ctx.lineWidth = thickness;\n          ctx.stroke();\n          ctx.closePath();\n        }\n      }\n    }\n\n    if (clkType === \"line\") {\n      if (e.type == \"mousedown\") {\n        flag = true;\n        currX = e.clientX - cLeft;\n        currY = e.clientY - cTop;\n        linecurrX = e.clientX - cLeft;\n        linecurrY = e.clientY - cTop;\n      }\n      if (e.type == \"mousemove\" && flag === true) {\n        prevX = currX;\n        prevY = currY;\n        currX = e.clientX - cLeft;\n        currY = e.clientY - cTop;\n        ctx.beginPath();\n        ctx.moveTo(prevX, prevY);\n        ctx.lineTo(currX, currY);\n        ctx.strokeStyle = color;\n        ctx.lineWidth = thickness;\n        ctx.stroke();\n        ctx.closePath();\n      }\n      if (e.type == \"mouseup\") {\n        flag = false;\n        lineprevX = linecurrX;\n        lineprevY = linecurrY;\n        linecurrX = e.clientX - cLeft;\n        linecurrY = e.clientY - cTop;\n\n        paintArray.push({\n          prevX: lineprevX,\n          prevY: lineprevY,\n          currX: linecurrX,\n          currY: linecurrY,\n          strokeStyle: color,\n          lineWidth: thickness,\n        });\n\n        this.autoSavePaintDatatoState();\n      }\n    }\n  };\n\n  reDraw = () => {\n    let { drawHistory } = this.state;\n    let {\n      canvashtmlid,\n      hiddentexthtmlid,\n      defaultdrawHistory,\n    } = this.props.compprops;\n    console.log(this.state);\n    var c = document.getElementById(canvashtmlid);\n\n    var ctx = c.getContext(\"2d\");\n    ctx.clearRect(0, 0, c.width, c.height);\n\n    // if (defaultdrawHistory) {\n    //   for (let i = 0; i < defaultdrawHistory.length; i++) {\n    //     let drawHElement = defaultdrawHistory[i];\n    //     if (drawHElement.type === \"drawText\") {\n    //       this.drawText({\n    //         font: drawHElement.font,\n    //         text: drawHElement.text,\n    //         x: drawHElement.x,\n    //         y: drawHElement.y,\n    //       });\n    //     }\n    //     if (drawHElement.type === \"paintarray\") {\n    //       this.drawPaintArray({\n    //         data: drawHElement.data,\n    //       });\n    //     }\n    //   }\n    // }\n\n    for (let i = 0; i < drawHistory.length; i++) {\n      let drawHElement = drawHistory[i];\n      if (drawHElement.type === \"drawText\") {\n        this.drawText({\n          font: drawHElement.font,\n          text: drawHElement.text,\n          x: drawHElement.x,\n          y: drawHElement.y,\n        });\n      }\n      if (drawHElement.type === \"paintarray\") {\n        this.drawPaintArray({\n          data: drawHElement.data,\n        });\n      }\n    }\n  };\n\n  undoLast = () => {\n    let { drawHistory } = this.state;\n    drawHistory.pop();\n    this.setState({ drawHistory: drawHistory }, () => {\n      this.reDraw();\n    });\n  };\n  textDrag = (props) => {\n    let { dragType } = props;\n    this.setState({ dragType: dragType });\n  };\n\n  allowDrop = (e) => {\n    e.preventDefault();\n  };\n\n  inputTextChanged = (e) => {\n    let { canvashtmlid, hiddendivhtmlid } = this.props.compprops;\n    let { drawHistory, dragType } = this.state;\n    var rect = e.target.getBoundingClientRect();\n    let d = new Date();\n\n    let time = d.getTime();\n    var c = document.getElementById(canvashtmlid);\n    var BB = c.getBoundingClientRect();\n    let cLeft = BB.left;\n    let cTop = BB.top;\n\n    drawHistory.push({\n      type: \"drawText\",\n      font: \"20px Georgia\",\n      text: e.target.value,\n      x: rect.left - cLeft,\n      y: rect.top - cTop,\n      time: time,\n    });\n    this.setState({ drawHistory: drawHistory }, () => {\n      this.reDraw();\n    });\n    var list = document.getElementById(hiddendivhtmlid);\n    list.removeChild(list.childNodes[0]);\n  };\n\n  autoSavePaintDatatoState = () => {\n    let { drawHistory } = this.state;\n    console.log(paintArray);\n    if (paintArray.length > 0) {\n      drawHistory.push({ type: \"paintarray\", data: paintArray });\n    }\n    paintArray = [];\n    console.log(drawHistory);\n    this.setState({ drawHistory: drawHistory }, () => {\n      this.reDraw();\n    });\n  };\n\n  attachtoParent = () => {\n    let { drawHistory, drawHistorytoAttach } = this.state;\n    let {\n      canvashtmlid,\n      canvashtmlparentdivid,\n      hiddentexthtmlid,\n      order,\n    } = this.props.compprops;\n    // drawHistorytoAttach = drawHistory;\n    console.log(drawHistory);\n    this.props.onattach({\n      canvashtmlparentdivid: canvashtmlparentdivid,\n      drawHistory: drawHistory,\n      order: order,\n    });\n  };\n\n  render() {\n    let { action, hiddendivhtmlid } = this.props.compprops;\n\n    console.log(this.state);\n\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"yellow\",\n          position: \"relative\",\n        }}\n        contentEditable=\"false\"\n        //id=\"canvaspar\"\n      >\n        {action === \"create\" || action === \"edit\" ? (\n          <div\n            id={hiddendivhtmlid}\n            style={{ left: 0, top: 0, zIndex: 10 }}\n          ></div>\n        ) : (\n          \"\"\n        )}\n\n        {action === \"create\" || action === \"edit\" ? (\n          <span style={{ left: 0, top: 0, zIndex: 11 }}>\n            <div className=\"org-fr org-fjc-sb\">\n              <div>\n                <span\n                  className=\"org-bb esm mf\"\n                  onDrag={() =>\n                    this.textDrag({ dragType: \"text\", clkType: \"\" })\n                  }\n                  draggable=\"true\"\n                >\n                  T\n                </span>\n                <span\n                  className=\"org-bb esm mf\"\n                  onClick={() => this.setState({ clkType: \"paint\" })}\n                  draggable=\"true\"\n                >\n                  P\n                </span>\n                <span\n                  className=\"org-bb esm mf\"\n                  onClick={() => this.setState({ clkType: \"line\" })}\n                  draggable=\"true\"\n                >\n                  L\n                </span>\n\n                <span className=\"org-bb esm mf\" onClick={this.undoLast}>\n                  Undo\n                </span>\n              </div>\n              <div>\n                {/* <span className=\"org-bb esm mf\" onClick={this.attachtoParent}>\n                  Attach\n                </span>\n                <span className=\"org-bb esm mf\" onClick={this.props.onclose}>\n                  close\n                </span> */}\n              </div>\n            </div>\n          </span>\n        ) : (\n          \"\"\n        )}\n        <canvas\n          id=\"myCanvas\"\n          width=\"1000px\"\n          height=\"500px\"\n          style={{\n            backgroundColor: \"lightblue\",\n            left: 0,\n            top: 0,\n            zIndex: 9,\n            width: \"100%\",\n            overflow: \"auto\",\n            //  height: \"500px\",\n          }}\n          // onMouseDown={this.mouseDown}\n          onDrop={this.mouseDrop}\n          onMouseMove={this.mouseMoveCanvas2}\n          onMouseDown={this.mouseMoveCanvas2}\n          onMouseUp={this.mouseMoveCanvas2}\n          onMouseOut={this.mouseMoveCanvas2}\n          onDragOver={(e) => this.allowDrop(e)}\n          onDragOver={(e) => this.allowDrop(e)}\n        ></canvas>\n      </div>\n    );\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}