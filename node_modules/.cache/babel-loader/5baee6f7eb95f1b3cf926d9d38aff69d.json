{"ast":null,"code":"import _objectSpread from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Notepad from\"./notepad\";import{getRecorddata}from\"../db/index\";import{// sortArray,\n// fieldTypeHtmltoDBmapping,\ngetLocalData// serverButtonHandler,\n,filterArraybyObject}from\"../js/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_Component){_inherits(F,_Component);var _super=_createSuper(F);function F(_props){var _this;_classCallCheck(this,F);_this=_super.call(this,_props);_this.getServerData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(props){var _this$props$compprops,defaultdatafilter,showallrecordsubscribe,parentobjectfilter,showallrecords,tablename,defaultsortparam,parentid,activeNoteId,action,localdata,dataParamsresult,rsdataParamsresult,dataParamsBeginswith,recordData,recordDataFinal,rsData,subscribetoIds,i,rsDatavar,j,recordDataVar;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props$compprops=_this.props.compprops,defaultdatafilter=_this$props$compprops.defaultdatafilter,showallrecordsubscribe=_this$props$compprops.showallrecordsubscribe,parentobjectfilter=_this$props$compprops.parentobjectfilter,showallrecords=_this$props$compprops.showallrecords;tablename=props.tablename,defaultsortparam=props.defaultsortparam,parentid=props.parentid,activeNoteId=props.activeNoteId,action=props.action;console.log(props);localdata=getLocalData(_this.props);dataParamsresult={};rsdataParamsresult={};dataParamsBeginswith=\"\";recordData=[];recordDataFinal=[];rsData=[];// let rsDataFinal = [];\nif(showallrecordsubscribe===\"true\"||Object.keys(parentobjectfilter).length>0||showallrecords===\"true\"){dataParamsBeginswith=defaultsortparam+\"-\";}else{dataParamsBeginswith=defaultsortparam+\"-\"+parentid;}_context.next=13;return getRecorddata({objectName:tablename,objectData:{},keyConditions:[{field:\"orgname\",value:localdata.orgname,expression:\"=\"},{field:\"id\",value:dataParamsBeginswith,expression:\"beginswith\"}],filterConditions:[]});case 13:dataParamsresult=_context.sent;if(dataParamsresult.isSuccess===\"false\"){alert(\"url not found\");}else{recordData=dataParamsresult.dataprops.Items;}console.log(recordData);if(!(showallrecordsubscribe===\"true\"||Object.keys(parentobjectfilter).length>0)){_context.next=23;break;}_context.next=19;return getRecorddata({objectName:parentobjectfilter.objectname,objectData:{},keyConditions:[{field:\"orgname\",value:localdata.orgname,expression:\"=\"},{field:\"id\",value:parentobjectfilter.beginswith+localdata.userid,expression:\"beginswith\"}],filterConditions:[],pageSize:\"\",limit:\"\",exclusiveStartKey:\"\"});case 19:rsdataParamsresult=_context.sent;if(rsdataParamsresult.isSuccess===\"false\"){alert(\"url not found\");}else{rsData=rsdataParamsresult.dataprops.Items;console.log(rsData);subscribetoIds=[];for(i=0;i<rsData.length;i++){rsDatavar=rsData[i];subscribetoIds.push(rsDatavar[parentobjectfilter.fieldname]);}console.log(subscribetoIds);for(j=0;j<recordData.length;j++){recordDataVar=recordData[j];if(subscribetoIds.indexOf(recordDataVar[parentobjectfilter.childfieldname])!==-1||recordDataVar[parentobjectfilter.childfieldname]===localdata.userid){recordDataFinal.push(recordData[j]);}}}_context.next=24;break;case 23:recordDataFinal=recordData;case 24:console.log(recordDataFinal);recordDataFinal=filterArraybyObject({data:recordDataFinal,filter:defaultdatafilter});if(recordDataFinal.length>0){if(activeNoteId===\"\"&&recordDataFinal.length>0){activeNoteId=recordDataFinal[0].id;}if(action===\"\"){action=recordDataFinal[0]?\"view\":\"create\";}_this.setState({showUI:false},function(){_this.setState({showUI:true,notes:recordDataFinal,activeNoteId:activeNoteId,// createNote: filtereddata[0] ? false : true,\naction:action});});}else{_this.setState({showUI:false},function(){_this.setState({showUI:true,notes:[],activeNoteId:\"\",action:\"create\"//createNote: true,\n});});}case 27:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.noteHeadingClk=function(noteid){_this.setState({showUI:false},function(){_this.setState({showUI:true,activeNoteId:noteid,//  createNote: false,\naction:\"view\"});});};_this.addNote=function(){var notes=_this.state.notes;notes.push({});_this.setState({showUI:false},function(){_this.setState({showUI:true,activeNoteId:\"\",action:\"create\"});});};_this.refreshNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(props){var noteid,_this$props$compprops2,tablename,defaultsortparam,enablelocaldbdata,parentid,serverprops;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:noteid=props.noteid;_this$props$compprops2=_this.props.compprops,tablename=_this$props$compprops2.tablename,defaultsortparam=_this$props$compprops2.defaultsortparam,enablelocaldbdata=_this$props$compprops2.enablelocaldbdata,parentid=_this$props$compprops2.parentid;serverprops={tablename:tablename,defaultsortparam:defaultsortparam,enablelocaldbdata:enablelocaldbdata,parentid:parentid,//  defaultdatafilter: defaultdatafilter,\nactiveNoteId:noteid,action:\"view\"};_context2.next=5;return _this.getServerData(serverprops);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.childnoteHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(props){var recordid,action,_this$props$compprops3,tablename,defaultsortparam,enablelocaldbdata,parentid,serverprops;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:recordid=props.recordid,action=props.action;_this$props$compprops3=_this.props.compprops,tablename=_this$props$compprops3.tablename,defaultsortparam=_this$props$compprops3.defaultsortparam,enablelocaldbdata=_this$props$compprops3.enablelocaldbdata,parentid=_this$props$compprops3.parentid;serverprops={tablename:tablename,defaultsortparam:defaultsortparam,enablelocaldbdata:enablelocaldbdata,parentid:parentid,//  defaultdatafilter: defaultdatafilter,\nactiveNoteId:recordid,action:action};_context3.next=5;return _this.getServerData(serverprops);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.state={notes:[],activeNoteId:\"\",showUI:false,createNote:false,action:\"\"};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this$props$compprops4,tablename,comphtmlid,showallrecordsubscribe,parentobjectfilter,showallrecords,enablelocaldbdata,listdisplaytype,defaultdatafilter,defaultsortparam,parentid,iscreateactive,isviewactive,iseditactive,isdeleteactive,props;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props$compprops4=this.props.compprops,tablename=_this$props$compprops4.tablename,comphtmlid=_this$props$compprops4.comphtmlid,showallrecordsubscribe=_this$props$compprops4.showallrecordsubscribe,parentobjectfilter=_this$props$compprops4.parentobjectfilter,showallrecords=_this$props$compprops4.showallrecords,enablelocaldbdata=_this$props$compprops4.enablelocaldbdata,listdisplaytype=_this$props$compprops4.listdisplaytype,defaultdatafilter=_this$props$compprops4.defaultdatafilter,defaultsortparam=_this$props$compprops4.defaultsortparam,parentid=_this$props$compprops4.parentid,iscreateactive=_this$props$compprops4.iscreateactive,isviewactive=_this$props$compprops4.isviewactive,iseditactive=_this$props$compprops4.iseditactive,isdeleteactive=_this$props$compprops4.isdeleteactive;console.log(comphtmlid);console.log(showallrecordsubscribe);console.log(parentobjectfilter);console.log(showallrecords);console.log(listdisplaytype);console.log(defaultdatafilter);console.log(iscreateactive);console.log(isviewactive);console.log(iseditactive);console.log(isdeleteactive);props={tablename:tablename,defaultsortparam:defaultsortparam,enablelocaldbdata:enablelocaldbdata,parentid:parentid,//  defaultdatafilter: defaultdatafilter,\nactiveNoteId:\"\",action:\"\"};_context4.next=14;return this.getServerData(props);case 14:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var _this$props$compprops5=this.props.compprops,iscreateactive=_this$props$compprops5.iscreateactive,iseditactive=_this$props$compprops5.iseditactive,isdeleteactive=_this$props$compprops5.isdeleteactive;var _this$state=this.state,notes=_this$state.notes,activeNoteId=_this$state.activeNoteId,showUI=_this$state.showUI,action=_this$state.action;console.log(this.props.compprops);var mainpanelHtml=[];var notepageHtml=[];var notesHtml=[];var _loop=function _loop(i){if(notes[i].id===activeNoteId){notesHtml.push(/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){_this2.noteHeadingClk(notes[i].id);},className:\"org-greybg\",children:notes[i].label}));}else{notesHtml.push(/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){_this2.noteHeadingClk(notes[i].id);},children:notes[i].label}));}};for(var i=0;i<notes.length;i++){_loop(i);}// if (notes.length > 0 && activeNoteId === \"\") {\n//   activeNoteId = notes[0].id;\n// }\nnotepageHtml.push(/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-flexbasis-100p org-mflexbasis-10p org-lflexbasis-10p\",children:[notesHtml,action===\"list\"||action===\"view\"?iscreateactive===\"true\"?/*#__PURE__*/_jsx(\"div\",{onClick:this.addNote,children:\"+\"}):/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\",children:showUI===false?\"\":/*#__PURE__*/_jsx(Notepad,_objectSpread(_objectSpread({},this.props),{},{noteid:activeNoteId,iseditactive:iseditactive,isdeleteactive:isdeleteactive// createNote={createNote}\n,action:action//   refreshNote={this.refreshNote}\n,childnoteHandler:this.childnoteHandler//   defaultdatafilter={defaultdatafilter}\n}))})]}));mainpanelHtml.push(notepageHtml);return/*#__PURE__*/_jsx(_Fragment,{children:mainpanelHtml});}}]);return F;}(Component);export default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/notepadlist.js"],"names":["React","Component","Notepad","getRecorddata","getLocalData","filterArraybyObject","F","props","getServerData","compprops","defaultdatafilter","showallrecordsubscribe","parentobjectfilter","showallrecords","tablename","defaultsortparam","parentid","activeNoteId","action","console","log","localdata","dataParamsresult","rsdataParamsresult","dataParamsBeginswith","recordData","recordDataFinal","rsData","Object","keys","length","objectName","objectData","keyConditions","field","value","orgname","expression","filterConditions","isSuccess","alert","dataprops","Items","objectname","beginswith","userid","pageSize","limit","exclusiveStartKey","subscribetoIds","i","rsDatavar","push","fieldname","j","recordDataVar","indexOf","childfieldname","data","filter","id","setState","showUI","notes","noteHeadingClk","noteid","addNote","state","refreshNote","enablelocaldbdata","serverprops","childnoteHandler","recordid","createNote","comphtmlid","listdisplaytype","iscreateactive","isviewactive","iseditactive","isdeleteactive","mainpanelHtml","notepageHtml","notesHtml","label"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Notepad from \"./notepad\";\nimport { getRecorddata } from \"../db/index\";\nimport {\n  // sortArray,\n  // fieldTypeHtmltoDBmapping,\n  getLocalData,\n  // serverButtonHandler,\n  filterArraybyObject,\n} from \"../js/index\";\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      notes: [],\n      activeNoteId: \"\",\n      showUI: false,\n      createNote: false,\n      action: \"\",\n    };\n  }\n\n  async componentDidMount() {\n    let {\n      tablename,\n      comphtmlid,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n      enablelocaldbdata,\n      listdisplaytype,\n      defaultdatafilter,\n      defaultsortparam,\n      parentid,\n      iscreateactive,\n      isviewactive,\n      iseditactive,\n      isdeleteactive,\n    } = this.props.compprops;\n    console.log(comphtmlid);\n    console.log(showallrecordsubscribe);\n    console.log(parentobjectfilter);\n    console.log(showallrecords);\n    console.log(listdisplaytype);\n    console.log(defaultdatafilter);\n    console.log(iscreateactive);\n    console.log(isviewactive);\n    console.log(iseditactive);\n    console.log(isdeleteactive);\n\n    let props = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: \"\",\n      action: \"\",\n    };\n    await this.getServerData(props);\n  }\n\n  getServerData = async (props) => {\n    let {\n      defaultdatafilter,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n    } = this.props.compprops;\n    let {\n      tablename,\n      defaultsortparam,\n      //  enablelocaldbdata,\n      parentid,\n      //  defaultdatafilter,\n      activeNoteId,\n      action,\n      //  showallrecordsubscribe,\n      //  parentobjectfilter,\n      //  showallrecords,\n    } = props;\n    console.log(props);\n    let localdata = getLocalData(this.props);\n\n    let dataParamsresult = {};\n    let rsdataParamsresult = {};\n    let dataParamsBeginswith = \"\";\n    let recordData = [];\n    let recordDataFinal = [];\n    let rsData = [];\n    // let rsDataFinal = [];\n\n    if (\n      showallrecordsubscribe === \"true\" ||\n      Object.keys(parentobjectfilter).length > 0 ||\n      showallrecords === \"true\"\n    ) {\n      dataParamsBeginswith = defaultsortparam + \"-\";\n    } else {\n      dataParamsBeginswith = defaultsortparam + \"-\" + parentid;\n    }\n\n    dataParamsresult = await getRecorddata({\n      objectName: tablename,\n      objectData: {},\n      keyConditions: [\n        { field: \"orgname\", value: localdata.orgname, expression: \"=\" },\n        {\n          field: \"id\",\n          value: dataParamsBeginswith,\n          expression: \"beginswith\",\n        },\n      ],\n      filterConditions: [],\n    });\n    if (dataParamsresult.isSuccess === \"false\") {\n      alert(\"url not found\");\n    } else {\n      recordData = dataParamsresult.dataprops.Items;\n    }\n    console.log(recordData);\n\n    if (\n      showallrecordsubscribe === \"true\" ||\n      Object.keys(parentobjectfilter).length > 0\n    ) {\n      rsdataParamsresult = await getRecorddata({\n        objectName: parentobjectfilter.objectname,\n        objectData: {},\n        keyConditions: [\n          {\n            field: \"orgname\",\n            value: localdata.orgname,\n            expression: \"=\",\n          },\n          {\n            field: \"id\",\n            value: parentobjectfilter.beginswith + localdata.userid,\n            expression: \"beginswith\",\n          },\n        ],\n        filterConditions: [],\n        pageSize: \"\",\n        limit: \"\",\n        exclusiveStartKey: \"\",\n      });\n\n      if (rsdataParamsresult.isSuccess === \"false\") {\n        alert(\"url not found\");\n      } else {\n        rsData = rsdataParamsresult.dataprops.Items;\n        console.log(rsData);\n        let subscribetoIds = [];\n        for (let i = 0; i < rsData.length; i++) {\n          let rsDatavar = rsData[i];\n          subscribetoIds.push(rsDatavar[parentobjectfilter.fieldname]);\n        }\n        console.log(subscribetoIds);\n        for (let j = 0; j < recordData.length; j++) {\n          let recordDataVar = recordData[j];\n          if (\n            subscribetoIds.indexOf(\n              recordDataVar[parentobjectfilter.childfieldname]\n            ) !== -1 ||\n            recordDataVar[parentobjectfilter.childfieldname] ===\n              localdata.userid\n          ) {\n            recordDataFinal.push(recordData[j]);\n          }\n        }\n      }\n    } else {\n      recordDataFinal = recordData;\n    }\n    console.log(recordDataFinal);\n    recordDataFinal = filterArraybyObject({\n      data: recordDataFinal,\n      filter: defaultdatafilter,\n    });\n\n    if (recordDataFinal.length > 0) {\n      if (activeNoteId === \"\" && recordDataFinal.length > 0) {\n        activeNoteId = recordDataFinal[0].id;\n      }\n\n      if (action === \"\") {\n        action = recordDataFinal[0] ? \"view\" : \"create\";\n      }\n\n      this.setState({ showUI: false }, () => {\n        this.setState({\n          showUI: true,\n          notes: recordDataFinal,\n          activeNoteId: activeNoteId,\n          // createNote: filtereddata[0] ? false : true,\n          action: action,\n        });\n      });\n    } else {\n      this.setState({ showUI: false }, () => {\n        this.setState({\n          showUI: true,\n          notes: [],\n          activeNoteId: \"\",\n          action: \"create\",\n          //createNote: true,\n        });\n      });\n    }\n  };\n\n  noteHeadingClk = (noteid) => {\n    this.setState({ showUI: false }, () => {\n      this.setState({\n        showUI: true,\n        activeNoteId: noteid,\n        //  createNote: false,\n        action: \"view\",\n      });\n    });\n  };\n  addNote = () => {\n    let { notes } = this.state;\n    notes.push({});\n    this.setState({ showUI: false }, () => {\n      this.setState({ showUI: true, activeNoteId: \"\", action: \"create\" });\n    });\n  };\n\n  refreshNote = async (props) => {\n    let { noteid } = props;\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n      //    showallrecordsubscribe,\n      //   parentobjectfilter,\n      //   showallrecords,\n    } = this.props.compprops;\n    let serverprops = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: noteid,\n      action: \"view\",\n    };\n\n    await this.getServerData(serverprops);\n    // this.setState({ showUI: false }, () => {\n    //   this.setState({\n    //     showUI: true,\n    //     activeNoteId: noteid,\n    //     createNote: false,\n    //   });\n    // });\n  };\n  childnoteHandler = async (props) => {\n    let { recordid, action } = props;\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n    } = this.props.compprops;\n    let serverprops = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: recordid,\n      action: action,\n    };\n\n    await this.getServerData(serverprops);\n    // this.setState({ showUI: false }, () => {\n    //   this.setState({\n    //     showUI: true,\n    //     activeNoteId: noteid,\n    //     createNote: false,\n    //   });\n    // });\n  };\n\n  render() {\n    let {\n      iscreateactive,\n      //   isviewactive,\n      iseditactive,\n      isdeleteactive,\n    } = this.props.compprops;\n    let { notes, activeNoteId, showUI, action } = this.state;\n    console.log(this.props.compprops);\n    let mainpanelHtml = [];\n    let notepageHtml = [];\n    let notesHtml = [];\n    for (let i = 0; i < notes.length; i++) {\n      if (notes[i].id === activeNoteId) {\n        notesHtml.push(\n          <div\n            onClick={() => {\n              this.noteHeadingClk(notes[i].id);\n            }}\n            className=\"org-greybg\"\n          >\n            {notes[i].label}\n          </div>\n        );\n      } else {\n        notesHtml.push(\n          <div\n            onClick={() => {\n              this.noteHeadingClk(notes[i].id);\n            }}\n          >\n            {notes[i].label}\n          </div>\n        );\n      }\n    }\n    // if (notes.length > 0 && activeNoteId === \"\") {\n    //   activeNoteId = notes[0].id;\n    // }\n\n    notepageHtml.push(\n      <div className=\"org-fr\">\n        <div className=\"org-flexbasis-100p org-mflexbasis-10p org-lflexbasis-10p\">\n          {notesHtml}\n\n          {action === \"list\" || action === \"view\" ? (\n            iscreateactive === \"true\" ? (\n              <div onClick={this.addNote}>+</div>\n            ) : (\n              <></>\n            )\n          ) : (\n            <></>\n          )}\n        </div>\n        <div className=\"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\">\n          {showUI === false ? (\n            \"\"\n          ) : (\n            <Notepad\n              {...this.props}\n              noteid={activeNoteId}\n              iseditactive={iseditactive}\n              isdeleteactive={isdeleteactive}\n              // createNote={createNote}\n              action={action}\n              //   refreshNote={this.refreshNote}\n              childnoteHandler={this.childnoteHandler}\n              //   defaultdatafilter={defaultdatafilter}\n            />\n          )}\n        </div>\n      </div>\n    );\n    mainpanelHtml.push(notepageHtml);\n\n    return <>{mainpanelHtml}</>;\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}