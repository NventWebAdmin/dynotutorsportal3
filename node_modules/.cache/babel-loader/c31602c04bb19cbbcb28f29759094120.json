{"ast":null,"code":"var _jsxFileName = \"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/mailnewaction.js\";\nimport React, { Component } from \"react\";\nimport { GetGoogleIcon } from \"./icons\";\nimport Rteditor from \"./richtexteditor\";\nimport { getRecorddata, createRecord, bulkcreateRecord } from \"../db/index\";\nimport { sortArray, fieldTypeHtmltoDBmapping, getLocalData, serverButtonHandler } from \"../js/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n\n    this.sendMail = async () => {\n      let localdata = getLocalData(this.props);\n      console.log(localdata);\n      let {\n        orgname,\n        userid\n      } = localdata;\n      let {\n        tomailselectedarray,\n        subject\n      } = this.state;\n      var d = new Date();\n      var n = d.getTime();\n      let body = document.getElementById(\"mailnewactiondiv\").innerHTML;\n      console.log(tomailselectedarray);\n\n      if (tomailselectedarray.length == 0) {\n        alert(\"To field cannot be empty\");\n      } else if (subject == \"\" || subject == undefined) {\n        alert(\"Subject field cannot be empty\");\n      } else {\n        console.log(tomailselectedarray);\n        let recorddata = {\n          orgname: orgname,\n          id: \"mail-\" + userid + n,\n          from: userid,\n          to: tomailselectedarray.toString(),\n          subject: subject,\n          body: body\n        };\n        console.log(recorddata);\n        let result = await createRecord({\n          objectName: \"orgmail\",\n          objectData: recorddata\n        });\n\n        if (result.isSuccess === \"false\") {\n          alert(result.message);\n        } else {\n          console.log(recorddata);\n          let msgObj = {\n            messagetype: \"mailsent-notify-recipitent\",\n            message: \"\",\n            orgname: orgname,\n            id: \"mail-\" + userid + n,\n            from: userid,\n            userid: userid,\n            to: tomailselectedarray.toString(),\n            subject: subject,\n            body: body\n          };\n          console.log(JSON.stringify(msgObj));\n          this.props.onmailsent({\n            msgObj: msgObj\n          });\n        }\n      }\n    };\n\n    this.handleChange = e => {\n      if (e.target.name == \"subject\") {\n        this.setState({\n          subject: e.target.value\n        });\n      }\n\n      if (e.target.name == \"mailnnewactionto\") {\n        if (e.target.value.includes(\"@\")) {\n          this.setState({\n            tomailsearchArray: [{\n              label: \"pradeep\",\n              name: \"pradeep\"\n            }, {\n              label: \"kishan\",\n              name: \"kishan\"\n            }, {\n              label: \"mom\",\n              name: \"mom\"\n            }],\n            tomail: e.target.value\n          });\n          document.getElementById(\"mailnnewactiontolist\").style.display = \"block\";\n        } else {\n          document.getElementById(\"mailnnewactiontolist\").style.display = \"none\";\n        }\n      }\n    };\n\n    this.selectUser = x => {\n      let tomailselectedarray = this.state.tomailselectedarray;\n\n      if (!tomailselectedarray.includes(x)) {\n        tomailselectedarray.push(x);\n      }\n\n      let tomail = this.state.tomail;\n      tomail = tomail.replace(\"@\", \"\");\n      this.setState({\n        tomailselectedarray: tomailselectedarray,\n        tomail: \"\"\n      });\n      console.log(tomailselectedarray);\n      document.getElementById(\"mailnnewactiontolist\").style.display = \"none\";\n    };\n\n    this.cancelMail = () => {\n      this.props.backHandler({\n        msgObj: {}\n      });\n    };\n\n    this.removeselecteduser = x => {\n      let tomailselectedarray = this.state.tomailselectedarray;\n      let temparray = [];\n\n      for (let i = 0; i < tomailselectedarray.length; i++) {\n        if (tomailselectedarray[i] != x) temparray.push(tomailselectedarray[i]);\n      }\n\n      this.setState({\n        tomailselectedarray: temparray\n      });\n    };\n\n    this.state = {\n      tomailsearchArray: [],\n      attherateindex: \"0\",\n      tomail: \"\",\n      tomailselectedarray: [],\n      subject: \"\"\n    };\n  }\n\n  render() {\n    console.log(this.props);\n    let {\n      tomailsearchArray,\n      tomail,\n      tomailselectedarray\n    } = this.state;\n    let tomailsearchArrayHoverHtml = [];\n    let tomailselectedarrayHtml = [];\n\n    for (let i = 0; i < tomailsearchArray.length; i++) {\n      tomailsearchArrayHoverHtml.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: \"1px solid black\",\n          padding: \"5px\"\n        },\n        onClick: () => {\n          this.selectUser(tomailsearchArray[i].name);\n        },\n        children: tomailsearchArray[i].label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this));\n    }\n\n    for (let i = 0; i < tomailselectedarray.length; i++) {\n      tomailselectedarrayHtml.push( /*#__PURE__*/_jsxDEV(\"span\", {\n        children: tomailselectedarray[i]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 36\n      }, this));\n      tomailselectedarrayHtml.push( /*#__PURE__*/_jsxDEV(GetGoogleIcon, {\n        name: \"close\",\n        onClick: () => this.removeselecteduser(tomailselectedarray[i])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this));\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-fr\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: \"10%\",\n            display: \"inline-block\",\n            textAlign: \"center\"\n          },\n          children: \"To\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"relative\",\n            width: \"90%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: {\n                width: \"100%\"\n              },\n              onChange: this.handleChange,\n              name: \"mailnnewactionto\",\n              value: this.state.tomail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"absolute\",\n              zIndex: 1,\n              top: \"100%\",\n              left: 0,\n              backgroundColor: \"red\",\n              display: \"none\"\n            },\n            id: \"mailnnewactiontolist\",\n            children: tomailsearchArrayHoverHtml\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-fr\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: \"10%\",\n            display: \"inline-block\",\n            textAlign: \"center\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"org-fr org-fai-c \",\n          children: tomailselectedarrayHtml\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-fr\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: \"10%\",\n            display: \"inline-block\",\n            textAlign: \"center\"\n          },\n          children: \"Subject\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"subject\",\n          style: {\n            width: \"90%\"\n          },\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-fr\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: \"10%\",\n            display: \"inline-block\",\n            textAlign: \"center\"\n          },\n          name: \"subject\",\n          children: \"Body\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"90%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\",\n              height: \"50vh\",\n              backgroundColor: \"white\",\n              color: \"black\"\n            },\n            contenteditable: \"true\",\n            id: \"mailnewactiondiv\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-fr\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: \"10%\",\n            display: \"inline-block\",\n            textAlign: \"center\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"90%\"\n          },\n          type: \"file\",\n          multiple: \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"org-fr\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: \"10%\",\n            display: \"inline-block\",\n            textAlign: \"center\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          contenteditable: \"true\",\n          onClick: this.sendMail,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.cancelMail,\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Rteditor, {\n          htmlid: \"mailnewactiondiv\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/mailnewaction.js"],"names":["React","Component","GetGoogleIcon","Rteditor","getRecorddata","createRecord","bulkcreateRecord","sortArray","fieldTypeHtmltoDBmapping","getLocalData","serverButtonHandler","F","constructor","props","sendMail","localdata","console","log","orgname","userid","tomailselectedarray","subject","state","d","Date","n","getTime","body","document","getElementById","innerHTML","length","alert","undefined","recorddata","id","from","to","toString","result","objectName","objectData","isSuccess","message","msgObj","messagetype","JSON","stringify","onmailsent","handleChange","e","target","name","setState","value","includes","tomailsearchArray","label","tomail","style","display","selectUser","x","push","replace","cancelMail","backHandler","removeselecteduser","temparray","i","attherateindex","render","tomailsearchArrayHoverHtml","tomailselectedarrayHtml","border","padding","width","textAlign","position","zIndex","top","left","backgroundColor","height","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { GetGoogleIcon } from \"./icons\";\nimport Rteditor from \"./richtexteditor\";\nimport { getRecorddata, createRecord, bulkcreateRecord } from \"../db/index\";\n\nimport {\n  sortArray,\n  fieldTypeHtmltoDBmapping,\n  getLocalData,\n  serverButtonHandler,\n} from \"../js/index\";\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tomailsearchArray: [],\n      attherateindex: \"0\",\n      tomail: \"\",\n      tomailselectedarray: [],\n      subject: \"\",\n    };\n  }\n  sendMail = async () => {\n    let localdata = getLocalData(this.props);\n    console.log(localdata);\n    let { orgname, userid } = localdata;\n    let { tomailselectedarray, subject } = this.state;\n    var d = new Date();\n    var n = d.getTime();\n\n    let body = document.getElementById(\"mailnewactiondiv\").innerHTML;\n    console.log(tomailselectedarray);\n    if (tomailselectedarray.length == 0) {\n      alert(\"To field cannot be empty\");\n    } else if (subject == \"\" || subject == undefined) {\n      alert(\"Subject field cannot be empty\");\n    } else {\n      console.log(tomailselectedarray);\n      let recorddata = {\n        orgname: orgname,\n        id: \"mail-\" + userid + n,\n        from: userid,\n        to: tomailselectedarray.toString(),\n        subject: subject,\n        body: body,\n      };\n      console.log(recorddata);\n      let result = await createRecord({\n        objectName: \"orgmail\",\n        objectData: recorddata,\n      });\n      if (result.isSuccess === \"false\") {\n        alert(result.message);\n      } else {\n        console.log(recorddata);\n        let msgObj = {\n          messagetype: \"mailsent-notify-recipitent\",\n          message: \"\",\n          orgname: orgname,\n          id: \"mail-\" + userid + n,\n          from: userid,\n          userid: userid,\n          to: tomailselectedarray.toString(),\n          subject: subject,\n          body: body,\n        };\n        console.log(JSON.stringify(msgObj));\n        this.props.onmailsent({ msgObj: msgObj });\n      }\n    }\n  };\n  handleChange = (e) => {\n    if (e.target.name == \"subject\") {\n      this.setState({ subject: e.target.value });\n    }\n    if (e.target.name == \"mailnnewactionto\") {\n      if (e.target.value.includes(\"@\")) {\n        this.setState({\n          tomailsearchArray: [\n            { label: \"pradeep\", name: \"pradeep\" },\n            { label: \"kishan\", name: \"kishan\" },\n            { label: \"mom\", name: \"mom\" },\n          ],\n          tomail: e.target.value,\n        });\n        document.getElementById(\"mailnnewactiontolist\").style.display = \"block\";\n      } else {\n        document.getElementById(\"mailnnewactiontolist\").style.display = \"none\";\n      }\n    }\n  };\n\n  selectUser = (x) => {\n    let tomailselectedarray = this.state.tomailselectedarray;\n    if (!tomailselectedarray.includes(x)) {\n      tomailselectedarray.push(x);\n    }\n\n    let tomail = this.state.tomail;\n    tomail = tomail.replace(\"@\", \"\");\n    this.setState({ tomailselectedarray: tomailselectedarray, tomail: \"\" });\n    console.log(tomailselectedarray);\n    document.getElementById(\"mailnnewactiontolist\").style.display = \"none\";\n  };\n\n  cancelMail = () => {\n    this.props.backHandler({ msgObj: {} });\n  };\n\n  removeselecteduser = (x) => {\n    let tomailselectedarray = this.state.tomailselectedarray;\n    let temparray = [];\n    for (let i = 0; i < tomailselectedarray.length; i++) {\n      if (tomailselectedarray[i] != x) temparray.push(tomailselectedarray[i]);\n    }\n    this.setState({ tomailselectedarray: temparray });\n  };\n\n  render() {\n    console.log(this.props);\n\n    let { tomailsearchArray, tomail, tomailselectedarray } = this.state;\n    let tomailsearchArrayHoverHtml = [];\n    let tomailselectedarrayHtml = [];\n    for (let i = 0; i < tomailsearchArray.length; i++) {\n      tomailsearchArrayHoverHtml.push(\n        <div\n          style={{ border: \"1px solid black\", padding: \"5px\" }}\n          onClick={() => {\n            this.selectUser(tomailsearchArray[i].name);\n          }}\n        >\n          {tomailsearchArray[i].label}\n        </div>\n      );\n    }\n    for (let i = 0; i < tomailselectedarray.length; i++) {\n      tomailselectedarrayHtml.push(<span>{tomailselectedarray[i]}</span>);\n      tomailselectedarrayHtml.push(\n        <GetGoogleIcon\n          name=\"close\"\n          onClick={() => this.removeselecteduser(tomailselectedarray[i])}\n        />\n      );\n    }\n\n    return (\n      <>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          >\n            To\n          </span>\n          <div style={{ position: \"relative\", width: \"90%\" }}>\n            <div>\n              <input\n                style={{ width: \"100%\" }}\n                onChange={this.handleChange}\n                name=\"mailnnewactionto\"\n                value={this.state.tomail}\n              />\n            </div>\n\n            <div\n              style={{\n                position: \"absolute\",\n                zIndex: 1,\n                top: \"100%\",\n                left: 0,\n                backgroundColor: \"red\",\n                display: \"none\",\n              }}\n              id=\"mailnnewactiontolist\"\n            >\n              {tomailsearchArrayHoverHtml}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          ></span>\n          <div\n            className=\"org-fr org-fai-c\n        \"\n          >\n            {tomailselectedarrayHtml}\n          </div>\n        </div>\n\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          >\n            Subject\n          </span>\n          <input\n            name=\"subject\"\n            style={{ width: \"90%\" }}\n            onChange={this.handleChange}\n          />\n        </div>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n            name=\"subject\"\n          >\n            Body\n          </span>\n          <div style={{ width: \"90%\" }}>\n            <div\n              style={{\n                width: \"100%\",\n                height: \"50vh\",\n                backgroundColor: \"white\",\n                color: \"black\",\n              }}\n              contenteditable=\"true\"\n              id=\"mailnewactiondiv\"\n            ></div>\n          </div>\n        </div>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          ></span>\n          <input style={{ width: \"90%\" }} type=\"file\" multiple=\"true\" />\n        </div>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          ></span>\n          <button contenteditable=\"true\" onClick={this.sendMail}>\n            Send\n          </button>\n          <button onClick={this.cancelMail}>Back</button>\n\n          <Rteditor htmlid=\"mailnewactiondiv\" />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}