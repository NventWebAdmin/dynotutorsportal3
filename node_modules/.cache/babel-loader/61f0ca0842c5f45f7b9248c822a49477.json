{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{sortArray,fieldTypeHtmltoDBmapping,getLocalData,serverButtonHandler}from\"../js/index\";import{GetGoogleIcon,GetFontAwesomeIcon,GetBoostrapIcon,GetLocalIcon}from\"./icons\";import{getRecorddata,createRecord,bulkcreateRecord}from\"../db/index\";// events\n// update tabpanel tabs\n//  this.setState({\n//   datasyncEventprops: {\n//     name: \"addtab\",\n//     data: { label: \"newlabel\", name: \"newname\" },\n//     componenthtmlid: \"all\",\n//   },\n// });\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_React$Component){_inherits(F,_React$Component);var _super=_createSuper(F);function F(props){var _this;_classCallCheck(this,F);_this=_super.call(this,props);_this.componentDidUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(prevProps){var _this$props$compprops,orgname,userprofileid,userid,recordid,tablename,actionname,tabactionid,lastcloseiconactionid,listnviewhomeactionid,componenthtmlid,datasyncEventprops,addedtabdetail,tabsObj,addedtaborder,activetab;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props$compprops=_this.props.compprops,orgname=_this$props$compprops.orgname,userprofileid=_this$props$compprops.userprofileid,userid=_this$props$compprops.userid,recordid=_this$props$compprops.recordid,tablename=_this$props$compprops.tablename,actionname=_this$props$compprops.actionname,tabactionid=_this$props$compprops.tabactionid,lastcloseiconactionid=_this$props$compprops.lastcloseiconactionid,listnviewhomeactionid=_this$props$compprops.listnviewhomeactionid;componenthtmlid=_this.props.componenthtmlid;console.log(_this.props);datasyncEventprops=_this.props.datasyncEventprops;if(prevProps&&JSON.stringify(_this.props.datasyncEventprops)!=JSON.stringify(prevProps.datasyncEventprops)){if(datasyncEventprops.componenthtmlid==\"all\"||datasyncEventprops.componenthtmlid==componenthtmlid){if(datasyncEventprops.name==\"addtab\"){addedtabdetail=datasyncEventprops.data;tabsObj=JSON.parse(localStorage.getItem(\"listnviewpanel-\"+tablename));addedtaborder=Object.keys(tabsObj).length+1;tabsObj[addedtabdetail.name.toLowerCase()]={order:addedtaborder,label:addedtabdetail.label,name:addedtabdetail.name.toLowerCase(),action:{type:\"layoutaction\",id:tabactionid}};localStorage.setItem(\"listnviewpanel-\"+tablename,JSON.stringify(tabsObj));activetab=\"\";if(recordid==null){activetab=\"listhome\";}else{activetab=recordid;}_this.setComponentData(tabsObj,activetab);}}}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.setComponentData=function(tabs,activetab){console.log(tabs);var tabsHtml=[];var dataprops=tabs;var activeTabName=activetab;// sort tabs by order\nvar datapropsarray=[];var datapropsarraysorted=[];for(var i in dataprops){datapropsarray.push(dataprops[i]);}datapropsarraysorted=sortArray(datapropsarray,\"order\",\"integer\");// order 0 activetab\nif(activeTabName==\"\"||activeTabName==undefined){activeTabName=datapropsarraysorted[0].name;}// iterate over tabs\nfor(var _i=0;_i<datapropsarraysorted.length;_i++){console.log(datapropsarraysorted[_i]);console.log(activeTabName);tabsHtml.push(/*#__PURE__*/_jsx(_Fragment,{children:datapropsarraysorted[_i].name==\"listhome\"?/*#__PURE__*/_jsx(\"div\",{className:datapropsarraysorted[_i].name==activeTabName?\"sp activeblack\":\"sp\",\"data-name\":datapropsarraysorted[_i].name,\"data-label\":datapropsarraysorted[_i].label,\"data-type\":datapropsarraysorted[_i].type,\"data-actionid\":datapropsarraysorted[_i].action?datapropsarraysorted[_i].action.id:\"\",onClick:_this.onTabOpen,children:\"home\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:datapropsarraysorted[_i].name==activeTabName?\"sp activeblack\":\"sp\",\"data-name\":datapropsarraysorted[_i].name,\"data-label\":datapropsarraysorted[_i].label,\"data-type\":datapropsarraysorted[_i].type,\"data-actionid\":datapropsarraysorted[_i].action?datapropsarraysorted[_i].action.id:\"\",onClick:_this.onTabOpen,children:datapropsarraysorted[_i].label}),/*#__PURE__*/_jsx(GetLocalIcon,{className:datapropsarraysorted[_i].name==activeTabName?\"sp activeblack\":\"sp\",name:\"close\",\"data-name\":datapropsarraysorted[_i].name,\"data-label\":datapropsarraysorted[_i].label,\"data-type\":datapropsarraysorted[_i].type,\"data-actionid\":datapropsarraysorted[_i].action?datapropsarraysorted[_i].action.id:\"\",onClick:_this.onTabClose})]})}));}_this.setState({mainpanelHtml:tabsHtml});};_this.onTabOpen=function(e){var localdata=getLocalData(_this.props);var clickprops={actionid:e.target.dataset.actionid,recordid:e.target.dataset.name};_this.props.serverButtonHandler({localdata:localdata,clickprops:clickprops,recorddata:\"\"});};_this.onTabClose=function(e){console.log(e.target.dataset);var _this$props$compprops2=_this.props.compprops,orgname=_this$props$compprops2.orgname,userprofileid=_this$props$compprops2.userprofileid,userid=_this$props$compprops2.userid,recordid=_this$props$compprops2.recordid,tablename=_this$props$compprops2.tablename,actionname=_this$props$compprops2.actionname,tabactionid=_this$props$compprops2.tabactionid,lastcloseiconactionid=_this$props$compprops2.lastcloseiconactionid,listnviewhomeactionid=_this$props$compprops2.listnviewhomeactionid;var _e$target$dataset=e.target.dataset,label=_e$target$dataset.label,name=_e$target$dataset.name;var newtabactionid=\"\";var tabs=JSON.parse(localStorage.getItem(\"listnviewpanel-\"+tablename));var newtabsObj={};// remove key\nfor(var tabname in tabs){if(tabname!=name){newtabsObj[tabname]=tabs[tabname];}}// change order\nvar localstoragetabs=[];for(var newtabI in newtabsObj){localstoragetabs.push(newtabsObj[newtabI]);}var localstoragetabssorted=sortArray(localstoragetabs,\"order\",\"integer\");console.log(localstoragetabssorted);// reupdate order\nvar newLocalStoragearrayObj={};var newOrder=0;var newactivetabname=\"\";for(var i in localstoragetabssorted){localstoragetabssorted[i].order=newOrder;newOrder=newOrder+1;newLocalStoragearrayObj[localstoragetabssorted[i].name]=localstoragetabssorted[i];// new active tab will be last in order after removal\nnewactivetabname=localstoragetabssorted[i].name;newtabactionid=localstoragetabssorted[i].action.id;}console.log(newactivetabname);localStorage.setItem(\"listnviewpanel-\"+tablename,JSON.stringify(newtabsObj));// redirect new url if activetab is closed\nif(e.target.dataset.name.toLowerCase()==recordid.toLowerCase()){var localdata=getLocalData(_this.props);var clickprops;if(newactivetabname==\"listhome\"){clickprops={actionid:listnviewhomeactionid,recordid:\"\"};}else{clickprops={actionid:newtabactionid,recordid:newactivetabname};}_this.props.serverButtonHandler({localdata:localdata,clickprops:clickprops,recorddata:\"\"});}else{// if inactive tab closed\nif(recordid==null){_this.setComponentData(JSON.parse(localStorage.getItem(\"listnviewpanel-\"+tablename)),\"listhome\");}else{_this.setComponentData(JSON.parse(localStorage.getItem(\"listnviewpanel-\"+tablename)),recordid);}}};_this.state={mainpanelHtml:[]};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$props$compprops3,orgname,userprofileid,userid,recordid,tablename,actionname,tabactionid,lastcloseiconactionid,listnviewhomeactionid,tabs,activetab,localStorageDataString,localStorageData,isRecExists,rec,_rec,olddata,dataParams,dataresult,recordDataList,_isRecExists,totalNoofRec,_rec2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(this.props.compprops);_this$props$compprops3=this.props.compprops,orgname=_this$props$compprops3.orgname,userprofileid=_this$props$compprops3.userprofileid,userid=_this$props$compprops3.userid,recordid=_this$props$compprops3.recordid,tablename=_this$props$compprops3.tablename,actionname=_this$props$compprops3.actionname,tabactionid=_this$props$compprops3.tabactionid,lastcloseiconactionid=_this$props$compprops3.lastcloseiconactionid,listnviewhomeactionid=_this$props$compprops3.listnviewhomeactionid;tabs={};activetab=\"\";localStorageDataString=localStorage.getItem(\"listnviewpanel-\"+tablename);localStorageData=JSON.parse(localStorageDataString);// if list  page url\nif(!(recordid==null)){_context2.next=14;break;}activetab=\"listhome\";// if local storage data exists\nif(localStorageData){isRecExists=false;for(rec in localStorageData){if(localStorageData[rec].name==activetab){isRecExists=true;}}// if list not exists in localdata\nif(isRecExists==false){for(_rec in localStorageData){olddata=localStorageData[_rec];localStorageData[_rec].order=parseInt(olddata.order)+1;}localStorageData[activetab.toLowerCase()]={order:0,label:\"listhome\",name:\"listhome\",action:{type:\"layoutaction\",id:listnviewhomeactionid}};}}else{localStorageData={};localStorageData[activetab.toLowerCase()]={order:\"0\",label:\"listhome\",name:\"listhome\",action:{type:\"layoutaction\",id:listnviewhomeactionid}};}localStorage.setItem(\"listnviewpanel-\"+tablename,JSON.stringify(localStorageData));// get all tabs and active tab from local storage, and update component ui\ntabs=JSON.parse(localStorage.getItem(\"listnviewpanel-\"+tablename));this.setComponentData(tabs,activetab);_context2.next=22;break;case 14:alert(\"TEs\");// if record  page\ndataParams={};dataParams={objectName:tablename,objectData:{},keyConditions:[{field:\"orgname\",value:orgname,expression:\"=\"},{field:\"id\",value:recordid,expression:\"=\"}],filterConditions:[],pageSize:\"\",limit:\"\",exclusiveStartKey:\"\"};console.log(dataParams);// get recorddata to get record id label to display on tab panel\n_context2.next=20;return getRecorddata(dataParams);case 20:dataresult=_context2.sent;if(dataresult.isSuccess===\"false\"){alert(\"data\"+dataresult.message);}else{recordDataList=dataresult.dataprops.Items;console.log(recordDataList[0]);activetab=recordDataList[0].id;_isRecExists=false;totalNoofRec=0;// if  local storage exists\nif(localStorageData){for(_rec2 in localStorageData){// new tab order\ntotalNoofRec=totalNoofRec+1;// if record id tab already exist in localstorage tabs\nif(localStorageData[_rec2].name==activetab){_isRecExists=true;}}if(_isRecExists==false){localStorageData[activetab.toLowerCase()]={order:totalNoofRec,label:recordDataList[0].name,name:recordDataList[0].id.toLowerCase(),action:{type:\"layoutaction\",id:tabactionid}};}}else{// if tabs local storage not exists\nlocalStorageData={};localStorageData[\"listhome\"]={order:0,label:\"listhome\",name:\"listhome\",action:{type:\"layoutaction\",id:listnviewhomeactionid}};localStorageData[activetab.toLowerCase()]={order:1,label:recordDataList[0].name,name:recordDataList[0].id.toLowerCase(),action:{type:\"layoutaction\",id:tabactionid}};}localStorage.setItem(\"listnviewpanel-\"+tablename,JSON.stringify(localStorageData));tabs=JSON.parse(localStorage.getItem(\"listnviewpanel-\"+tablename));this.setComponentData(tabs,activetab);console.log(activetab);}case 22:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()// when datasyncevent is came from parent comps\n},{key:\"render\",value:function render(){console.log(this.props.style);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{id:this.props.htmlid,style:{color:\"black\",width:\"100%\",backgroundColor:this.props.bgcolor===\"\"?\"#F2F2F2\":this.props.bgcolor},children:/*#__PURE__*/_jsx(\"div\",{className:\"org-fr org-fjc-s org-bdb\",children:this.state.mainpanelHtml})})});}}]);return F;}(React.Component);export{F as default};","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/closeicontabpanel.js"],"names":["React","Component","sortArray","fieldTypeHtmltoDBmapping","getLocalData","serverButtonHandler","GetGoogleIcon","GetFontAwesomeIcon","GetBoostrapIcon","GetLocalIcon","getRecorddata","createRecord","bulkcreateRecord","F","props","componentDidUpdate","prevProps","compprops","orgname","userprofileid","userid","recordid","tablename","actionname","tabactionid","lastcloseiconactionid","listnviewhomeactionid","componenthtmlid","console","log","datasyncEventprops","JSON","stringify","name","addedtabdetail","data","tabsObj","parse","localStorage","getItem","addedtaborder","Object","keys","length","toLowerCase","order","label","action","type","id","setItem","activetab","setComponentData","tabs","tabsHtml","dataprops","activeTabName","datapropsarray","datapropsarraysorted","i","push","undefined","onTabOpen","onTabClose","setState","mainpanelHtml","e","localdata","clickprops","actionid","target","dataset","recorddata","newtabactionid","newtabsObj","tabname","localstoragetabs","newtabI","localstoragetabssorted","newLocalStoragearrayObj","newOrder","newactivetabname","state","localStorageDataString","localStorageData","isRecExists","rec","olddata","parseInt","alert","dataParams","objectName","objectData","keyConditions","field","value","expression","filterConditions","pageSize","limit","exclusiveStartKey","dataresult","isSuccess","message","recordDataList","Items","totalNoofRec","style","htmlid","color","width","backgroundColor","bgcolor"],"mappings":"2lCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OACEC,SADF,CAEEC,wBAFF,CAGEC,YAHF,CAIEC,mBAJF,KAKO,aALP,CAMA,OACEC,aADF,CAEEC,kBAFF,CAGEC,eAHF,CAIEC,YAJF,KAKO,SALP,CAMA,OAASC,aAAT,CAAwBC,YAAxB,CAAsCC,gBAAtC,KAA8D,aAA9D,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;gJAEqBC,CAAAA,C,kGACnB,WAAYC,KAAZ,CAAmB,mCACjB,uBAAMA,KAAN,EADiB,MA0JnBC,kBA1JmB,0FA0JE,iBAAOC,SAAP,uWAWf,MAAKF,KAAL,CAAWG,SAXI,CAEjBC,OAFiB,uBAEjBA,OAFiB,CAGjBC,aAHiB,uBAGjBA,aAHiB,CAIjBC,MAJiB,uBAIjBA,MAJiB,CAKjBC,QALiB,uBAKjBA,QALiB,CAMjBC,SANiB,uBAMjBA,SANiB,CAOjBC,UAPiB,uBAOjBA,UAPiB,CAQjBC,WARiB,uBAQjBA,WARiB,CASjBC,qBATiB,uBASjBA,qBATiB,CAUjBC,qBAViB,uBAUjBA,qBAViB,CAYbC,eAZa,CAYO,MAAKb,KAZZ,CAYba,eAZa,CAanBC,OAAO,CAACC,GAAR,CAAY,MAAKf,KAAjB,EACIgB,kBAde,CAcM,MAAKhB,KAAL,CAAWgB,kBAdjB,CAgBnB,GACEd,SAAS,EACTe,IAAI,CAACC,SAAL,CAAe,MAAKlB,KAAL,CAAWgB,kBAA1B,GACEC,IAAI,CAACC,SAAL,CAAehB,SAAS,CAACc,kBAAzB,CAHJ,CAIE,CACA,GACEA,kBAAkB,CAACH,eAAnB,EAAsC,KAAtC,EACAG,kBAAkB,CAACH,eAAnB,EAAsCA,eAFxC,CAGE,CACA,GAAIG,kBAAkB,CAACG,IAAnB,EAA2B,QAA/B,CAAyC,CACnCC,cADmC,CAClBJ,kBAAkB,CAACK,IADD,CAEnCC,OAFmC,CAEzBL,IAAI,CAACM,KAAL,CACZC,YAAY,CAACC,OAAb,CAAqB,kBAAoBjB,SAAzC,CADY,CAFyB,CAKnCkB,aALmC,CAKnBC,MAAM,CAACC,IAAP,CAAYN,OAAZ,EAAqBO,MAArB,CAA8B,CALX,CAMvCP,OAAO,CAACF,cAAc,CAACD,IAAf,CAAoBW,WAApB,EAAD,CAAP,CAA6C,CAC3CC,KAAK,CAAEL,aADoC,CAE3CM,KAAK,CAAEZ,cAAc,CAACY,KAFqB,CAG3Cb,IAAI,CAAEC,cAAc,CAACD,IAAf,CAAoBW,WAApB,EAHqC,CAI3CG,MAAM,CAAE,CAAEC,IAAI,CAAE,cAAR,CAAwBC,EAAE,CAAEzB,WAA5B,CAJmC,CAA7C,CAMAc,YAAY,CAACY,OAAb,CACE,kBAAoB5B,SADtB,CAEES,IAAI,CAACC,SAAL,CAAeI,OAAf,CAFF,EAKIe,SAjBmC,CAiBvB,EAjBuB,CAkBvC,GAAI9B,QAAQ,EAAI,IAAhB,CAAsB,CACpB8B,SAAS,CAAG,UAAZ,CACD,CAFD,IAEO,CACLA,SAAS,CAAG9B,QAAZ,CACD,CACD,MAAK+B,gBAAL,CAAsBhB,OAAtB,CAA+Be,SAA/B,EACD,CACF,CACF,CAnDkB,sDA1JF,qEAgNnBC,gBAhNmB,CAgNA,SAACC,IAAD,CAAOF,SAAP,CAAqB,CACtCvB,OAAO,CAACC,GAAR,CAAYwB,IAAZ,EACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CAEA,GAAIC,CAAAA,SAAS,CAAGF,IAAhB,CACA,GAAIG,CAAAA,aAAa,CAAGL,SAApB,CACA;AACA,GAAIM,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIC,CAAAA,oBAAoB,CAAG,EAA3B,CACA,IAAK,GAAIC,CAAAA,CAAT,GAAcJ,CAAAA,SAAd,CAAyB,CACvBE,cAAc,CAACG,IAAf,CAAoBL,SAAS,CAACI,CAAD,CAA7B,EACD,CACDD,oBAAoB,CAAGxD,SAAS,CAACuD,cAAD,CAAiB,OAAjB,CAA0B,SAA1B,CAAhC,CAEA;AACA,GAAID,aAAa,EAAI,EAAjB,EAAuBA,aAAa,EAAIK,SAA5C,CAAuD,CACrDL,aAAa,CAAGE,oBAAoB,CAAC,CAAD,CAApB,CAAwBzB,IAAxC,CACD,CAED;AACA,IAAK,GAAI0B,CAAAA,EAAC,CAAG,CAAb,CAAgBA,EAAC,CAAGD,oBAAoB,CAACf,MAAzC,CAAiDgB,EAAC,EAAlD,CAAsD,CACpD/B,OAAO,CAACC,GAAR,CAAY6B,oBAAoB,CAACC,EAAD,CAAhC,EACA/B,OAAO,CAACC,GAAR,CAAY2B,aAAZ,EAEAF,QAAQ,CAACM,IAAT,cACE,yBAEGF,oBAAoB,CAACC,EAAD,CAApB,CAAwB1B,IAAxB,EAAgC,UAAhC,cACC,YACE,SAAS,CACPyB,oBAAoB,CAACC,EAAD,CAApB,CAAwB1B,IAAxB,EAAgCuB,aAAhC,CACI,gBADJ,CAEI,IAJR,CAME,YAAWE,oBAAoB,CAACC,EAAD,CAApB,CAAwB1B,IANrC,CAOE,aAAYyB,oBAAoB,CAACC,EAAD,CAApB,CAAwBb,KAPtC,CAQE,YAAWY,oBAAoB,CAACC,EAAD,CAApB,CAAwBX,IARrC,CASE,gBACEU,oBAAoB,CAACC,EAAD,CAApB,CAAwBZ,MAAxB,CACIW,oBAAoB,CAACC,EAAD,CAApB,CAAwBZ,MAAxB,CAA+BE,EADnC,CAEI,EAZR,CAcE,OAAO,CAAE,MAAKa,SAdhB,kBADD,cAoBC,wCAEE,YACE,SAAS,CACPJ,oBAAoB,CAACC,EAAD,CAApB,CAAwB1B,IAAxB,EAAgCuB,aAAhC,CACI,gBADJ,CAEI,IAJR,CAME,YAAWE,oBAAoB,CAACC,EAAD,CAApB,CAAwB1B,IANrC,CAOE,aAAYyB,oBAAoB,CAACC,EAAD,CAApB,CAAwBb,KAPtC,CAQE,YAAWY,oBAAoB,CAACC,EAAD,CAApB,CAAwBX,IARrC,CASE,gBACEU,oBAAoB,CAACC,EAAD,CAApB,CAAwBZ,MAAxB,CACIW,oBAAoB,CAACC,EAAD,CAApB,CAAwBZ,MAAxB,CAA+BE,EADnC,CAEI,EAZR,CAcE,OAAO,CAAE,MAAKa,SAdhB,UAgBGJ,oBAAoB,CAACC,EAAD,CAApB,CAAwBb,KAhB3B,EAFF,cAoBE,KAAC,YAAD,EACE,SAAS,CACPY,oBAAoB,CAACC,EAAD,CAApB,CAAwB1B,IAAxB,EAAgCuB,aAAhC,CACI,gBADJ,CAEI,IAJR,CAME,IAAI,CAAC,OANP,CAOE,YAAWE,oBAAoB,CAACC,EAAD,CAApB,CAAwB1B,IAPrC,CAQE,aAAYyB,oBAAoB,CAACC,EAAD,CAApB,CAAwBb,KARtC,CASE,YAAWY,oBAAoB,CAACC,EAAD,CAApB,CAAwBX,IATrC,CAUE,gBACEU,oBAAoB,CAACC,EAAD,CAApB,CAAwBZ,MAAxB,CACIW,oBAAoB,CAACC,EAAD,CAApB,CAAwBZ,MAAxB,CAA+BE,EADnC,CAEI,EAbR,CAeE,OAAO,CAAE,MAAKc,UAfhB,EApBF,GAtBJ,EADF,EAgED,CACD,MAAKC,QAAL,CAAc,CAAEC,aAAa,CAAEX,QAAjB,CAAd,EACD,CA1SkB,OA4SnBQ,SA5SmB,CA4SP,SAACI,CAAD,CAAO,CACjB,GAAIC,CAAAA,SAAS,CAAG/D,YAAY,CAAC,MAAKU,KAAN,CAA5B,CACA,GAAIsD,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEH,CAAC,CAACI,MAAF,CAASC,OAAT,CAAiBF,QADZ,CAEfhD,QAAQ,CAAE6C,CAAC,CAACI,MAAF,CAASC,OAAT,CAAiBtC,IAFZ,CAAjB,CAIA,MAAKnB,KAAL,CAAWT,mBAAX,CAA+B,CAC7B8D,SAAS,CAAEA,SADkB,CAE7BC,UAAU,CAAEA,UAFiB,CAG7BI,UAAU,CAAE,EAHiB,CAA/B,EAKD,CAvTkB,OAyTnBT,UAzTmB,CAyTN,SAACG,CAAD,CAAO,CAClBtC,OAAO,CAACC,GAAR,CAAYqC,CAAC,CAACI,MAAF,CAASC,OAArB,EACA,2BAUI,MAAKzD,KAAL,CAAWG,SAVf,CACEC,OADF,wBACEA,OADF,CAEEC,aAFF,wBAEEA,aAFF,CAGEC,MAHF,wBAGEA,MAHF,CAIEC,QAJF,wBAIEA,QAJF,CAKEC,SALF,wBAKEA,SALF,CAMEC,UANF,wBAMEA,UANF,CAOEC,WAPF,wBAOEA,WAPF,CAQEC,qBARF,wBAQEA,qBARF,CASEC,qBATF,wBASEA,qBATF,CAYA,sBAAsBwC,CAAC,CAACI,MAAF,CAASC,OAA/B,CAAMzB,KAAN,mBAAMA,KAAN,CAAab,IAAb,mBAAaA,IAAb,CACA,GAAIwC,CAAAA,cAAc,CAAG,EAArB,CAEA,GAAIpB,CAAAA,IAAI,CAAGtB,IAAI,CAACM,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAAoBjB,SAAzC,CAAX,CAAX,CACA,GAAIoD,CAAAA,UAAU,CAAG,EAAjB,CACA;AACA,IAAK,GAAIC,CAAAA,OAAT,GAAoBtB,CAAAA,IAApB,CAA0B,CACxB,GAAIsB,OAAO,EAAI1C,IAAf,CAAqB,CACnByC,UAAU,CAACC,OAAD,CAAV,CAAsBtB,IAAI,CAACsB,OAAD,CAA1B,CACD,CACF,CACD;AACA,GAAIC,CAAAA,gBAAgB,CAAG,EAAvB,CACA,IAAK,GAAIC,CAAAA,OAAT,GAAoBH,CAAAA,UAApB,CAAgC,CAC9BE,gBAAgB,CAAChB,IAAjB,CAAsBc,UAAU,CAACG,OAAD,CAAhC,EACD,CACD,GAAIC,CAAAA,sBAAsB,CAAG5E,SAAS,CACpC0E,gBADoC,CAEpC,OAFoC,CAGpC,SAHoC,CAAtC,CAKAhD,OAAO,CAACC,GAAR,CAAYiD,sBAAZ,EACA;AACA,GAAIC,CAAAA,uBAAuB,CAAG,EAA9B,CACA,GAAIC,CAAAA,QAAQ,CAAG,CAAf,CACA,GAAIC,CAAAA,gBAAgB,CAAG,EAAvB,CACA,IAAK,GAAItB,CAAAA,CAAT,GAAcmB,CAAAA,sBAAd,CAAsC,CACpCA,sBAAsB,CAACnB,CAAD,CAAtB,CAA0Bd,KAA1B,CAAkCmC,QAAlC,CACAA,QAAQ,CAAGA,QAAQ,CAAG,CAAtB,CACAD,uBAAuB,CAACD,sBAAsB,CAACnB,CAAD,CAAtB,CAA0B1B,IAA3B,CAAvB,CACE6C,sBAAsB,CAACnB,CAAD,CADxB,CAEA;AACAsB,gBAAgB,CAAGH,sBAAsB,CAACnB,CAAD,CAAtB,CAA0B1B,IAA7C,CACAwC,cAAc,CAAGK,sBAAsB,CAACnB,CAAD,CAAtB,CAA0BZ,MAA1B,CAAiCE,EAAlD,CACD,CACDrB,OAAO,CAACC,GAAR,CAAYoD,gBAAZ,EAEA3C,YAAY,CAACY,OAAb,CACE,kBAAoB5B,SADtB,CAEES,IAAI,CAACC,SAAL,CAAe0C,UAAf,CAFF,EAKA;AACA,GAAIR,CAAC,CAACI,MAAF,CAASC,OAAT,CAAiBtC,IAAjB,CAAsBW,WAAtB,IAAuCvB,QAAQ,CAACuB,WAAT,EAA3C,CAAmE,CACjE,GAAIuB,CAAAA,SAAS,CAAG/D,YAAY,CAAC,MAAKU,KAAN,CAA5B,CACA,GAAIsD,CAAAA,UAAJ,CACA,GAAIa,gBAAgB,EAAI,UAAxB,CAAoC,CAClCb,UAAU,CAAG,CACXC,QAAQ,CAAE3C,qBADC,CAEXL,QAAQ,CAAE,EAFC,CAAb,CAID,CALD,IAKO,CACL+C,UAAU,CAAG,CACXC,QAAQ,CAAEI,cADC,CAEXpD,QAAQ,CAAE4D,gBAFC,CAAb,CAID,CAED,MAAKnE,KAAL,CAAWT,mBAAX,CAA+B,CAC7B8D,SAAS,CAAEA,SADkB,CAE7BC,UAAU,CAAEA,UAFiB,CAG7BI,UAAU,CAAE,EAHiB,CAA/B,EAKD,CApBD,IAoBO,CACL;AACA,GAAInD,QAAQ,EAAI,IAAhB,CAAsB,CACpB,MAAK+B,gBAAL,CACErB,IAAI,CAACM,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAAoBjB,SAAzC,CAAX,CADF,CAEE,UAFF,EAID,CALD,IAKO,CACL,MAAK8B,gBAAL,CACErB,IAAI,CAACM,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAAoBjB,SAAzC,CAAX,CADF,CAEED,QAFF,EAID,CACF,CACF,CApZkB,CAEjB,MAAK6D,KAAL,CAAa,CAAEjB,aAAa,CAAE,EAAjB,CAAb,CAFiB,aAGlB,C,yIAED,+aACErC,OAAO,CAACC,GAAR,CAAY,KAAKf,KAAL,CAAWG,SAAvB,EADF,uBAYM,KAAKH,KAAL,CAAWG,SAZjB,CAGIC,OAHJ,wBAGIA,OAHJ,CAIIC,aAJJ,wBAIIA,aAJJ,CAKIC,MALJ,wBAKIA,MALJ,CAMIC,QANJ,wBAMIA,QANJ,CAOIC,SAPJ,wBAOIA,SAPJ,CAQIC,UARJ,wBAQIA,UARJ,CASIC,WATJ,wBASIA,WATJ,CAUIC,qBAVJ,wBAUIA,qBAVJ,CAWIC,qBAXJ,wBAWIA,qBAXJ,CAaM2B,IAbN,CAaa,EAbb,CAcMF,SAdN,CAckB,EAdlB,CAgBMgC,sBAhBN,CAgB+B7C,YAAY,CAACC,OAAb,CAC3B,kBAAoBjB,SADO,CAhB/B,CAmBM8D,gBAnBN,CAmByBrD,IAAI,CAACM,KAAL,CAAW8C,sBAAX,CAnBzB,CAqBE;AArBF,KAsBM9D,QAAQ,EAAI,IAtBlB,4BAuBI8B,SAAS,CAAG,UAAZ,CACA;AACA,GAAIiC,gBAAJ,CAAsB,CAChBC,WADgB,CACF,KADE,CAGpB,IAASC,GAAT,GAAgBF,CAAAA,gBAAhB,CAAkC,CAChC,GAAIA,gBAAgB,CAACE,GAAD,CAAhB,CAAsBrD,IAAtB,EAA8BkB,SAAlC,CAA6C,CAC3CkC,WAAW,CAAG,IAAd,CACD,CACF,CAED;AACA,GAAIA,WAAW,EAAI,KAAnB,CAA0B,CACxB,IAASC,IAAT,GAAgBF,CAAAA,gBAAhB,CAAkC,CAC5BG,OAD4B,CAClBH,gBAAgB,CAACE,IAAD,CADE,CAEhCF,gBAAgB,CAACE,IAAD,CAAhB,CAAsBzC,KAAtB,CAA8B2C,QAAQ,CAACD,OAAO,CAAC1C,KAAT,CAAR,CAA0B,CAAxD,CACD,CAEDuC,gBAAgB,CAACjC,SAAS,CAACP,WAAV,EAAD,CAAhB,CAA4C,CAC1CC,KAAK,CAAE,CADmC,CAE1CC,KAAK,CAAE,UAFmC,CAG1Cb,IAAI,CAAE,UAHoC,CAI1Cc,MAAM,CAAE,CAAEC,IAAI,CAAE,cAAR,CAAwBC,EAAE,CAAEvB,qBAA5B,CAJkC,CAA5C,CAMD,CACF,CAvBD,IAuBO,CACL0D,gBAAgB,CAAG,EAAnB,CACAA,gBAAgB,CAACjC,SAAS,CAACP,WAAV,EAAD,CAAhB,CAA4C,CAC1CC,KAAK,CAAE,GADmC,CAE1CC,KAAK,CAAE,UAFmC,CAG1Cb,IAAI,CAAE,UAHoC,CAI1Cc,MAAM,CAAE,CAAEC,IAAI,CAAE,cAAR,CAAwBC,EAAE,CAAEvB,qBAA5B,CAJkC,CAA5C,CAMD,CAEDY,YAAY,CAACY,OAAb,CACE,kBAAoB5B,SADtB,CAEES,IAAI,CAACC,SAAL,CAAeoD,gBAAf,CAFF,EAKA;AACA/B,IAAI,CAAGtB,IAAI,CAACM,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAAoBjB,SAAzC,CAAX,CAAP,CACA,KAAK8B,gBAAL,CAAsBC,IAAtB,CAA4BF,SAA5B,EAjEJ,gCAmEIsC,KAAK,CAAC,KAAD,CAAL,CACA;AACIC,UArER,CAqEqB,EArErB,CAsEIA,UAAU,CAAG,CACXC,UAAU,CAAErE,SADD,CAEXsE,UAAU,CAAE,EAFD,CAGXC,aAAa,CAAE,CACb,CAAEC,KAAK,CAAE,SAAT,CAAoBC,KAAK,CAAE7E,OAA3B,CAAoC8E,UAAU,CAAE,GAAhD,CADa,CAEb,CACEF,KAAK,CAAE,IADT,CAEEC,KAAK,CAAE1E,QAFT,CAGE2E,UAAU,CAAE,GAHd,CAFa,CAHJ,CAWXC,gBAAgB,CAAE,EAXP,CAYXC,QAAQ,CAAE,EAZC,CAaXC,KAAK,CAAE,EAbI,CAcXC,iBAAiB,CAAE,EAdR,CAAb,CAgBAxE,OAAO,CAACC,GAAR,CAAY6D,UAAZ,EAEA;AAxFJ,wBAyF2BhF,CAAAA,aAAa,CAACgF,UAAD,CAzFxC,SAyFQW,UAzFR,gBA0FI,GAAIA,UAAU,CAACC,SAAX,GAAyB,OAA7B,CAAsC,CACpCb,KAAK,CAAC,OAASY,UAAU,CAACE,OAArB,CAAL,CACD,CAFD,IAEO,CACDC,cADC,CACgBH,UAAU,CAAC9C,SAAX,CAAqBkD,KADrC,CAEL7E,OAAO,CAACC,GAAR,CAAY2E,cAAc,CAAC,CAAD,CAA1B,EACArD,SAAS,CAAGqD,cAAc,CAAC,CAAD,CAAd,CAAkBvD,EAA9B,CAEIoC,YALC,CAKa,KALb,CAMDqB,YANC,CAMc,CANd,CAQL;AACA,GAAItB,gBAAJ,CAAsB,CACpB,IAASE,KAAT,GAAgBF,CAAAA,gBAAhB,CAAkC,CAChC;AACAsB,YAAY,CAAGA,YAAY,CAAG,CAA9B,CAEA;AACA,GAAItB,gBAAgB,CAACE,KAAD,CAAhB,CAAsBrD,IAAtB,EAA8BkB,SAAlC,CAA6C,CAC3CkC,YAAW,CAAG,IAAd,CACD,CACF,CACD,GAAIA,YAAW,EAAI,KAAnB,CAA0B,CACxBD,gBAAgB,CAACjC,SAAS,CAACP,WAAV,EAAD,CAAhB,CAA4C,CAC1CC,KAAK,CAAE6D,YADmC,CAE1C5D,KAAK,CAAE0D,cAAc,CAAC,CAAD,CAAd,CAAkBvE,IAFiB,CAG1CA,IAAI,CAAEuE,cAAc,CAAC,CAAD,CAAd,CAAkBvD,EAAlB,CAAqBL,WAArB,EAHoC,CAI1CG,MAAM,CAAE,CAAEC,IAAI,CAAE,cAAR,CAAwBC,EAAE,CAAEzB,WAA5B,CAJkC,CAA5C,CAMD,CACF,CAlBD,IAkBO,CACL;AACA4D,gBAAgB,CAAG,EAAnB,CACAA,gBAAgB,CAAC,UAAD,CAAhB,CAA+B,CAC7BvC,KAAK,CAAE,CADsB,CAE7BC,KAAK,CAAE,UAFsB,CAG7Bb,IAAI,CAAE,UAHuB,CAI7Bc,MAAM,CAAE,CAAEC,IAAI,CAAE,cAAR,CAAwBC,EAAE,CAAEvB,qBAA5B,CAJqB,CAA/B,CAMA0D,gBAAgB,CAACjC,SAAS,CAACP,WAAV,EAAD,CAAhB,CAA4C,CAC1CC,KAAK,CAAE,CADmC,CAE1CC,KAAK,CAAE0D,cAAc,CAAC,CAAD,CAAd,CAAkBvE,IAFiB,CAG1CA,IAAI,CAAEuE,cAAc,CAAC,CAAD,CAAd,CAAkBvD,EAAlB,CAAqBL,WAArB,EAHoC,CAI1CG,MAAM,CAAE,CAAEC,IAAI,CAAE,cAAR,CAAwBC,EAAE,CAAEzB,WAA5B,CAJkC,CAA5C,CAMD,CAEDc,YAAY,CAACY,OAAb,CACE,kBAAoB5B,SADtB,CAEES,IAAI,CAACC,SAAL,CAAeoD,gBAAf,CAFF,EAKA/B,IAAI,CAAGtB,IAAI,CAACM,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAAoBjB,SAAzC,CAAX,CAAP,CACA,KAAK8B,gBAAL,CAAsBC,IAAtB,CAA4BF,SAA5B,EACAvB,OAAO,CAACC,GAAR,CAAYsB,SAAZ,EACD,CAhJL,8D,6GAoJA;sBA6PA,iBAAS,CACPvB,OAAO,CAACC,GAAR,CAAY,KAAKf,KAAL,CAAW6F,KAAvB,EAEA,mBACE,sCACE,YACE,EAAE,CAAE,KAAK7F,KAAL,CAAW8F,MADjB,CAEE,KAAK,CAAE,CACLC,KAAK,CAAE,OADF,CAELC,KAAK,CAAE,MAFF,CAGLC,eAAe,CACb,KAAKjG,KAAL,CAAWkG,OAAX,GAAuB,EAAvB,CAA4B,SAA5B,CAAwC,KAAKlG,KAAL,CAAWkG,OAJhD,CAFT,uBASE,YAAK,SAAS,CAAC,0BAAf,UACG,KAAK9B,KAAL,CAAWjB,aADd,EATF,EADF,EADF,CAiBD,C,eA3a4BjE,KAAK,CAACC,S,SAAhBY,C","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  sortArray,\n  fieldTypeHtmltoDBmapping,\n  getLocalData,\n  serverButtonHandler,\n} from \"../js/index\";\nimport {\n  GetGoogleIcon,\n  GetFontAwesomeIcon,\n  GetBoostrapIcon,\n  GetLocalIcon,\n} from \"./icons\";\nimport { getRecorddata, createRecord, bulkcreateRecord } from \"../db/index\";\n\n// events\n// update tabpanel tabs\n//  this.setState({\n//   datasyncEventprops: {\n//     name: \"addtab\",\n//     data: { label: \"newlabel\", name: \"newname\" },\n//     componenthtmlid: \"all\",\n//   },\n// });\n\nexport default class F extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { mainpanelHtml: [] };\n  }\n\n  async componentDidMount() {\n    console.log(this.props.compprops);\n    let {\n      orgname,\n      userprofileid,\n      userid,\n      recordid,\n      tablename,\n      actionname,\n      tabactionid,\n      lastcloseiconactionid,\n      listnviewhomeactionid,\n    } = this.props.compprops;\n    let tabs = {};\n    let activetab = \"\";\n\n    let localStorageDataString = localStorage.getItem(\n      \"listnviewpanel-\" + tablename\n    );\n    let localStorageData = JSON.parse(localStorageDataString);\n\n    // if list  page url\n    if (recordid == null) {\n      activetab = \"listhome\";\n      // if local storage data exists\n      if (localStorageData) {\n        let isRecExists = false;\n\n        for (let rec in localStorageData) {\n          if (localStorageData[rec].name == activetab) {\n            isRecExists = true;\n          }\n        }\n\n        // if list not exists in localdata\n        if (isRecExists == false) {\n          for (let rec in localStorageData) {\n            let olddata = localStorageData[rec];\n            localStorageData[rec].order = parseInt(olddata.order) + 1;\n          }\n\n          localStorageData[activetab.toLowerCase()] = {\n            order: 0,\n            label: \"listhome\",\n            name: \"listhome\",\n            action: { type: \"layoutaction\", id: listnviewhomeactionid },\n          };\n        }\n      } else {\n        localStorageData = {};\n        localStorageData[activetab.toLowerCase()] = {\n          order: \"0\",\n          label: \"listhome\",\n          name: \"listhome\",\n          action: { type: \"layoutaction\", id: listnviewhomeactionid },\n        };\n      }\n\n      localStorage.setItem(\n        \"listnviewpanel-\" + tablename,\n        JSON.stringify(localStorageData)\n      );\n\n      // get all tabs and active tab from local storage, and update component ui\n      tabs = JSON.parse(localStorage.getItem(\"listnviewpanel-\" + tablename));\n      this.setComponentData(tabs, activetab);\n    } else {\n      alert(\"TEs\");\n      // if record  page\n      let dataParams = {};\n      dataParams = {\n        objectName: tablename,\n        objectData: {},\n        keyConditions: [\n          { field: \"orgname\", value: orgname, expression: \"=\" },\n          {\n            field: \"id\",\n            value: recordid,\n            expression: \"=\",\n          },\n        ],\n        filterConditions: [],\n        pageSize: \"\",\n        limit: \"\",\n        exclusiveStartKey: \"\",\n      };\n      console.log(dataParams);\n\n      // get recorddata to get record id label to display on tab panel\n      let dataresult = await getRecorddata(dataParams);\n      if (dataresult.isSuccess === \"false\") {\n        alert(\"data\" + dataresult.message);\n      } else {\n        let recordDataList = dataresult.dataprops.Items;\n        console.log(recordDataList[0]);\n        activetab = recordDataList[0].id;\n\n        let isRecExists = false;\n        let totalNoofRec = 0;\n\n        // if  local storage exists\n        if (localStorageData) {\n          for (let rec in localStorageData) {\n            // new tab order\n            totalNoofRec = totalNoofRec + 1;\n\n            // if record id tab already exist in localstorage tabs\n            if (localStorageData[rec].name == activetab) {\n              isRecExists = true;\n            }\n          }\n          if (isRecExists == false) {\n            localStorageData[activetab.toLowerCase()] = {\n              order: totalNoofRec,\n              label: recordDataList[0].name,\n              name: recordDataList[0].id.toLowerCase(),\n              action: { type: \"layoutaction\", id: tabactionid },\n            };\n          }\n        } else {\n          // if tabs local storage not exists\n          localStorageData = {};\n          localStorageData[\"listhome\"] = {\n            order: 0,\n            label: \"listhome\",\n            name: \"listhome\",\n            action: { type: \"layoutaction\", id: listnviewhomeactionid },\n          };\n          localStorageData[activetab.toLowerCase()] = {\n            order: 1,\n            label: recordDataList[0].name,\n            name: recordDataList[0].id.toLowerCase(),\n            action: { type: \"layoutaction\", id: tabactionid },\n          };\n        }\n\n        localStorage.setItem(\n          \"listnviewpanel-\" + tablename,\n          JSON.stringify(localStorageData)\n        );\n\n        tabs = JSON.parse(localStorage.getItem(\"listnviewpanel-\" + tablename));\n        this.setComponentData(tabs, activetab);\n        console.log(activetab);\n      }\n    }\n  }\n\n  // when datasyncevent is came from parent comps\n  componentDidUpdate = async (prevProps) => {\n    let {\n      orgname,\n      userprofileid,\n      userid,\n      recordid,\n      tablename,\n      actionname,\n      tabactionid,\n      lastcloseiconactionid,\n      listnviewhomeactionid,\n    } = this.props.compprops;\n    let { componenthtmlid } = this.props;\n    console.log(this.props);\n    let datasyncEventprops = this.props.datasyncEventprops;\n\n    if (\n      prevProps &&\n      JSON.stringify(this.props.datasyncEventprops) !=\n        JSON.stringify(prevProps.datasyncEventprops)\n    ) {\n      if (\n        datasyncEventprops.componenthtmlid == \"all\" ||\n        datasyncEventprops.componenthtmlid == componenthtmlid\n      ) {\n        if (datasyncEventprops.name == \"addtab\") {\n          let addedtabdetail = datasyncEventprops.data;\n          let tabsObj = JSON.parse(\n            localStorage.getItem(\"listnviewpanel-\" + tablename)\n          );\n          let addedtaborder = Object.keys(tabsObj).length + 1;\n          tabsObj[addedtabdetail.name.toLowerCase()] = {\n            order: addedtaborder,\n            label: addedtabdetail.label,\n            name: addedtabdetail.name.toLowerCase(),\n            action: { type: \"layoutaction\", id: tabactionid },\n          };\n          localStorage.setItem(\n            \"listnviewpanel-\" + tablename,\n            JSON.stringify(tabsObj)\n          );\n\n          let activetab = \"\";\n          if (recordid == null) {\n            activetab = \"listhome\";\n          } else {\n            activetab = recordid;\n          }\n          this.setComponentData(tabsObj, activetab);\n        }\n      }\n    }\n  };\n\n  setComponentData = (tabs, activetab) => {\n    console.log(tabs);\n    let tabsHtml = [];\n\n    let dataprops = tabs;\n    let activeTabName = activetab;\n    // sort tabs by order\n    let datapropsarray = [];\n    let datapropsarraysorted = [];\n    for (let i in dataprops) {\n      datapropsarray.push(dataprops[i]);\n    }\n    datapropsarraysorted = sortArray(datapropsarray, \"order\", \"integer\");\n\n    // order 0 activetab\n    if (activeTabName == \"\" || activeTabName == undefined) {\n      activeTabName = datapropsarraysorted[0].name;\n    }\n\n    // iterate over tabs\n    for (let i = 0; i < datapropsarraysorted.length; i++) {\n      console.log(datapropsarraysorted[i]);\n      console.log(activeTabName);\n\n      tabsHtml.push(\n        <>\n          {/* if list tab */}\n          {datapropsarraysorted[i].name == \"listhome\" ? (\n            <div\n              className={\n                datapropsarraysorted[i].name == activeTabName\n                  ? \"sp activeblack\"\n                  : \"sp\"\n              }\n              data-name={datapropsarraysorted[i].name}\n              data-label={datapropsarraysorted[i].label}\n              data-type={datapropsarraysorted[i].type}\n              data-actionid={\n                datapropsarraysorted[i].action\n                  ? datapropsarraysorted[i].action.id\n                  : \"\"\n              }\n              onClick={this.onTabOpen}\n            >\n              home\n            </div>\n          ) : (\n            <>\n              {/* if record tab */}\n              <div\n                className={\n                  datapropsarraysorted[i].name == activeTabName\n                    ? \"sp activeblack\"\n                    : \"sp\"\n                }\n                data-name={datapropsarraysorted[i].name}\n                data-label={datapropsarraysorted[i].label}\n                data-type={datapropsarraysorted[i].type}\n                data-actionid={\n                  datapropsarraysorted[i].action\n                    ? datapropsarraysorted[i].action.id\n                    : \"\"\n                }\n                onClick={this.onTabOpen}\n              >\n                {datapropsarraysorted[i].label}\n              </div>\n              <GetLocalIcon\n                className={\n                  datapropsarraysorted[i].name == activeTabName\n                    ? \"sp activeblack\"\n                    : \"sp\"\n                }\n                name=\"close\"\n                data-name={datapropsarraysorted[i].name}\n                data-label={datapropsarraysorted[i].label}\n                data-type={datapropsarraysorted[i].type}\n                data-actionid={\n                  datapropsarraysorted[i].action\n                    ? datapropsarraysorted[i].action.id\n                    : \"\"\n                }\n                onClick={this.onTabClose}\n              />\n            </>\n          )}\n        </>\n      );\n    }\n    this.setState({ mainpanelHtml: tabsHtml });\n  };\n\n  onTabOpen = (e) => {\n    let localdata = getLocalData(this.props);\n    let clickprops = {\n      actionid: e.target.dataset.actionid,\n      recordid: e.target.dataset.name,\n    };\n    this.props.serverButtonHandler({\n      localdata: localdata,\n      clickprops: clickprops,\n      recorddata: \"\",\n    });\n  };\n\n  onTabClose = (e) => {\n    console.log(e.target.dataset);\n    let {\n      orgname,\n      userprofileid,\n      userid,\n      recordid,\n      tablename,\n      actionname,\n      tabactionid,\n      lastcloseiconactionid,\n      listnviewhomeactionid,\n    } = this.props.compprops;\n\n    let { label, name } = e.target.dataset;\n    let newtabactionid = \"\";\n\n    let tabs = JSON.parse(localStorage.getItem(\"listnviewpanel-\" + tablename));\n    let newtabsObj = {};\n    // remove key\n    for (let tabname in tabs) {\n      if (tabname != name) {\n        newtabsObj[tabname] = tabs[tabname];\n      }\n    }\n    // change order\n    let localstoragetabs = [];\n    for (let newtabI in newtabsObj) {\n      localstoragetabs.push(newtabsObj[newtabI]);\n    }\n    let localstoragetabssorted = sortArray(\n      localstoragetabs,\n      \"order\",\n      \"integer\"\n    );\n    console.log(localstoragetabssorted);\n    // reupdate order\n    let newLocalStoragearrayObj = {};\n    let newOrder = 0;\n    let newactivetabname = \"\";\n    for (let i in localstoragetabssorted) {\n      localstoragetabssorted[i].order = newOrder;\n      newOrder = newOrder + 1;\n      newLocalStoragearrayObj[localstoragetabssorted[i].name] =\n        localstoragetabssorted[i];\n      // new active tab will be last in order after removal\n      newactivetabname = localstoragetabssorted[i].name;\n      newtabactionid = localstoragetabssorted[i].action.id;\n    }\n    console.log(newactivetabname);\n\n    localStorage.setItem(\n      \"listnviewpanel-\" + tablename,\n      JSON.stringify(newtabsObj)\n    );\n\n    // redirect new url if activetab is closed\n    if (e.target.dataset.name.toLowerCase() == recordid.toLowerCase()) {\n      let localdata = getLocalData(this.props);\n      let clickprops;\n      if (newactivetabname == \"listhome\") {\n        clickprops = {\n          actionid: listnviewhomeactionid,\n          recordid: \"\",\n        };\n      } else {\n        clickprops = {\n          actionid: newtabactionid,\n          recordid: newactivetabname,\n        };\n      }\n\n      this.props.serverButtonHandler({\n        localdata: localdata,\n        clickprops: clickprops,\n        recorddata: \"\",\n      });\n    } else {\n      // if inactive tab closed\n      if (recordid == null) {\n        this.setComponentData(\n          JSON.parse(localStorage.getItem(\"listnviewpanel-\" + tablename)),\n          \"listhome\"\n        );\n      } else {\n        this.setComponentData(\n          JSON.parse(localStorage.getItem(\"listnviewpanel-\" + tablename)),\n          recordid\n        );\n      }\n    }\n  };\n\n  render() {\n    console.log(this.props.style);\n\n    return (\n      <>\n        <div\n          id={this.props.htmlid}\n          style={{\n            color: \"black\",\n            width: \"100%\",\n            backgroundColor:\n              this.props.bgcolor === \"\" ? \"#F2F2F2\" : this.props.bgcolor,\n          }}\n        >\n          <div className=\"org-fr org-fjc-s org-bdb\">\n            {this.state.mainpanelHtml}\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}