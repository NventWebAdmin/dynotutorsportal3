{"ast":null,"code":"import _objectSpread from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Notepad from\"./notepad\";import{getRecorddata,createRecord,bulkcreateRecord,deleteRecord}from\"../db/index\";import{sortArray,fieldTypeHtmltoDBmapping,getLocalData,serverButtonHandler,filterArraybyObject}from\"../js/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_Component){_inherits(F,_Component);var _super=_createSuper(F);function F(_props){var _this;_classCallCheck(this,F);_this=_super.call(this,_props);_this.getServerData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(props){var _this$props$compprops,defaultdatafilter,showallrecordsubscribe,parentobjectfilter,showallrecords,tablename,defaultsortparam,enablelocaldbdata,parentid,activeNoteId,action,localdata,dataParamsresult,rsdataParamsresult,dataParamsBeginswith,recordData,recordDataFinal,rsData,rsDataFinal,subscribetoIds,i,rsDatavar,j,recordDataVar;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props$compprops=_this.props.compprops,defaultdatafilter=_this$props$compprops.defaultdatafilter,showallrecordsubscribe=_this$props$compprops.showallrecordsubscribe,parentobjectfilter=_this$props$compprops.parentobjectfilter,showallrecords=_this$props$compprops.showallrecords;tablename=props.tablename,defaultsortparam=props.defaultsortparam,enablelocaldbdata=props.enablelocaldbdata,parentid=props.parentid,activeNoteId=props.activeNoteId,action=props.action;console.log(props);localdata=getLocalData(_this.props);dataParamsresult={};rsdataParamsresult={};dataParamsBeginswith=\"\";recordData=[];recordDataFinal=[];rsData=[];rsDataFinal=[];if(showallrecordsubscribe===\"true\"||Object.keys(parentobjectfilter).length>0||showallrecords===\"true\"){dataParamsBeginswith=defaultsortparam+\"-\";}else{dataParamsBeginswith=defaultsortparam+\"-\"+parentid;}_context.next=14;return getRecorddata({objectName:tablename,objectData:{},keyConditions:[{field:\"orgname\",value:localdata.orgname,expression:\"=\"},{field:\"id\",value:dataParamsBeginswith,expression:\"beginswith\"}],filterConditions:[]});case 14:dataParamsresult=_context.sent;if(dataParamsresult.isSuccess===\"false\"){alert(\"url not found\");}else{recordData=dataParamsresult.dataprops.Items;}console.log(recordData);if(!(showallrecordsubscribe===\"true\"||Object.keys(parentobjectfilter).length>0)){_context.next=24;break;}_context.next=20;return getRecorddata({objectName:parentobjectfilter.objectname,objectData:{},keyConditions:[{field:\"orgname\",value:localdata.orgname,expression:\"=\"},{field:\"id\",value:parentobjectfilter.beginswith+localdata.userid,expression:\"beginswith\"}],filterConditions:[],pageSize:\"\",limit:\"\",exclusiveStartKey:\"\"});case 20:rsdataParamsresult=_context.sent;if(rsdataParamsresult.isSuccess===\"false\"){alert(\"url not found\");}else{rsData=rsdataParamsresult.dataprops.Items;console.log(rsData);subscribetoIds=[];for(i=0;i<rsData.length;i++){rsDatavar=rsData[i];subscribetoIds.push(rsDatavar[parentobjectfilter.fieldname]);}console.log(subscribetoIds);for(j=0;j<recordData.length;j++){recordDataVar=recordData[j];if(subscribetoIds.indexOf(recordDataVar[parentobjectfilter.childfieldname])!==-1||recordDataVar[parentobjectfilter.childfieldname]===localdata.userid){recordDataFinal.push(recordData[j]);}}}_context.next=25;break;case 24:recordDataFinal=recordData;case 25:console.log(recordDataFinal);recordDataFinal=filterArraybyObject({data:recordDataFinal,filter:defaultdatafilter});if(recordDataFinal.length>0){if(activeNoteId==\"\"&&recordDataFinal.length>0){activeNoteId=recordDataFinal[0].id;}if(action==\"\"){action=recordDataFinal[0]?\"view\":\"create\";}_this.setState({showUI:false},function(){_this.setState({showUI:true,notes:recordDataFinal,activeNoteId:activeNoteId,// createNote: filtereddata[0] ? false : true,\naction:action});});}else{_this.setState({showUI:false},function(){_this.setState({showUI:true,notes:[],activeNoteId:\"\",action:\"create\"//createNote: true,\n});});}case 28:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.noteHeadingClk=function(noteid){_this.setState({showUI:false},function(){_this.setState({showUI:true,activeNoteId:noteid,//  createNote: false,\naction:\"view\"});});};_this.addNote=function(){var notes=_this.state.notes;notes.push({});_this.setState({showUI:false},function(){_this.setState({showUI:true,activeNoteId:\"\",action:\"create\"});});};_this.refreshNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(props){var noteid,_this$props$compprops2,tablename,defaultsortparam,enablelocaldbdata,parentid,showallrecordsubscribe,parentobjectfilter,showallrecords,serverprops;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:noteid=props.noteid;_this$props$compprops2=_this.props.compprops,tablename=_this$props$compprops2.tablename,defaultsortparam=_this$props$compprops2.defaultsortparam,enablelocaldbdata=_this$props$compprops2.enablelocaldbdata,parentid=_this$props$compprops2.parentid,showallrecordsubscribe=_this$props$compprops2.showallrecordsubscribe,parentobjectfilter=_this$props$compprops2.parentobjectfilter,showallrecords=_this$props$compprops2.showallrecords;serverprops={tablename:tablename,defaultsortparam:defaultsortparam,enablelocaldbdata:enablelocaldbdata,parentid:parentid,//  defaultdatafilter: defaultdatafilter,\nactiveNoteId:noteid,action:\"view\"};_context2.next=5;return _this.getServerData(serverprops);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.childnoteHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(props){var recordid,action,_this$props$compprops3,tablename,defaultsortparam,enablelocaldbdata,parentid,serverprops;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:recordid=props.recordid,action=props.action;_this$props$compprops3=_this.props.compprops,tablename=_this$props$compprops3.tablename,defaultsortparam=_this$props$compprops3.defaultsortparam,enablelocaldbdata=_this$props$compprops3.enablelocaldbdata,parentid=_this$props$compprops3.parentid;serverprops={tablename:tablename,defaultsortparam:defaultsortparam,enablelocaldbdata:enablelocaldbdata,parentid:parentid,//  defaultdatafilter: defaultdatafilter,\nactiveNoteId:recordid,action:action};_context3.next=5;return _this.getServerData(serverprops);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.state={notes:[],activeNoteId:\"\",showUI:false,createNote:false,action:\"\"};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this$props$compprops4,tablename,comphtmlid,showallrecordsubscribe,parentobjectfilter,showallrecords,enablelocaldbdata,listdisplaytype,defaultdatafilter,defaultsortparam,parentid,iscreateactive,isviewactive,iseditactive,isdeleteactive,props;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props$compprops4=this.props.compprops,tablename=_this$props$compprops4.tablename,comphtmlid=_this$props$compprops4.comphtmlid,showallrecordsubscribe=_this$props$compprops4.showallrecordsubscribe,parentobjectfilter=_this$props$compprops4.parentobjectfilter,showallrecords=_this$props$compprops4.showallrecords,enablelocaldbdata=_this$props$compprops4.enablelocaldbdata,listdisplaytype=_this$props$compprops4.listdisplaytype,defaultdatafilter=_this$props$compprops4.defaultdatafilter,defaultsortparam=_this$props$compprops4.defaultsortparam,parentid=_this$props$compprops4.parentid,iscreateactive=_this$props$compprops4.iscreateactive,isviewactive=_this$props$compprops4.isviewactive,iseditactive=_this$props$compprops4.iseditactive,isdeleteactive=_this$props$compprops4.isdeleteactive;props={tablename:tablename,defaultsortparam:defaultsortparam,enablelocaldbdata:enablelocaldbdata,parentid:parentid,//  defaultdatafilter: defaultdatafilter,\nactiveNoteId:\"\",action:\"\"};_context4.next=4;return this.getServerData(props);case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var _this$props$compprops5=this.props.compprops,iscreateactive=_this$props$compprops5.iscreateactive,isviewactive=_this$props$compprops5.isviewactive,iseditactive=_this$props$compprops5.iseditactive,isdeleteactive=_this$props$compprops5.isdeleteactive;var _this$state=this.state,notes=_this$state.notes,activeNoteId=_this$state.activeNoteId,showUI=_this$state.showUI,action=_this$state.action;console.log(this.props.compprops);var mainpanelHtml=[];var notepageHtml=[];var notesHtml=[];var _loop=function _loop(i){if(notes[i].id===activeNoteId){notesHtml.push(/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){_this2.noteHeadingClk(notes[i].id);},className:\"org-greybg\",children:notes[i].label}));}else{notesHtml.push(/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){_this2.noteHeadingClk(notes[i].id);},children:notes[i].label}));}};for(var i=0;i<notes.length;i++){_loop(i);}// if (notes.length > 0 && activeNoteId === \"\") {\n//   activeNoteId = notes[0].id;\n// }\nnotepageHtml.push(/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-flexbasis-100p org-mflexbasis-10p org-lflexbasis-10p\",children:[notesHtml,action===\"list\"||action===\"view\"?iscreateactive===\"true\"?/*#__PURE__*/_jsx(\"div\",{onClick:this.addNote,children:\"+\"}):/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\",children:showUI===false?\"\":/*#__PURE__*/_jsx(Notepad,_objectSpread(_objectSpread({},this.props),{},{noteid:activeNoteId,iseditactive:iseditactive,isdeleteactive:isdeleteactive// createNote={createNote}\n,action:action//   refreshNote={this.refreshNote}\n,childnoteHandler:this.childnoteHandler//   defaultdatafilter={defaultdatafilter}\n}))})]}));mainpanelHtml.push(notepageHtml);return/*#__PURE__*/_jsx(_Fragment,{children:mainpanelHtml});}}]);return F;}(Component);export default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorsportal3/src/components/notepadlist.js"],"names":["React","Component","Notepad","getRecorddata","createRecord","bulkcreateRecord","deleteRecord","sortArray","fieldTypeHtmltoDBmapping","getLocalData","serverButtonHandler","filterArraybyObject","F","props","getServerData","compprops","defaultdatafilter","showallrecordsubscribe","parentobjectfilter","showallrecords","tablename","defaultsortparam","enablelocaldbdata","parentid","activeNoteId","action","console","log","localdata","dataParamsresult","rsdataParamsresult","dataParamsBeginswith","recordData","recordDataFinal","rsData","rsDataFinal","Object","keys","length","objectName","objectData","keyConditions","field","value","orgname","expression","filterConditions","isSuccess","alert","dataprops","Items","objectname","beginswith","userid","pageSize","limit","exclusiveStartKey","subscribetoIds","i","rsDatavar","push","fieldname","j","recordDataVar","indexOf","childfieldname","data","filter","id","setState","showUI","notes","noteHeadingClk","noteid","addNote","state","refreshNote","serverprops","childnoteHandler","recordid","createNote","comphtmlid","listdisplaytype","iscreateactive","isviewactive","iseditactive","isdeleteactive","mainpanelHtml","notepageHtml","notesHtml","label"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Notepad from \"./notepad\";\nimport {\n  getRecorddata,\n  createRecord,\n  bulkcreateRecord,\n  deleteRecord,\n} from \"../db/index\";\nimport {\n  sortArray,\n  fieldTypeHtmltoDBmapping,\n  getLocalData,\n  serverButtonHandler,\n  filterArraybyObject,\n} from \"../js/index\";\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      notes: [],\n      activeNoteId: \"\",\n      showUI: false,\n      createNote: false,\n      action: \"\",\n    };\n  }\n\n  async componentDidMount() {\n    let {\n      tablename,\n      comphtmlid,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n      enablelocaldbdata,\n      listdisplaytype,\n      defaultdatafilter,\n      defaultsortparam,\n      parentid,\n      iscreateactive,\n      isviewactive,\n      iseditactive,\n      isdeleteactive,\n    } = this.props.compprops;\n    let props = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: \"\",\n      action: \"\",\n    };\n    await this.getServerData(props);\n  }\n\n  getServerData = async (props) => {\n    let {\n      defaultdatafilter,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n    } = this.props.compprops;\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n      //  defaultdatafilter,\n      activeNoteId,\n      action,\n      //  showallrecordsubscribe,\n      //  parentobjectfilter,\n      //  showallrecords,\n    } = props;\n    console.log(props);\n    let localdata = getLocalData(this.props);\n\n    let dataParamsresult = {};\n    let rsdataParamsresult = {};\n    let dataParamsBeginswith = \"\";\n    let recordData = [];\n    let recordDataFinal = [];\n    let rsData = [];\n    let rsDataFinal = [];\n\n    if (\n      showallrecordsubscribe === \"true\" ||\n      Object.keys(parentobjectfilter).length > 0 ||\n      showallrecords === \"true\"\n    ) {\n      dataParamsBeginswith = defaultsortparam + \"-\";\n    } else {\n      dataParamsBeginswith = defaultsortparam + \"-\" + parentid;\n    }\n\n    dataParamsresult = await getRecorddata({\n      objectName: tablename,\n      objectData: {},\n      keyConditions: [\n        { field: \"orgname\", value: localdata.orgname, expression: \"=\" },\n        {\n          field: \"id\",\n          value: dataParamsBeginswith,\n          expression: \"beginswith\",\n        },\n      ],\n      filterConditions: [],\n    });\n    if (dataParamsresult.isSuccess === \"false\") {\n      alert(\"url not found\");\n    } else {\n      recordData = dataParamsresult.dataprops.Items;\n    }\n    console.log(recordData);\n\n    if (\n      showallrecordsubscribe === \"true\" ||\n      Object.keys(parentobjectfilter).length > 0\n    ) {\n      rsdataParamsresult = await getRecorddata({\n        objectName: parentobjectfilter.objectname,\n        objectData: {},\n        keyConditions: [\n          {\n            field: \"orgname\",\n            value: localdata.orgname,\n            expression: \"=\",\n          },\n          {\n            field: \"id\",\n            value: parentobjectfilter.beginswith + localdata.userid,\n            expression: \"beginswith\",\n          },\n        ],\n        filterConditions: [],\n        pageSize: \"\",\n        limit: \"\",\n        exclusiveStartKey: \"\",\n      });\n\n      if (rsdataParamsresult.isSuccess === \"false\") {\n        alert(\"url not found\");\n      } else {\n        rsData = rsdataParamsresult.dataprops.Items;\n        console.log(rsData);\n        let subscribetoIds = [];\n        for (let i = 0; i < rsData.length; i++) {\n          let rsDatavar = rsData[i];\n          subscribetoIds.push(rsDatavar[parentobjectfilter.fieldname]);\n        }\n        console.log(subscribetoIds);\n        for (let j = 0; j < recordData.length; j++) {\n          let recordDataVar = recordData[j];\n          if (\n            subscribetoIds.indexOf(\n              recordDataVar[parentobjectfilter.childfieldname]\n            ) !== -1 ||\n            recordDataVar[parentobjectfilter.childfieldname] ===\n              localdata.userid\n          ) {\n            recordDataFinal.push(recordData[j]);\n          }\n        }\n      }\n    } else {\n      recordDataFinal = recordData;\n    }\n    console.log(recordDataFinal);\n    recordDataFinal = filterArraybyObject({\n      data: recordDataFinal,\n      filter: defaultdatafilter,\n    });\n\n    if (recordDataFinal.length > 0) {\n      if (activeNoteId == \"\" && recordDataFinal.length > 0) {\n        activeNoteId = recordDataFinal[0].id;\n      }\n\n      if (action == \"\") {\n        action = recordDataFinal[0] ? \"view\" : \"create\";\n      }\n\n      this.setState({ showUI: false }, () => {\n        this.setState({\n          showUI: true,\n          notes: recordDataFinal,\n          activeNoteId: activeNoteId,\n          // createNote: filtereddata[0] ? false : true,\n          action: action,\n        });\n      });\n    } else {\n      this.setState({ showUI: false }, () => {\n        this.setState({\n          showUI: true,\n          notes: [],\n          activeNoteId: \"\",\n          action: \"create\",\n          //createNote: true,\n        });\n      });\n    }\n  };\n\n  noteHeadingClk = (noteid) => {\n    this.setState({ showUI: false }, () => {\n      this.setState({\n        showUI: true,\n        activeNoteId: noteid,\n        //  createNote: false,\n        action: \"view\",\n      });\n    });\n  };\n  addNote = () => {\n    let { notes } = this.state;\n    notes.push({});\n    this.setState({ showUI: false }, () => {\n      this.setState({ showUI: true, activeNoteId: \"\", action: \"create\" });\n    });\n  };\n\n  refreshNote = async (props) => {\n    let { noteid } = props;\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n      showallrecordsubscribe,\n      parentobjectfilter,\n      showallrecords,\n    } = this.props.compprops;\n    let serverprops = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: noteid,\n      action: \"view\",\n    };\n\n    await this.getServerData(serverprops);\n    // this.setState({ showUI: false }, () => {\n    //   this.setState({\n    //     showUI: true,\n    //     activeNoteId: noteid,\n    //     createNote: false,\n    //   });\n    // });\n  };\n  childnoteHandler = async (props) => {\n    let { recordid, action } = props;\n    let {\n      tablename,\n      defaultsortparam,\n      enablelocaldbdata,\n      parentid,\n    } = this.props.compprops;\n    let serverprops = {\n      tablename: tablename,\n      defaultsortparam: defaultsortparam,\n      enablelocaldbdata: enablelocaldbdata,\n      parentid: parentid,\n      //  defaultdatafilter: defaultdatafilter,\n      activeNoteId: recordid,\n      action: action,\n    };\n\n    await this.getServerData(serverprops);\n    // this.setState({ showUI: false }, () => {\n    //   this.setState({\n    //     showUI: true,\n    //     activeNoteId: noteid,\n    //     createNote: false,\n    //   });\n    // });\n  };\n\n  render() {\n    let {\n      iscreateactive,\n      isviewactive,\n      iseditactive,\n      isdeleteactive,\n    } = this.props.compprops;\n    let { notes, activeNoteId, showUI, action } = this.state;\n    console.log(this.props.compprops);\n    let mainpanelHtml = [];\n    let notepageHtml = [];\n    let notesHtml = [];\n    for (let i = 0; i < notes.length; i++) {\n      if (notes[i].id === activeNoteId) {\n        notesHtml.push(\n          <div\n            onClick={() => {\n              this.noteHeadingClk(notes[i].id);\n            }}\n            className=\"org-greybg\"\n          >\n            {notes[i].label}\n          </div>\n        );\n      } else {\n        notesHtml.push(\n          <div\n            onClick={() => {\n              this.noteHeadingClk(notes[i].id);\n            }}\n          >\n            {notes[i].label}\n          </div>\n        );\n      }\n    }\n    // if (notes.length > 0 && activeNoteId === \"\") {\n    //   activeNoteId = notes[0].id;\n    // }\n\n    notepageHtml.push(\n      <div className=\"org-fr\">\n        <div className=\"org-flexbasis-100p org-mflexbasis-10p org-lflexbasis-10p\">\n          {notesHtml}\n\n          {action === \"list\" || action === \"view\" ? (\n            iscreateactive === \"true\" ? (\n              <div onClick={this.addNote}>+</div>\n            ) : (\n              <></>\n            )\n          ) : (\n            <></>\n          )}\n        </div>\n        <div className=\"org-flexbasis-100p org-mflexbasis-90p org-lflexbasis-90p\">\n          {showUI === false ? (\n            \"\"\n          ) : (\n            <Notepad\n              {...this.props}\n              noteid={activeNoteId}\n              iseditactive={iseditactive}\n              isdeleteactive={isdeleteactive}\n              // createNote={createNote}\n              action={action}\n              //   refreshNote={this.refreshNote}\n              childnoteHandler={this.childnoteHandler}\n              //   defaultdatafilter={defaultdatafilter}\n            />\n          )}\n        </div>\n      </div>\n    );\n    mainpanelHtml.push(notepageHtml);\n\n    return <>{mainpanelHtml}</>;\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}